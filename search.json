[{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"Apache License","title":"Apache License","text":"Version 2.0, January 2004 <http://www.apache.org/licenses/>","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"id_1-definitions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"1. Definitions","title":"Apache License","text":"“License” shall mean terms conditions use, reproduction, distribution defined Sections 1 9 document. “Licensor” shall mean copyright owner entity authorized copyright owner granting License. “Legal Entity” shall mean union acting entity entities control, controlled , common control entity. purposes definition, “control” means () power, direct indirect, cause direction management entity, whether contract otherwise, (ii) ownership fifty percent (50%) outstanding shares, (iii) beneficial ownership entity. “” (“”) shall mean individual Legal Entity exercising permissions granted License. “Source” form shall mean preferred form making modifications, including limited software source code, documentation source, configuration files. “Object” form shall mean form resulting mechanical transformation translation Source form, including limited compiled object code, generated documentation, conversions media types. “Work” shall mean work authorship, whether Source Object form, made available License, indicated copyright notice included attached work (example provided Appendix ). “Derivative Works” shall mean work, whether Source Object form, based (derived ) Work editorial revisions, annotations, elaborations, modifications represent, whole, original work authorship. purposes License, Derivative Works shall include works remain separable , merely link (bind name) interfaces , Work Derivative Works thereof. “Contribution” shall mean work authorship, including original version Work modifications additions Work Derivative Works thereof, intentionally submitted Licensor inclusion Work copyright owner individual Legal Entity authorized submit behalf copyright owner. purposes definition, “submitted” means form electronic, verbal, written communication sent Licensor representatives, including limited communication electronic mailing lists, source code control systems, issue tracking systems managed , behalf , Licensor purpose discussing improving Work, excluding communication conspicuously marked otherwise designated writing copyright owner “Contribution.” “Contributor” shall mean Licensor individual Legal Entity behalf Contribution received Licensor subsequently incorporated within Work.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"id_2-grant-of-copyright-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"2. Grant of Copyright License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable copyright license reproduce, prepare Derivative Works , publicly display, publicly perform, sublicense, distribute Work Derivative Works Source Object form.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"id_3-grant-of-patent-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"3. Grant of Patent License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable (except stated section) patent license make, made, use, offer sell, sell, import, otherwise transfer Work, license applies patent claims licensable Contributor necessarily infringed Contribution(s) alone combination Contribution(s) Work Contribution(s) submitted. institute patent litigation entity (including cross-claim counterclaim lawsuit) alleging Work Contribution incorporated within Work constitutes direct contributory patent infringement, patent licenses granted License Work shall terminate date litigation filed.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"id_4-redistribution","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"4. Redistribution","title":"Apache License","text":"may reproduce distribute copies Work Derivative Works thereof medium, without modifications, Source Object form, provided meet following conditions: () must give recipients Work Derivative Works copy License; (b) must cause modified files carry prominent notices stating changed files; (c) must retain, Source form Derivative Works distribute, copyright, patent, trademark, attribution notices Source form Work, excluding notices pertain part Derivative Works; (d) Work includes “NOTICE” text file part distribution, Derivative Works distribute must include readable copy attribution notices contained within NOTICE file, excluding notices pertain part Derivative Works, least one following places: within NOTICE text file distributed part Derivative Works; within Source form documentation, provided along Derivative Works; , within display generated Derivative Works, wherever third-party notices normally appear. contents NOTICE file informational purposes modify License. may add attribution notices within Derivative Works distribute, alongside addendum NOTICE text Work, provided additional attribution notices construed modifying License. may add copyright statement modifications may provide additional different license terms conditions use, reproduction, distribution modifications, Derivative Works whole, provided use, reproduction, distribution Work otherwise complies conditions stated License.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"id_5-submission-of-contributions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"5. Submission of Contributions","title":"Apache License","text":"Unless explicitly state otherwise, Contribution intentionally submitted inclusion Work Licensor shall terms conditions License, without additional terms conditions. Notwithstanding , nothing herein shall supersede modify terms separate license agreement may executed Licensor regarding Contributions.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"id_6-trademarks","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"6. Trademarks","title":"Apache License","text":"License grant permission use trade names, trademarks, service marks, product names Licensor, except required reasonable customary use describing origin Work reproducing content NOTICE file.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"id_7-disclaimer-of-warranty","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"7. Disclaimer of Warranty","title":"Apache License","text":"Unless required applicable law agreed writing, Licensor provides Work (Contributor provides Contributions) “” BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied, including, without limitation, warranties conditions TITLE, NON-INFRINGEMENT, MERCHANTABILITY, FITNESS PARTICULAR PURPOSE. solely responsible determining appropriateness using redistributing Work assume risks associated exercise permissions License.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"id_8-limitation-of-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"8. Limitation of Liability","title":"Apache License","text":"event legal theory, whether tort (including negligence), contract, otherwise, unless required applicable law (deliberate grossly negligent acts) agreed writing, shall Contributor liable damages, including direct, indirect, special, incidental, consequential damages character arising result License use inability use Work (including limited damages loss goodwill, work stoppage, computer failure malfunction, commercial damages losses), even Contributor advised possibility damages.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"id_9-accepting-warranty-or-additional-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"9. Accepting Warranty or Additional Liability","title":"Apache License","text":"redistributing Work Derivative Works thereof, may choose offer, charge fee , acceptance support, warranty, indemnity, liability obligations /rights consistent License. However, accepting obligations, may act behalf sole responsibility, behalf Contributor, agree indemnify, defend, hold Contributor harmless liability incurred , claims asserted , Contributor reason accepting warranty additional liability. END TERMS CONDITIONS","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/LICENSE.html","id":"appendix-how-to-apply-the-apache-license-to-your-work","dir":"","previous_headings":"","what":"APPENDIX: How to apply the Apache License to your work","title":"Apache License","text":"apply Apache License work, attach following boilerplate notice, fields enclosed brackets [] replaced identifying information. (Don’t include brackets!) text enclosed appropriate comment syntax file format. also recommend file class name description purpose included “printed page” copyright notice easier identification within third-party archives.","code":"Copyright [yyyy] [name of copyright owner]  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License."},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Creating drug cohorts","text":"vignette introduce create drug users cohorts. cohort set people satisfy certain inclusion criteria certain time frame. cohort object defined : vignette(\"cdm_reference\", package = \"omopgenerics\"). function generateDrugUtilisationCohortSet used generate cohorts drug users based drug_exposure table conceptSet. cohorts can subsetted exposures interest applying different inclusion criteria: Require entries certain date range requireDrugInDateRange(). Subset first entry requireIsFirstDrugEntry(). Require certain time observation entries requireObservationBeforeDrug(). Require certain time exposure requirePriorDrugWashout().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"creating-a-cdm_reference-object","dir":"Articles","previous_headings":"","what":"Creating a cdm_reference object","title":"Creating drug cohorts","text":"first thing need cdm_reference object OMOP CDM instance. can learn create cdm references using CDMConnector : vignette(\"a04_DBI_connection_examples\", package = \"CDMConnector\"). DrugUtilisation packages contains mock data can useful test package:","code":"library(DrugUtilisation)  cdm <- mockDrugUtilisation(numberIndividuals = 100, seed = 1)  cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, concept_relationship, drug_exposure, condition_occurrence, #> observation, visit_occurrence #> • cohort tables: cohort1, cohort2 #> • achilles tables: - #> • other tables: -"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"create-a-drug-users-cohort","dir":"Articles","previous_headings":"","what":"Create a drug users cohort","title":"Creating drug cohorts","text":"create basic drug users cohort need two things: conceptSet: determine concepts use. gapEra: determine collapse exposures.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"creating-a-conceptset","dir":"Articles","previous_headings":"Create a drug users cohort","what":"Creating a conceptSet","title":"Creating drug cohorts","text":"three possible forms conceptSet: named list concept ids codelist object, see vignette(\"codelists\", package = \"omopgenerics\") conceptSetExpression object, see vignette(\"codelists\", package = \"omopgenerics\") package CodelistGenerator can useful create conceptSet. example can create conceptSet based ingredient getDrugIngredientCodes(): also use function codesFromConceptSet() read concept set json file:","code":"conceptSet <- list(acetaminophen = c(1, 2, 3)) conceptSet #> $acetaminophen #> [1] 1 2 3 conceptSet <- list(acetaminophen = c(1, 2, 3)) |> omopgenerics::newCodelist() #> Warning: ! `codelist` casted to integers. conceptSet #>  #> ── 1 codelist ────────────────────────────────────────────────────────────────── #>  #> - acetaminophen (3 codes) conceptSet$acetaminophen #> [1] 1 2 3 conceptSet <- list(acetaminophen = dplyr::tibble(   concept_id = 1125315,   excluded = FALSE,   descendants = TRUE,   mapped = FALSE )) |>   omopgenerics::newConceptSetExpression() conceptSet #>  #> ── 1 conceptSetExpression ────────────────────────────────────────────────────── #>  #> - acetaminophen (1 concept criteria) conceptSet$acetaminophen #> # A tibble: 1 × 4 #>   concept_id excluded descendants mapped #>        <int> <lgl>    <lgl>       <lgl>  #> 1    1125315 FALSE    TRUE        FALSE library(CodelistGenerator) codes <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") codes[[\"161_acetaminophen\"]] #> [1]  1125315  1125360  2905077 43135274 codes <- codesFromConceptSet(path = system.file(\"acetaminophen.json\", package = \"DrugUtilisation\"), cdm = cdm) codes #>  #> ── 1 codelist ────────────────────────────────────────────────────────────────── #>  #> - acetaminophen (4 codes)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"the-gapera-parameter","dir":"Articles","previous_headings":"Create a drug users cohort","what":"The gapEra parameter","title":"Creating drug cohorts","text":"gapEra parameter used join exposures episodes, let’s say example individual 4 drug exposures interested . first two overlap , gap 29 days two consecutive exposures:  create episode gapEra = 0, 3 resultant episodes, first two overlap joined single episode, two independent:  , instead use gapEra = 1, 2 resultant episodes, first two overlap joined single episode (), now two consecutive exposures joined single episode:  result value 1 28 (gapEra ∈\\[1, 28]). Whereas, use gapEra = 29 records collapsed single episode:","code":"#> # A tibble: 3 × 4 #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1          1 2020-01-01        2020-02-15      #> 2                    1          1 2020-03-15        2020-04-19      #> 3                    1          1 2020-04-20        2020-05-15 #> # A tibble: 2 × 4 #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1          1 2020-01-01        2020-02-15      #> 2                    1          1 2020-03-15        2020-05-15 #> # A tibble: 1 × 4 #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1          1 2020-01-01        2020-05-15"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"create-your-cohort","dir":"Articles","previous_headings":"Create a drug users cohort","what":"Create your cohort","title":"Creating drug cohorts","text":"create now cohort drug users acetaminophen gapEra 30 days. NOTE name argument used create new table cdm object. database backends name table created. can compare see expect; look individual records can see joined single exposure records overlap : case gapEra big impact can see attrition: can see particular case individual: case 3 exposures separated 3 days, use 30 days gap exposures joined single episode, whereas use gapEra smaller 3 consider different episodes. can access cohort attributes using adequate functions. settings can see gapEra used recorded cohortCodelist can see codelist used create cohort.","code":"codes <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") names(codes) <- \"acetaminophen\" cdm <- generateDrugUtilisationCohortSet(cdm = cdm, name = \"acetaminophen_cohort\", conceptSet = codes, gapEra = 30) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 30 days. cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, concept_relationship, drug_exposure, condition_occurrence, #> observation, visit_occurrence #> • cohort tables: cohort1, cohort2, acetaminophen_cohort #> • achilles tables: - #> • other tables: - cdm$drug_exposure |>   dplyr::filter(drug_concept_id %in% !!codes$acetaminophen & person_id == 69) #> # Source:   SQL [?? x 23] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>   drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>              <int>     <int>           <int> <date>                   #> 1              201        69         2905077 2002-01-29               #> 2              203        69         2905077 2001-04-23               #> 3              205        69         2905077 2001-03-04               #> 4              204        69        43135274 2003-10-16               #> # ℹ 19 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <int>, quantity <dbl>, #> #   drug_exposure_start_datetime <date>, drug_exposure_end_datetime <date>, #> #   verbatim_end_date <date>, stop_reason <chr>, refills <int>, #> #   days_supply <int>, sig <chr>, route_concept_id <int>, lot_number <chr>, #> #   provider_id <int>, visit_occurrence_id <int>, visit_detail_id <int>, #> #   drug_source_value <chr>, drug_source_concept_id <int>, … cdm$acetaminophen_cohort |>   dplyr::filter(subject_id == 69) #> # Source:   SQL [?? x 4] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1         69 2001-03-04        2004-06-02 attrition(cdm$acetaminophen_cohort) #> # A tibble: 2 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 Collapse record… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> cdm$drug_exposure |>   dplyr::filter(drug_concept_id %in% !!codes$acetaminophen & person_id == 50) #> # Source:   SQL [?? x 23] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>   drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>              <int>     <int>           <int> <date>                   #> 1              143        50         1125360 2017-04-14               #> 2              144        50        43135274 2017-04-01               #> # ℹ 19 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <int>, quantity <dbl>, #> #   drug_exposure_start_datetime <date>, drug_exposure_end_datetime <date>, #> #   verbatim_end_date <date>, stop_reason <chr>, refills <int>, #> #   days_supply <int>, sig <chr>, route_concept_id <int>, lot_number <chr>, #> #   provider_id <int>, visit_occurrence_id <int>, visit_detail_id <int>, #> #   drug_source_value <chr>, drug_source_concept_id <int>, … cdm$acetaminophen_cohort |>   dplyr::filter(subject_id == 50) #> # Source:   SQL [?? x 4] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <int> <date>            <date>          #> 1                    1         50 2017-04-01        2017-04-23 settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id cohort_name   gap_era #>                  <int> <chr>         <chr>   #> 1                    1 acetaminophen 30 cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             70              62 cohortCodelist(cdm$acetaminophen_cohort, cohortId = 1) #>  #> ── 1 codelist ────────────────────────────────────────────────────────────────── #>  #> - acetaminophen (4 codes)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"analogous-functions","dir":"Articles","previous_headings":"Create a drug users cohort","what":"Analogous functions","title":"Creating drug cohorts","text":"function generateDrugUtilisationCohortSet() two analogous functions: generateAtcCohortSet() generate cohorts using ATC labels. generateIngredientCohortSet() generate cohorts using ingredients names. functions allow create cohorts arguments generateDrugUtilisationCohortSet() main difference instead conceptSet argument atcName argument ingredient argument. Also functions ... argument used CodelistGenerator::getATCCodes() CodelistGenerator::getDrugIngredientCodes() respectively. Let’s see two simple examples, can generate ‘alimentary tract metabolism’ (ATC code) cohort : ‘simvastatin’ ‘metformin’ cohorts, restricting products one ingredient:","code":"cdm <- generateAtcCohortSet(   cdm = cdm,   atcName = \"alimentary tract and metabolism\",   name = \"atc_cohort\" ) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> Warning: cohort_name must be snake case and have less than 100 characters, the following #> cohorts will be renamed: #> • alimentary tract and metabolism -> alimentary_tract_and_metabolism #> ℹ Collapsing records with gapEra = 1 days. settings(cdm$atc_cohort) #> # A tibble: 1 × 8 #>   cohort_definition_id cohort_name             gap_era level dose_form dose_unit #>                  <int> <chr>                   <chr>   <chr> <chr>     <chr>     #> 1                    1 alimentary_tract_and_m… 1       ATC … \"\"        \"\"        #> # ℹ 2 more variables: route_category <chr>, atc_name <chr> cdm <- generateIngredientCohortSet(   cdm = cdm,   ingredient = c('simvastatin', 'metformin'),   name = \"ingredient_cohort\",   ingredientRange = c(1, 1) ) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days. settings(cdm$ingredient_cohort) #> # A tibble: 2 × 8 #>   cohort_definition_id cohort_name gap_era dose_form dose_unit route_category #>                  <int> <chr>       <chr>   <chr>     <chr>     <chr>          #> 1                    1 metformin   1       \"\"        \"\"        \"\"             #> 2                    2 simvastatin 1       \"\"        \"\"        \"\"             #> # ℹ 2 more variables: ingredient_range <chr>, ingredient_name <chr>"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"apply-inclusion-criteria-to-drug-cohorts","dir":"Articles","previous_headings":"","what":"Apply inclusion criteria to drug cohorts","title":"Creating drug cohorts","text":"created base cohort using conceptSet gapEra can apply different restrictions: require prior unexposed time: requirePriorDrugWashout() require first entry: requireIsFirstDrugEntry() require prior observation cdm: requireObservationBeforeDrug() require date within certain interval: requireDrugInDateRange()","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"requirepriordrugwashout","dir":"Articles","previous_headings":"Apply inclusion criteria to drug cohorts","what":"requirePriorDrugWashout()","title":"Creating drug cohorts","text":"require cohort entries (drug episodes) incident usually define time (days) individual exposed drug. can achieved using requirePriorDrugWashout() function. example restrict individuals 365 days exposure: result cohort individuals fulfill criteria: also get recorded attrition, counts settings. settings new column specified parameter used: counts updated: attrition new line: name argument can used put result different table cdm (default function updates current cohort table). Whereas cohortId argument used apply criteria restricted set cohorts (default criteria applied cohort records). show example create two cohorts (metformin simvastatin) inside table named my_cohort apply inclusion criteria one (simvastatin) save result table named: my_new_cohort","code":"cdm$acetaminophen_cohort <- cdm$acetaminophen_cohort |>   requirePriorDrugWashout(days = 365) cdm$acetaminophen_cohort #> # Source:   table<acetaminophen_cohort> [?? x 4] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         23 2003-10-29        2003-11-27      #>  2                    1         33 2021-02-12        2021-02-14      #>  3                    1         14 1990-04-27        1990-05-12      #>  4                    1         42 2002-09-15        2007-12-19      #>  5                    1         77 1966-09-15        1966-12-27      #>  6                    1          9 2016-03-17        2016-09-02      #>  7                    1         57 2020-04-17        2020-11-19      #>  8                    1         39 2022-02-09        2022-06-11      #>  9                    1         47 1963-12-22        1965-09-16      #> 10                    1         94 2000-10-10        2004-08-16      #> # ℹ more rows settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 4 #>   cohort_definition_id cohort_name   gap_era prior_use_washout #>                  <int> <chr>         <chr>   <chr>             #> 1                    1 acetaminophen 30      365 cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             66              62 attrition(cdm$acetaminophen_cohort) #> # A tibble: 3 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 Collapse record… #> 3                    1             66              62         3 require prior u… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> codes <- getDrugIngredientCodes(cdm = cdm, name = c(\"metformin\", \"simvastatin\")) cdm <- generateDrugUtilisationCohortSet(cdm = cdm, name = \"my_cohort\", conceptSet = codes, gapEra = 30) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 30 days. cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, concept_relationship, drug_exposure, condition_occurrence, #> observation, visit_occurrence #> • cohort tables: cohort1, cohort2, acetaminophen_cohort, atc_cohort, #> ingredient_cohort, my_cohort #> • achilles tables: - #> • other tables: - settings(cdm$my_cohort) #> # A tibble: 2 × 3 #>   cohort_definition_id cohort_name       gap_era #>                  <int> <chr>             <chr>   #> 1                    1 36567_simvastatin 30      #> 2                    2 6809_metformin    30 cdm$my_new_cohort <- cdm$my_cohort |>   requirePriorDrugWashout(days = 365, cohortId = 2, name = \"my_new_cohort\") cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, concept_relationship, drug_exposure, condition_occurrence, #> observation, visit_occurrence #> • cohort tables: cohort1, cohort2, acetaminophen_cohort, atc_cohort, #> ingredient_cohort, my_cohort, my_new_cohort #> • achilles tables: - #> • other tables: - attrition(cdm$my_new_cohort) #> # A tibble: 5 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             53              48         1 Initial qualify… #> 2                    1             51              48         2 Collapse record… #> 3                    2             55              48         1 Initial qualify… #> 4                    2             52              48         2 Collapse record… #> 5                    2             51              48         3 require prior u… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int>"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"requireisfirstdrugentry","dir":"Articles","previous_headings":"Apply inclusion criteria to drug cohorts","what":"requireIsFirstDrugEntry()","title":"Creating drug cohorts","text":"require cohort entry (drug episodes) first one available ones can use requireIsFirstDrugEntry() function. See example: result cohort individuals fulfill criteria: also get recorded attrition, counts settings top already exiting ones. settings new column specified parameter used: counts updated: attrition new line:","code":"cdm$acetaminophen_cohort <- cdm$acetaminophen_cohort |>   requireIsFirstDrugEntry() cdm$acetaminophen_cohort #> # Source:   table<acetaminophen_cohort> [?? x 4] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         14 1990-04-27        1990-05-12      #>  2                    1         23 2003-10-29        2003-11-27      #>  3                    1         25 2020-01-04        2020-02-05      #>  4                    1         48 1972-04-14        1972-12-18      #>  5                    1         69 2001-03-04        2004-06-02      #>  6                    1         74 1973-02-24        1974-05-06      #>  7                    1         81 1995-09-13        1997-11-17      #>  8                    1         93 2014-01-09        2016-06-21      #>  9                    1         19 2021-08-28        2022-08-26      #> 10                    1         27 2019-05-22        2020-02-05      #> # ℹ more rows settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 5 #>   cohort_definition_id cohort_name   gap_era prior_use_washout limit       #>                  <int> <chr>         <chr>   <chr>             <chr>       #> 1                    1 acetaminophen 30      365               first_entry cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             62              62 attrition(cdm$acetaminophen_cohort) #> # A tibble: 4 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 Collapse record… #> 3                    1             66              62         3 require prior u… #> 4                    1             62              62         4 require is the … #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int>"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"requireobservationbeforedrug","dir":"Articles","previous_headings":"Apply inclusion criteria to drug cohorts","what":"requireObservationBeforeDrug()","title":"Creating drug cohorts","text":"require cohort entry (drug episodes) certain time prior observation can use requireObservationBeforeDrug() function. See example: result cohort individuals fulfill criteria: also get recorded attrition, counts settings top already exiting ones. settings new column specified parameter used: counts updated: attrition new line:","code":"cdm$acetaminophen_cohort <- cdm$acetaminophen_cohort |>   requireObservationBeforeDrug(days = 365) cdm$acetaminophen_cohort #> # Source:   table<acetaminophen_cohort> [?? x 4] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         14 1990-04-27        1990-05-12      #>  2                    1         23 2003-10-29        2003-11-27      #>  3                    1         48 1972-04-14        1972-12-18      #>  4                    1         81 1995-09-13        1997-11-17      #>  5                    1         93 2014-01-09        2016-06-21      #>  6                    1         26 2015-07-22        2020-07-18      #>  7                    1          8 2019-09-14        2020-12-31      #>  8                    1         17 2000-08-24        2003-02-19      #>  9                    1         36 2018-06-17        2018-10-24      #> 10                    1         46 2004-06-27        2011-05-07      #> # ℹ more rows settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 6 #>   cohort_definition_id cohort_name   gap_era prior_use_washout limit       #>                  <int> <chr>         <chr>   <chr>             <chr>       #> 1                    1 acetaminophen 30      365               first_entry #> # ℹ 1 more variable: prior_drug_observation <chr> cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             33              33 attrition(cdm$acetaminophen_cohort) #> # A tibble: 5 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 Collapse record… #> 3                    1             66              62         3 require prior u… #> 4                    1             62              62         4 require is the … #> 5                    1             33              33         5 require prior o… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int>"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"requiredrugindaterange","dir":"Articles","previous_headings":"Apply inclusion criteria to drug cohorts","what":"requireDrugInDateRange()","title":"Creating drug cohorts","text":"require cohort entry (drug episodes) certain date within specific range can use requireDrugInDateRange() function. general like apply restriction incident date (cohort_start_date), function flexible can use restrict date. See example: result cohort individuals fulfill criteria: also get recorded attrition, counts settings top already exiting ones. settings new column specified parameter used: counts updated: attrition new line: just want restrict lower upper bound can just leave element NA condition applied, see example:","code":"cdm$acetaminophen_cohort <- cdm$acetaminophen_cohort |>   requireDrugInDateRange(     indexDate = \"cohort_start_date\",     dateRange = as.Date(c(\"2000-01-01\", \"2020-12-31\"))   ) cdm$acetaminophen_cohort #> # Source:   table<acetaminophen_cohort> [?? x 4] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         23 2003-10-29        2003-11-27      #>  2                    1         93 2014-01-09        2016-06-21      #>  3                    1         26 2015-07-22        2020-07-18      #>  4                    1          8 2019-09-14        2020-12-31      #>  5                    1         17 2000-08-24        2003-02-19      #>  6                    1         36 2018-06-17        2018-10-24      #>  7                    1         46 2004-06-27        2011-05-07      #>  8                    1         57 2020-04-17        2020-11-19      #>  9                    1         87 2020-10-02        2021-01-02      #> 10                    1         45 2017-07-03        2018-07-06      #> # ℹ more rows settings(cdm$acetaminophen_cohort) #> # A tibble: 1 × 6 #>   cohort_definition_id cohort_name   gap_era prior_use_washout limit       #>                  <int> <chr>         <chr>   <chr>             <chr>       #> 1                    1 acetaminophen 30      365               first_entry #> # ℹ 1 more variable: prior_drug_observation <chr> cohortCount(cdm$acetaminophen_cohort) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             24              24 attrition(cdm$acetaminophen_cohort) #> # A tibble: 6 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             71              62         1 Initial qualify… #> 2                    1             70              62         2 Collapse record… #> 3                    1             66              62         3 require prior u… #> 4                    1             62              62         4 require is the … #> 5                    1             33              33         5 require prior o… #> 6                    1             24              24         6 require cohort_… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int> cdm$my_new_cohort <- cdm$my_new_cohort |>   requireDrugInDateRange(dateRange = as.Date(c(NA, \"2010-12-31\"))) attrition(cdm$my_new_cohort) #> # A tibble: 7 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <int>           <int>     <int> <chr>            #> 1                    1             53              48         1 Initial qualify… #> 2                    1             51              48         2 Collapse record… #> 3                    1             18              18         3 require cohort_… #> 4                    2             55              48         1 Initial qualify… #> 5                    2             52              48         2 Collapse record… #> 6                    2             51              48         3 require prior u… #> 7                    2             23              21         4 require cohort_… #> # ℹ 2 more variables: excluded_records <int>, excluded_subjects <int>"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"the-order-matters","dir":"Articles","previous_headings":"","what":"The order matters","title":"Creating drug cohorts","text":"important know different restrictions commutable operations different order can lead different results. Let’s see following example individual 4 cohort entries:  case see result combining different ways 4 inclusion criteria: first: requireIsFirstDrugEntry() washout: requirePriorDrugWashout(days = 365) minObs: requireObservationBeforeDrug(days = 365) 2011-2012 requireDrugInDateRange(dateRange = .Date(c(\"2011-01-01\", \"2012-12-31)))","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"first-and-washout","dir":"Articles","previous_headings":"The order matters","what":"first and washout","title":"Creating drug cohorts","text":"apply initially first requirement washout one end first record:  Whereas apply initially washout criteria first one resulting exposure fourth one:","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"first-and-minobs","dir":"Articles","previous_headings":"The order matters","what":"first and minObs","title":"Creating drug cohorts","text":"apply initially first requirement minObs one end record cohort:  Whereas apply initially minObs criteria first one exposure selected, second one:","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"first-and-2011-2012","dir":"Articles","previous_headings":"The order matters","what":"first and 2011-2012","title":"Creating drug cohorts","text":"apply initially first requirement 2011-2012 one end record cohort:  Whereas apply initially 2011-2012 criteria first one exposure selected, second one:","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"washout-and-minobs","dir":"Articles","previous_headings":"The order matters","what":"washout and minObs","title":"Creating drug cohorts","text":"apply initially washout requirement minObs one end last record selected:  Whereas apply initially minObs criteria washout one second fourth exposures ones selected:","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"washout-and-2011-2012","dir":"Articles","previous_headings":"The order matters","what":"washout and 2011-2012","title":"Creating drug cohorts","text":"apply initially washout requirement 2011-2012 one record selected:  Whereas apply initially 2011-2012 criteria washout one second record included:","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"minobs-and-2011-2012","dir":"Articles","previous_headings":"The order matters","what":"minObs and 2011-2012","title":"Creating drug cohorts","text":"Finally requireObservationBeforeDrug requireDrugInDateRange always commutable operations two always .","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/create_cohorts.html","id":"recommended-order","dir":"Articles","previous_headings":"The order matters","what":"Recommended order","title":"Creating drug cohorts","text":"account recommended order apply criteria : Require prior drug washout require first drug entry (particular case). Require prior observation drug episode. Require drugs certain date range. Although recommended order, study design may different required specification, example may interested first exposure fulfills criteria. Thus making applying require first drug entry end.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Daily dose calculation","text":"vignette assessed daily dose calculated DrugUtilisation package. function used internally addDrugUtilisation().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"daily-dose","dir":"Articles","previous_headings":"Introduction","what":"Daily dose","title":"Daily dose calculation","text":"Daily dose always computed ingredient level. can calculate daily dose record drug exposure table given ingredient. first step calculate daily dose given drug record ingredient concept id examine relationship drug concept id ingredient concept id drug strength table: can read documentation drug strength table description different fields : https://www.ohdsi.org/web/wiki/doku.php?id=documentation:cdm:drug_strength. drug concept ids ingredient concept ids can related, relation found daily dose considered NA. Using vocabulary version: “v5.0 31-AUG-23” exist 2,980,115 relationships drug concept id ingredient concept id. relationships can classified 128 different patterns. Patterns identified combinations 6 variables: amount: Whether amount_value field numeric NA. amount_unit: unit amount field. numerator: Whether numerator_value field numeric NA. numerator_unit: unit numerator field. denominator: Whether denominator_value field numeric NA. denominator_unit: unit denominator field. 128 combinations analysed see used compute daily dose. 41 viable patterns identified, patterns covered total 2,514,608 (84%) relationships drug concept id ingredient concept id. patterns classified 4 different formulas: Time based denominator formula applied following 3 patterns cover 8,044 (<1%) relationships: pattern_id amount amount_unit numerator numerator_unit denominator denominator_unit 1   number microgram number hour 2   number milligram number hour 3   number unit number hour formula case follows: (denominator > 24)→daily dose=24⋅numeratordenominatorif (denominator≤24)→daily dose=numerator \\begin{aligned} \\text{(denominator > 24)} &\\rightarrow \\text{daily dose} = 24 \\cdot \\frac{\\text{numerator}}{\\text{denominator}} \\\\ \\text{(denominator} \\leq 24) &\\rightarrow \\text{daily dose} = \\text{numerator} \\end{aligned} Note daily dose always unit associated case determined numerator_unit field. Time based denominator formula applied following 2 patterns cover 5,611 (<1%) relationships: pattern_id amount amount_unit numerator numerator_unit denominator denominator_unit 4   number microgram  hour 5   number milligram  hour formula case follows: daily dose=24⋅numerator\\begin{equation} \\textrm{daily dose} = 24 \\cdot numerator \\end{equation} case unit determined numerator_unit field. Fixed amount formulation formula applied following 6 patterns cover 1,102,435 (37%) relationships: pattern_id amount amount_unit numerator numerator_unit denominator denominator_unit 6 number international unit     7 number microgram     8 number milliequivalent     9 number milligram     10 number milliliter     11 number unit     formula case follows: daily dose=quantity⋅amountdaysexposed\\begin{equation} \\textrm{daily dose} = \\frac{quantity \\cdot amount}{days\\: exposed} \\end{equation} case unit determined amount_unit field. Concentration formulation formula applied following 30 patterns cover 1,398,518 (47%) relationships: pattern_id amount amount_unit numerator numerator_unit denominator denominator_unit 12   number international unit number milligram 13   number international unit number milliliter 14   number milliequivalent number milliliter 15   number milligram number Actuation 16   number milligram number liter 17   number milligram number milligram 18   number milligram number milliliter 19   number milligram number square centimeter 20   number milliliter number milligram 21   number milliliter number milliliter 22   number unit number Actuation 23   number unit number milligram 24   number unit number milliliter 25   number unit number square centimeter 26   number international unit  milligram 27   number international unit  milliliter 28   number mega-international unit  milliliter 29   number milliequivalent  milligram 30   number milliequivalent  milliliter 31   number milligram  Actuation 32   number milligram  liter 33   number milligram  milligram 34   number milligram  milliliter 35   number milligram  square centimeter 36   number milliliter  milligram 37   number milliliter  milliliter 38   number unit  Actuation 39   number unit  milligram 40   number unit  milliliter 41   number unit  square centimeter formula case follows: daily dose=quantity⋅numeratordaysexposed\\begin{equation} \\textrm{daily dose} = \\frac{quantity \\cdot numerator}{days\\: exposed} \\end{equation} case unit determined numerator_unit field. formulas (3) (4) quantity obtained quantity column drug exposure table time exposed obtained difference days drug_exposure_start_date drug_exposure_end_date plus one. described formulas patterns can found exported patternsWithFormula data set: described formulas validated 5 different databases results included article. Please refer details dose calculations: Calculating daily dose Observational Medical Outcomes Partnership Common Data Model.","code":"library(DrugUtilisation) cdm <- mockDrugUtilisation(numberIndividuals = 100, seed = 123456) cdm$drug_strength |>   dplyr::glimpse() #> Rows: ?? #> Columns: 12 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ drug_concept_id             <int> 1125315, 1125360, 1503297, 1503327, 150332… #> $ ingredient_concept_id       <int> 1125315, 1125315, 1503297, 1503297, 150329… #> $ amount_value                <dbl> NA, 5.0e+02, NA, 1.0e+03, 5.0e+02, NA, NA,… #> $ amount_unit_concept_id      <int> 8576, 8576, 8576, 8576, 8576, 8510, NA, NA… #> $ numerator_value             <dbl> NA, NA, NA, NA, NA, NA, 100, 300, NA, NA, … #> $ numerator_unit_concept_id   <int> NA, NA, NA, NA, NA, NA, 8510, 8510, NA, NA… #> $ denominator_value           <dbl> NA, NA, NA, NA, NA, NA, NA, 3, NA, NA, NA,… #> $ denominator_unit_concept_id <int> NA, NA, NA, NA, NA, NA, 8587, 8587, NA, NA… #> $ box_size                    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ valid_start_date            <date> 1-01-19, 1-01-19, 1-01-19, 1-01-19, 1-01-… #> $ valid_end_date              <date> 31-12-20, 31-12-20, 31-12-20, 31-12-20, 3… #> $ invalid_reason              <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… patternsWithFormula |>   dplyr::glimpse() #> Rows: 41 #> Columns: 9 #> $ pattern_id       <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16… #> $ amount           <chr> NA, NA, NA, NA, NA, \"number\", \"number\", \"number\", \"nu… #> $ amount_unit      <chr> NA, NA, NA, NA, NA, \"international unit\", \"microgram\"… #> $ numerator        <chr> \"number\", \"number\", \"number\", \"number\", \"number\", NA,… #> $ numerator_unit   <chr> \"microgram\", \"milligram\", \"unit\", \"microgram\", \"milli… #> $ denominator      <chr> \"number\", \"number\", \"number\", NA, NA, NA, NA, NA, NA,… #> $ denominator_unit <chr> \"hour\", \"hour\", \"hour\", \"hour\", \"hour\", NA, NA, NA, N… #> $ formula_name     <chr> \"time based with denominator\", \"time based with denom… #> $ formula          <chr> \"if (denominator>24) {numerator * 24 / denominator} e…"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"finding-out-the-pattern-information-using-patterntable-function","dir":"Articles","previous_headings":"Introduction","what":"Finding out the pattern information using patternTable() function","title":"Daily dose calculation","text":"user also find patterns used drug_strength table. output also include column potentially valid invalid combinations. idea pattern provide platform associate drug drug_strength table constituent ingredients. output three important columns, namely number_concepts, number_ingredients number_records, corresponds count distinct concepts patterns, count distinct ingredients involved overall count records patterns respectively. pattern_id column can used relate patterns patternsWithFormula data set.","code":"patternTable(cdm) |>   dplyr::glimpse() #> Rows: 5 #> Columns: 12 #> $ pattern_id                  <dbl> 9, 18, 24, 40, NA #> $ formula_name                <chr> \"fixed amount formulation\", \"concentration… #> $ validity                    <chr> \"pattern with formula\", \"pattern with form… #> $ number_concepts             <dbl> 7, 1, 1, 1, 4 #> $ number_ingredients          <dbl> 4, 1, 1, 1, 4 #> $ number_records              <dbl> 169, 34, 32, 35, 25 #> $ amount_numeric              <dbl> 1, 0, 0, 0, NA #> $ amount_unit_concept_id      <dbl> 8576, NA, NA, NA, NA #> $ numerator_numeric           <dbl> 0, 1, 1, 1, NA #> $ numerator_unit_concept_id   <dbl> NA, 8576, 8510, 8510, NA #> $ denominator_numeric         <dbl> 0, 1, 1, 0, NA #> $ denominator_unit_concept_id <dbl> NA, 8587, 8587, 8587, NA"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/daily_dose_calculation.html","id":"finding-out-the-dose-coverage-using-summarisedosecoverage-function","dir":"Articles","previous_headings":"Introduction","what":"Finding out the dose coverage using summariseDoseCoverage() function","title":"Daily dose calculation","text":"package also provides functionality check coverage daily dose computation chosen concept sets ingredients. Let’s take acetaminophen example. output summarise usage acetaminophen database. example, overall 7878 records acetaminophen daily dose can calculated. default output also include mean, median, lower upper quartiles standard deviation daily dose acetaminophen calculated explained . results also stratified unit, route pattern (saw patternsWithFormula data set). Different routes documented CodelistGenerator package. Route defined concept (drug_concept_id) level, exist equivalence concept route. can stratify codelist using function: CodelistGenerator::stratifyByRouteCategory(). better inspect content output summariseDoseCoverage() can create gt table like : user also freedom customize gt table output. example following suppress cdmName:","code":"summariseDoseCoverage(cdm = cdm, ingredientConceptId = 1125315) |>   dplyr::glimpse() #> Rows: 56 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"ingredient_name\", \"ingredient_name\", \"ingredient_nam… #> $ group_level      <chr> \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"a… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"number records\", \"Missing dose\", \"Missing dose\", \"da… #> $ variable_level   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ estimate_name    <chr> \"count\", \"count_missing\", \"percentage_missing\", \"mean… #> $ estimate_type    <chr> \"integer\", \"integer\", \"percentage\", \"numeric\", \"numer… #> $ estimate_value   <chr> \"78\", \"0\", \"0\", \"14949.800361887\", \"99310.1784420234\"… #> $ additional_name  <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ additional_level <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… coverageResult <- summariseDoseCoverage(cdm = cdm, ingredientConceptId = 1125315) tableDoseCoverage(coverageResult) tableDoseCoverage(coverageResult, groupColumn = \"ingredient_name\", hide = \"cdm_name\")"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_restart.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Assessing drug restart and switching after treatment","text":"Obtaining information drug restart switching another drug discontinuation original treatment often interest drug utilisation studies. vignette, show assess drug switching restart package.","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_restart.html","id":"connect-to-mock-data","dir":"Articles","previous_headings":"Data","what":"Connect to mock data","title":"Assessing drug restart and switching after treatment","text":"vignette use mock data contained DrugUtilisation package.","code":"library(DrugUtilisation)  cdm <- mockDrugUtilisation(numberIndividual = 200)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_restart.html","id":"generate-study-cohorts","dir":"Articles","previous_headings":"Data","what":"Generate study cohorts","title":"Assessing drug restart and switching after treatment","text":"examine patterns drug restart switching among patients taking metformin example. Specifically, investigate whether patients restart metformin discontinuation, switch insulin, try medications, remain untreated. need two cohorts: one patients exposed metformin another patients exposed insulin.","code":"# codelists metformin <- CodelistGenerator::getDrugIngredientCodes(cdm = cdm, name = \"metformin\") insulin <- CodelistGenerator::getDrugIngredientCodes(cdm = cdm, name = \"insulin detemir\")  cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"metformin\", conceptSet = metformin ) cdm$metformin |>   cohortCount() #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1            107              92  cdm <- generateDrugUtilisationCohortSet(   cdm = cdm, name = \"insulin\", conceptSet = insulin ) cdm$insulin |>   cohortCount() #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <int>           <int> #> 1                    1             93              85"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_restart.html","id":"assess-drug-restart","dir":"Articles","previous_headings":"","what":"Assess drug restart","title":"Assessing drug restart and switching after treatment","text":"summariseDrugRestart() function analyses outcomes within treatment cohort following first exposure specific drug. categorises events four distinct groups: Restarting treatment. Switching different treatment. Restarting treatment also switching another. Discontinuing treatment altogether (neither original treatment potential switch). figure illustrates analysis, focusing outcomes initial exposure particular drug (blue), consideration specific switch drug (orange). study examines occurs within 100, 180, 365 days following first treatment discontinuation cohort.  Now, let’s use function assess metformin restart switch insulin first metformin treatment. interested getting results different follow-periods since first metformin exposure ended. instance, next get results first 180 days, first year, end observation. options function allows : restrictToFirstDiscontinuation default argument set TRUE, means consider firsts exposure subject. FALSE, analysis conducted record level, considering exposures cohort, following image illustrates:  censorEndDate argument allows stop considering restart switch events certain date, must specified column cohort. incident argument default TRUE, means consider switch treatments starting discontinuation. set FALSE, allow switch treatments starting discontinuation treatment ending afterwards. followUpDays follow-individuals set Inf default, .e. follow long possible. However, can restrict follow-period time interval seen previous example. strata argument must list pointing columns combinations columns cohort use strata. produce stratified estimates well overall cohort. instance, reproduce last calculation time straifying sex. first use PatientProfiles add column indicating sex, later use strata.","code":"results <- cdm$metformin |>   summariseDrugRestart(     switchCohortTable = \"insulin\",     switchCohortId = NULL,     strata = list(),     followUpDays = Inf,     censorDate = NULL,     restrictToFirstDiscontinuation = TRUE   )  results |>   dplyr::glimpse() #> Rows: 8 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1 #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"6809_metformin\", \"6809_metformin\", \"6809_metformin\",… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"Drug restart till end of observation\", \"Drug restart… #> $ variable_level   <chr> \"restart\", \"restart\", \"switch\", \"switch\", \"restart an… #> $ estimate_name    <chr> \"count\", \"percentage\", \"count\", \"percentage\", \"count\"… #> $ estimate_type    <chr> \"integer\", \"percentage\", \"integer\", \"percentage\", \"in… #> $ estimate_value   <chr> \"13\", \"14.1304347826087\", \"3\", \"3.26086956521739\", \"2… #> $ additional_name  <chr> \"follow_up_days\", \"follow_up_days\", \"follow_up_days\",… #> $ additional_level <chr> \"inf days\", \"inf days\", \"inf days\", \"inf days\", \"inf … results <- cdm$metformin |>   summariseDrugRestart(     switchCohortTable = \"insulin\",     switchCohortId = NULL,     strata = list(),     followUpDays = c(180, 365, Inf),     censorDate = NULL,     restrictToFirstDiscontinuation = TRUE   ) results <- cdm$cohort1 |>   PatientProfiles::addSex(name = \"cohort1\") |>   summariseDrugRestart(     switchCohortTable = \"insulin\",     switchCohortId = NULL,     strata = list(\"sex\"),     followUpDays = c(180, 365, Inf),     censorDate = NULL,     restrictToFirstDiscontinuation = TRUE   )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_restart.html","id":"visualise-drug-restart","dir":"Articles","previous_headings":"","what":"Visualise drug restart","title":"Assessing drug restart and switching after treatment","text":"package table plot functions help visualising results summariseDrugRestart().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_restart.html","id":"table","dir":"Articles","previous_headings":"Visualise drug restart","what":"Table","title":"Assessing drug restart and switching after treatment","text":"function tableDrugRestart() create gt, flextable tibble table summarised_result object created summariseDrugRestart(). function offers multiple customisation options format resulting table according user preferences.","code":"results |>   tableDrugRestart()"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_restart.html","id":"plot","dir":"Articles","previous_headings":"Visualise drug restart","what":"Plot","title":"Assessing drug restart and switching after treatment","text":"plotDrugRestart() function creates bar plot depicting percentage drug restart events cohort, stratum, follow-time (specified variable_name column summarised result). function offers customisation options colours, facetting, handling strata.","code":"results |>   plotDrugRestart(facet = cohort_name + sex ~ follow_up_days)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_restart.html","id":"adding-the-information-to-an-existing-cohort","dir":"Articles","previous_headings":"Visualise drug restart","what":"Adding the information to an existing cohort","title":"Assessing drug restart and switching after treatment","text":"can directly add drug restart information existing cohort column instead asking summarising object. case use function addDrugRestart(), add one column per follow-window ask :","code":"cdm$metformin |>   addDrugRestart(     switchCohortTable = \"insulin\",     switchCohortId = NULL,     followUpDays = c(180, 365, Inf),     censorDate = NULL   ) |>   gt::gt()"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting drug utilisation related information of subjects in a cohort","text":"DrugUtilisation package includes range functions add drug-related information subjects OMOP CDM tables cohort tables. Essentially, two functionalities: add summarise. first return patient-level information drug usage, second returns aggregate estimates . vignette, explore functions provide examples usage.","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"mock-data","dir":"Articles","previous_headings":"Set up","what":"Mock data","title":"Getting drug utilisation related information of subjects in a cohort","text":"vignette use mock data contained DrugUtilisation package. mock dataset contains cohorts, take “cohort1” cohort table interest want study drug usage acetaminophen.","code":"library(DrugUtilisation)  cdm <- mockDrugUtilisation(numberIndividual = 200) cdm$cohort1 |>   dplyr::glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int> 3, 1, 1, 3, 3, 2, 1, 3, 2, 3, 3, 1, 2, 3, 2, 2, 1… #> $ subject_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15… #> $ cohort_start_date    <date> 2004-08-15, 2015-06-19, 2001-07-26, 2008-06-25, … #> $ cohort_end_date      <date> 2005-04-10, 2017-10-21, 2001-12-07, 2012-03-22, …"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"drug-codes","dir":"Articles","previous_headings":"Set up","what":"Drug codes","title":"Getting drug utilisation related information of subjects in a cohort","text":"Since want characterise acetaminophen simvastatin usage subjects cohort1, first get codelist CodelistGenerator:","code":"drugConcepts <- CodelistGenerator::getDrugIngredientCodes(cdm = cdm, name = c(\"acetaminophen\", \"simvastatin\"))"},{"path":[]},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"addnumberexposures","dir":"Articles","previous_headings":"Add drug utilisation information","what":"addNumberExposures()","title":"Getting drug utilisation related information of subjects in a cohort","text":"function addNumberExposures() can get many exposures acetaminophen patient cohort certain time. 2 thing keep mind using function: Time period interest: indexDate censorDate arguments refer time-period interested compute number exposure acetaminophen. refer date columns cohort table, default “cohort_start_date” “cohort_end_date” respectively. Incident prevalent events? want consider exposures drug interest starting time-period (restrictIncident = TRUE), also want take account started underwent least time follow-period considered (restrictIncident = FALSE)? follows add column cohort table, number incident exposures time patients cohort:","code":"cohort <- addNumberExposures(   cohort = cdm$cohort1, # cohort with the population of interest   conceptSet = drugConcepts, # concepts of the drugs of interest   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"number_exposures_{concept_name}\",   name = NULL )  cohort |>   dplyr::glimpse() #> Rows: ?? #> Columns: 6 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id               <int> 3, 2, 1, 2, 3, 1, 3, 2, 1, 2, 3, 1,… #> $ subject_id                         <int> 1, 6, 7, 9, 10, 12, 14, 15, 17, 20,… #> $ cohort_start_date                  <date> 2004-08-15, 2012-07-24, 2013-06-10… #> $ cohort_end_date                    <date> 2005-04-10, 2012-08-10, 2013-08-26… #> $ number_exposures_161_acetaminophen <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ number_exposures_36567_simvastatin <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"addnumbereras","dir":"Articles","previous_headings":"Add drug utilisation information","what":"addNumberEras()","title":"Getting drug utilisation related information of subjects in a cohort","text":"function works like previous one, calculates number eras instead exposures. difference two given gapEra argument: consecutive drug exposures separated less days specified gapEra, collapsed together era. Next compute number eras, considering gap 3 days. Additionally, use argument nameStyle new columns identified concept name, instead using prefix “number_eras_” set default.","code":"cohort <- addNumberEras(   cohort = cdm$cohort1, # cohort with the population of interest   conceptSet = drugConcepts, # concepts of the drugs of interest   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   gapEra = 3,   restrictIncident = TRUE,   nameStyle = \"{concept_name}\",   name = NULL )  cohort |>   dplyr::glimpse() #> Rows: ?? #> Columns: 6 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int> 3, 2, 1, 2, 3, 1, 3, 2, 1, 2, 3, 1, 3, 3, 3, 1, 1… #> $ subject_id           <int> 1, 6, 7, 9, 10, 12, 14, 15, 17, 20, 21, 22, 23, 2… #> $ cohort_start_date    <date> 2004-08-15, 2012-07-24, 2013-06-10, 2017-11-04, … #> $ cohort_end_date      <date> 2005-04-10, 2012-08-10, 2013-08-26, 2018-02-24, … #> $ `161_acetaminophen`  <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ `36567_simvastatin`  <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"daysexposed","dir":"Articles","previous_headings":"Add drug utilisation information","what":"daysExposed","title":"Getting drug utilisation related information of subjects in a cohort","text":"argument set TRUE add column specifying time days person exposed drug interest. Take note gapEra restrictIncident taken account calculation: Drug eras: exposed time based drug eras according gapEra. Incident exposures: restrictIncident = TRUE, exposed time consider drug exposures starting indexDate, restrictIncident = FALSE, exposures started indexDate ended afterwards also taken account. subfunction get information addDaysExposed().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"daysprescribed","dir":"Articles","previous_headings":"Add drug utilisation information","what":"daysPrescribed","title":"Getting drug utilisation related information of subjects in a cohort","text":"Similarly previous one, argument adds column number days individual prescribed drug interest, set TRUE. number calculated adding days prescriptions contribute analysis. case, restrictIncident influence calculation follows: set TRUE, drug prescriptions counted happening index date; FALSE, prescriptions contribute sum. subfunction get information addDaysPrescribed().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"timetoexposure","dir":"Articles","previous_headings":"Add drug utilisation information","what":"timeToExposure","title":"Getting drug utilisation related information of subjects in a cohort","text":"set TRUE, column added shows number days first exposure occurring within considered time window. Notice value restrictIncident taken account: TRUE, time first incident exposure time interval measured; otherwise, exposures start indexDate end afterwards considered (cases, time exposure 0). subfunction get information addTimeToExposure().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"initialexposureduration","dir":"Articles","previous_headings":"Add drug utilisation information","what":"initialExposureDuration","title":"Getting drug utilisation related information of subjects in a cohort","text":"argument add column information number days first prescription drug. restrictIncident = TRUE, first drug exposure record index date selected. Otherwise, first record ever one contributing number. subfunction get information addInitialExposureDuration().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"initialquantity-and-cumulativequantity","dir":"Articles","previous_headings":"Add drug utilisation information","what":"initialQuantity and cumulativeQuantity","title":"Getting drug utilisation related information of subjects in a cohort","text":", TRUE, add column specifying initial quantity prescribed start first exposure considered (initialQuantity), cumulative quantity taken throughout exposures considered time-window (cumulativeQuantity). Quantities measured conceptSet level ingredient. Notice measures restrictIncident considered, gapEra used cumulative quantity. subfunctions get information addInitialQuantity() addCumulativeQuantity() respectively.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"initialdailydose-and-cumulativedose","dir":"Articles","previous_headings":"Add drug utilisation information","what":"initialDailyDose and cumulativeDose","title":"Getting drug utilisation related information of subjects in a cohort","text":"initialDailyDose TRUE, column add specifying ingredients conceptSet initial daily dose given. cumulativeDose measure ingredient total dose taken throughout exposures considered time-window. Recall restrictIncident considered calculations, cumulative dose also considers gapEra. subfunctions get information addInitialDailyDose() addCumulativeDose() respectively.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"adddrugutilisation","dir":"Articles","previous_headings":"Add drug utilisation information","what":"addDrugUtilisation()","title":"Getting drug utilisation related information of subjects in a cohort","text":"explained add functions subfunctions comprehensive addDrugUtilisation(). broader function computes multiple drug utilization metrics. Using addDrugUtilisation() recommended multiple parameters needed, computationally efficient chaining different subfunctions. conceptSet NULL, produced descendants given ingredients. nameStyle argument allows customisation names new columns added function, following glue package style. default returns temporal table, name NULL permanent table defined name computed database.","code":"addDrugUtilisation(   cohort,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   ingredientConceptId = NULL,   conceptSet = NULL,   restrictIncident = TRUE,   gapEra = 1,   numberExposures = TRUE,   numberEras = TRUE,   daysExposed = TRUE,   daysPrescribed = TRUE,   timeToExposure = TRUE,   initialExposureDuration = TRUE,   initialQuantity = TRUE,   cumulativeQuantity = TRUE,   initialDailyDose = TRUE,   cumulativeDose = TRUE,   nameStyle = \"{value}_{concept_name}_{ingredient}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"use-case","dir":"Articles","previous_headings":"Add drug utilisation information","what":"Use case","title":"Getting drug utilisation related information of subjects in a cohort","text":"follows create permanent table “drug_utilisation_example” database information dosage quantity ingredients 1125315 (acetaminophen) 1503297 (metformin). interested exposures happening cohort end date, end patient’s observation data. Additionally, define exposure era using gap 7 days, consider incident exposures time.","code":"cdm$drug_utilisation_example <- cdm$cohort1 |>   # add end of current observation date with the package PatientProfiels   PatientProfiles::addFutureObservation(futureObservationType = \"date\") |>   # add the targeted drug utilisation measures   addDrugUtilisation(     indexDate = \"cohort_end_date\",     censorDate = \"future_observation\",     ingredientConceptId = c(1125315, 1503297),     conceptSet = NULL,     restrictIncident = TRUE,     gapEra = 7,     numberExposures = FALSE,     numberEras = FALSE,     daysExposed = FALSE,     daysPrescribed = FALSE,     timeToExposure = FALSE,     initialExposureDuration = FALSE,     initialQuantity = TRUE,     cumulativeQuantity = TRUE,     initialDailyDose = TRUE,     cumulativeDose = TRUE,     nameStyle = \"{value}_{concept_name}_{ingredient}\",     name = \"drug_utilisation_example\"   )  cdm$drug_utilisation_example |>   dplyr::glimpse() #> Rows: ?? #> Columns: 13 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id                                                <int> 3,… #> $ subject_id                                                          <int> 1,… #> $ cohort_start_date                                                   <date> 2… #> $ cohort_end_date                                                     <date> 2… #> $ future_observation                                                  <date> 2… #> $ cumulative_quantity_ingredient_1503297_descendants                  <dbl> 0,… #> $ cumulative_quantity_ingredient_1125315_descendants                  <dbl> 0,… #> $ initial_quantity_ingredient_1503297_descendants                     <dbl> 0,… #> $ initial_quantity_ingredient_1125315_descendants                     <dbl> 0,… #> $ cumulative_dose_milligram_ingredient_1125315_descendants_1125315    <dbl> 0,… #> $ initial_daily_dose_milligram_ingredient_1125315_descendants_1125315 <dbl> 0,… #> $ cumulative_dose_milligram_ingredient_1503297_descendants_1503297    <dbl> 0,… #> $ initial_daily_dose_milligram_ingredient_1503297_descendants_1503297 <dbl> 0,…"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"summarise-drug-utilisation-information","dir":"Articles","previous_headings":"","what":"Summarise drug utilisation information","title":"Getting drug utilisation related information of subjects in a cohort","text":"information given addDrugUtilisation() sub-functions patient level. interested aggregated estimates measure can use summariseDrugUtilisation().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"summarisedrugutilisation","dir":"Articles","previous_headings":"Summarise drug utilisation information","what":"summariseDrugUtilisation()","title":"Getting drug utilisation related information of subjects in a cohort","text":"function provide desired estimates (set argument estimates) targeted drug utilisation measures. Similar addDrugUtilisation(), setting TRUE FALSE drug utilisation measures, user can choose measures obtain. seen , result function summarised_result object. information class objects see omopgenerics package. Additionally, strata argument provide estimates different stratifications defined columns cohort. instance, can add column indicating sex, another indicating subject older 50, use stratify sex age, together separately follows: estimates obtained last part correspond mean (mean) standard deviation (sd) information dose quantity, number (count_missing) (percentage (percentage_missing)) subjects missing information.","code":"duResults <- summariseDrugUtilisation(   cohort = cdm$cohort1,   strata = list(),   estimates = c(     \"q25\", \"median\", \"q75\", \"mean\", \"sd\", \"count_missing\",     \"percentage_missing\"   ),   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   ingredientConceptId = c(1125315, 1503297),   conceptSet = NULL,   restrictIncident = TRUE,   gapEra = 7,   numberExposures = TRUE,   numberEras = TRUE,   daysExposed = TRUE,   daysPrescribed = TRUE,   timeToExposure = TRUE,   initialExposureDuration = TRUE,   initialQuantity = TRUE,   cumulativeQuantity = TRUE,   initialDailyDose = TRUE,   cumulativeDose = TRUE )  duResults |>   dplyr::glimpse() #> Rows: 426 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"cohort_1\", \"cohort_1\", \"cohort_1\", \"cohort_1\", \"coho… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"number records\", \"number subjects\", \"number exposure… #> $ variable_level   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ estimate_name    <chr> \"count\", \"count\", \"q25\", \"median\", \"q75\", \"mean\", \"sd… #> $ estimate_type    <chr> \"integer\", \"integer\", \"integer\", \"integer\", \"integer\"… #> $ estimate_value   <chr> \"66\", \"66\", \"0\", \"0\", \"0\", \"0.196969696969697\", \"0.50… #> $ additional_name  <chr> \"overall\", \"overall\", \"concept_set\", \"concept_set\", \"… #> $ additional_level <chr> \"overall\", \"overall\", \"ingredient_1503297_descendants… duResults <- cdm$cohort1 |>   # add age and sex   PatientProfiles::addDemographics(     age = TRUE,     ageGroup = list(\"<=50\" = c(0, 50), \">50\" = c(51, 150)),     sex = TRUE,     priorObservation = FALSE,     futureObservation = FALSE   ) |>   # drug utilisation   summariseDrugUtilisation(     strata = list(\"age_group\", \"sex\", c(\"age_group\", \"sex\")),     estimates = c(\"mean\", \"sd\", \"count_missing\", \"percentage_missing\"),     indexDate = \"cohort_start_date\",     censorDate = \"cohort_end_date\",     ingredientConceptId = c(1125315, 1503297),     conceptSet = NULL,     restrictIncident = TRUE,     gapEra = 7,     numberExposures = TRUE,     numberEras = TRUE,     daysExposed = TRUE,     daysPrescribed = TRUE,     timeToExposure = TRUE,     initialExposureDuration = TRUE,     initialQuantity = TRUE,     cumulativeQuantity = TRUE,     initialDailyDose = TRUE,     cumulativeDose = TRUE   )  duResults |>   dplyr::glimpse() #> Rows: 1,968 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"cohort_1\", \"cohort_1\", \"cohort_1\", \"cohort_1\", \"coho… #> $ strata_name      <chr> \"age_group\", \"age_group\", \"age_group\", \"age_group\", \"… #> $ strata_level     <chr> \"<=50\", \"<=50\", \"<=50\", \"<=50\", \"<=50\", \"<=50\", \"<=50… #> $ variable_name    <chr> \"number records\", \"number subjects\", \"number exposure… #> $ variable_level   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ estimate_name    <chr> \"count\", \"count\", \"mean\", \"sd\", \"count_missing\", \"per… #> $ estimate_type    <chr> \"integer\", \"integer\", \"numeric\", \"numeric\", \"integer\"… #> $ estimate_value   <chr> \"63\", \"63\", \"0.158730158730159\", \"0.514510390701973\",… #> $ additional_name  <chr> \"overall\", \"overall\", \"concept_set\", \"concept_set\", \"… #> $ additional_level <chr> \"overall\", \"overall\", \"ingredient_1125315_descendants…"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/drug_utilisation.html","id":"tabledrugutilisation","dir":"Articles","previous_headings":"Summarise drug utilisation information","what":"tableDrugUtilisation()","title":"Getting drug utilisation related information of subjects in a cohort","text":"Results summariseDrugUtilisation() can nicely visualised tabular format using function tableDrugUtilisation().","code":"tableDrugUtilisation(duResults) #> ℹ <median> (<q25> - <q75>) has not been formatted."},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/indication.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Identify and summarise indications among a drug cohort","text":"vignette, demonstrate functionality provided DrugUtilisation package help understand indications patients drug cohort. DrugUtilisation package designed work data OMOP CDM format, first step create reference data using DBI CDMConnector packages.","code":"library(DrugUtilisation)  con <- DBI::dbConnect(duckdb::duckdb(), CDMConnector::eunomiaDir())  cdm <- CDMConnector::cdmFromCon(   con = con,   cdmSchema = \"main\",   writeSchema = \"main\" )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/indication.html","id":"create-a-drug-utilisation-cohort","dir":"Articles","previous_headings":"Introduction","what":"Create a drug utilisation cohort","title":"Identify and summarise indications among a drug cohort","text":"use acetaminophen example drug. ’ll start creating cohort acetaminophen users. ’ll include acetaminophen records using gap era 7 days, ’ve seen previous vignette also applied various inclusion criteria. Note addIndication works cohort input, example use drug cohorts created generateDrugUtilisationCohortSet input cohorts can generated using many ways.","code":"cdm <- generateIngredientCohortSet(   cdm = cdm,   name = \"acetaminophen_users\",   ingredient = \"acetaminophen\",   gapEra = 7 )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/indication.html","id":"create-a-indication-cohort","dir":"Articles","previous_headings":"Introduction","what":"Create a indication cohort","title":"Identify and summarise indications among a drug cohort","text":"Next create set indication cohorts. case create cohorts sinusitis bronchitis using CDMConnector::generateConceptCohortSet().","code":"indications <- list(   sinusitis = c(257012, 4294548, 40481087),   bronchitis = c(260139, 258780) )  cdm <- CDMConnector::generateConceptCohortSet(   cdm = cdm, name = \"indications_cohort\", indications, end = 0 ) cdm"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/indication.html","id":"add-indications-with-addindication-function","dir":"Articles","previous_headings":"","what":"Add indications with addIndication() function","title":"Identify and summarise indications among a drug cohort","text":"Now two cohort tables, one drug cohort another indications cohort, can assess patient indications. specify time window around drug cohort start date identify intersection indication cohort. can add information new variable cohort table. function add new column per window provided label indication. can see individuals classified sinusistis (without bronchitis), bronchitis (without sinusitis), sinusitis bronchitis, observed indication. well indication cohort table, can also use clinical tables OMOP CDM identify , unknown, indications. consider anyone indication cohort record condition occurrence table “unknown” indication. can see many people previously considered indication now considered unknown indication condition occurrence record 30 days drug initiation. can add indications multiple time windows. Unsurprisingly find potential indications wider windows (although likely increase risk false positives).","code":"cdm[[\"acetaminophen_users\"]] <- cdm[[\"acetaminophen_users\"]] |>   addIndication(     indicationCohortName = \"indications_cohort\",     indicationWindow = list(c(-30, 0)),     indexDate = \"cohort_start_date\"   ) cdm[[\"acetaminophen_users\"]] |>   dplyr::glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0//tmp/RtmpRcTIt8/file242072d028d0.duckdb] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <int> 2925, 3315, 3721, 5096, 3090, 3222, 3889, 4238, 4… #> $ cohort_start_date    <date> 1983-02-10, 1962-10-30, 1965-10-06, 1971-03-25, … #> $ cohort_end_date      <date> 1983-02-17, 1962-11-13, 1965-10-13, 1971-04-08, … #> $ indication_m30_to_0  <chr> \"bronchitis\", \"bronchitis\", \"bronchitis\", \"bronch… cdm[[\"acetaminophen_users\"]] |>   dplyr::group_by(indication_m30_to_0) |>   dplyr::tally() #> # Source:   SQL [?? x 2] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0//tmp/RtmpRcTIt8/file242072d028d0.duckdb] #>   indication_m30_to_0          n #>   <chr>                    <dbl> #> 1 sinusitis                   18 #> 2 none                     11351 #> 3 bronchitis                2527 #> 4 bronchitis and sinusitis     3 cdm[[\"acetaminophen_users\"]] |>   dplyr::select(!\"indication_m30_to_0\") |>   addIndication(     indicationCohortName = \"indications_cohort\",     indicationWindow = list(c(-30, 0)),     unknownIndicationTable = \"condition_occurrence\"   ) |>   dplyr::group_by(indication_m30_to_0) |>   dplyr::tally() #> # Source:   SQL [?? x 2] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0//tmp/RtmpRcTIt8/file242072d028d0.duckdb] #>   indication_m30_to_0          n #>   <chr>                    <dbl> #> 1 bronchitis                2527 #> 2 unknown                  11344 #> 3 bronchitis and sinusitis     3 #> 4 sinusitis                   18 #> 5 none                         7 cdm[[\"acetaminophen_users\"]] <- cdm[[\"acetaminophen_users\"]] |>   dplyr::select(!\"indication_m30_to_0\") |>   addIndication(     indicationCohortName = \"indications_cohort\",     indicationWindow = list(c(0, 0), c(-30, 0), c(-365, 0)),     unknownIndicationTable = \"condition_occurrence\"   ) cdm[[\"acetaminophen_users\"]] |>   dplyr::group_by(indication_0_to_0) |>   dplyr::tally() #> # Source:   SQL [?? x 2] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0//tmp/RtmpRcTIt8/file242072d028d0.duckdb] #>   indication_0_to_0     n #>   <chr>             <dbl> #> 1 sinusitis             1 #> 2 unknown           11211 #> 3 none                163 #> 4 bronchitis         2524 cdm[[\"acetaminophen_users\"]] |>   dplyr::group_by(indication_m30_to_0) |>   dplyr::tally() #> # Source:   SQL [?? x 2] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0//tmp/RtmpRcTIt8/file242072d028d0.duckdb] #>   indication_m30_to_0          n #>   <chr>                    <dbl> #> 1 bronchitis                2527 #> 2 unknown                  11344 #> 3 bronchitis and sinusitis     3 #> 4 sinusitis                   18 #> 5 none                         7 cdm[[\"acetaminophen_users\"]] |>   dplyr::group_by(indication_m365_to_0) |>   dplyr::tally() #> # Source:   SQL [?? x 2] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0//tmp/RtmpRcTIt8/file242072d028d0.duckdb] #>   indication_m365_to_0         n #>   <chr>                    <dbl> #> 1 bronchitis                2615 #> 2 sinusitis                  211 #> 3 none                         4 #> 4 bronchitis and sinusitis   101 #> 5 unknown                  10968"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/indication.html","id":"summarise-indications-with-summariseindication","dir":"Articles","previous_headings":"Add indications with addIndication() function","what":"Summarise indications with summariseIndication()","title":"Identify and summarise indications among a drug cohort","text":"Instead adding variables indications like , instead obtain general summary observed indications. summariseIndication similar arguments addIndication(), returns summary result indication. can easily create plot table results  well getting overall results, can also stratify results variables interest. example, stratify results age groups sex.","code":"indicationSummary <- cdm[[\"acetaminophen_users\"]] |>   dplyr::select(!dplyr::starts_with(\"indication\")) |>   summariseIndication(     indicationCohortName = \"indications_cohort\",     indicationWindow = list(c(0, 0), c(-30, 0), c(-365, 0)),     unknownIndicationTable = c(\"condition_occurrence\")   ) tableIndication(indicationSummary) plotIndication(indicationSummary) indicationSummaryStratified <- cdm[[\"acetaminophen_users\"]] |>   dplyr::select(!dplyr::starts_with(\"indication\")) |>   PatientProfiles::addDemographics(ageGroup = list(c(0, 19), c(20, 150))) |>   summariseIndication(     strata = list(\"age_group\", \"sex\"),     indicationCohortName = \"indications_cohort\",     indicationWindow = list(c(0, 0), c(-30, 0), c(-365, 0)),     unknownIndicationTable = c(\"condition_occurrence\")   ) tableIndication(indicationSummaryStratified) indicationSummaryStratified |>   dplyr::filter(variable_name == \"Indication on index date\") |>   plotIndication(     facet = . ~ age_group + sex,     colour = \"variable_level\"   )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/mock_data.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Create mock data to test DrugUtilisation package","text":"vignette see use mockDrugUtilisation() function create mock data. function predominantly used package’s unit testing. example, one use default parameters create mock cdm reference like : populate several omop tables (example, person, concept visit_occurrence) two cohorts cdm reference.","code":"cdm <- mockDrugUtilisation() cdm$person |>   dplyr::glimpse() #> Rows: ?? #> Columns: 18 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ person_id                   <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 #> $ gender_concept_id           <int> 8507, 8507, 8532, 8507, 8507, 8532, 8507, … #> $ year_of_birth               <int> 2018, 1954, 1973, 1951, 2011, 2004, 1992, … #> $ day_of_birth                <int> 27, 3, 11, 17, 28, 10, 11, 5, 1, 12 #> $ birth_datetime              <date> 2018-10-27, 1954-02-03, 1973-03-11, 1951-0… #> $ race_concept_id             <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ ethnicity_concept_id        <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ location_id                 <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ provider_id                 <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ care_site_id                <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ month_of_birth              <int> 10, 2, 3, 9, 8, 6, 6, 8, 8, 2 #> $ person_source_value         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ gender_source_value         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ gender_source_concept_id    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ race_source_value           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ race_source_concept_id      <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ ethnicity_source_value      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA #> $ ethnicity_source_concept_id <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA  cdm$person |>   dplyr::tally() #> # Source:   SQL [?? x 1] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>       n #>   <dbl> #> 1    10 cdm$concept |>   dplyr::glimpse() #> Rows: ?? #> Columns: 10 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ concept_id       <int> 8505, 8507, 8532, 8576, 8587, 8718, 9202, 9551, 9655,… #> $ concept_name     <chr> \"hour\", \"MALE\", \"FEMALE\", \"milligram\", \"milliliter\", … #> $ domain_id        <chr> \"Unit\", \"Gender\", \"Gender\", \"Unit\", \"Unit\", \"Unit\", \"… #> $ vocabulary_id    <chr> \"UCUM\", \"Gender\", \"Gender\", \"UCUM\", \"UCUM\", \"UCUM\", \"… #> $ concept_class_id <chr> \"Unit\", \"Gender\", \"Gender\", \"Unit\", \"Unit\", \"Unit\", \"… #> $ standard_concept <chr> \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", NA, \"S\",… #> $ concept_code     <chr> \"h\", \"M\", \"F\", \"mg\", \"mL\", \"[iU]\", \"OP\", \"10*-3.eq\", … #> $ valid_start_date <date> 1-01-19, 1-01-19, 1-01-19, 1-01-19, 1-01-19, 1-01-19… #> $ valid_end_date   <date> 31-12-20, 31-12-20, 31-12-20, 31-12-20, 31-12-20, 31… #> $ invalid_reason   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…  cdm$concept |>   dplyr::tally() #> # Source:   SQL [?? x 1] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>       n #>   <dbl> #> 1    38 cdm$visit_occurrence |>   dplyr::glimpse() #> Rows: ?? #> Columns: 17 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ visit_occurrence_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1… #> $ person_id                     <int> 1, 2, 3, 3, 3, 3, 4, 4, 4, 6, 6, 6, 6, 7… #> $ visit_concept_id              <int> 9202, 9202, 9202, 9202, 9202, 9202, 9202… #> $ visit_start_date              <date> 2021-10-27, 1988-08-10, 1994-01-24, 199… #> $ visit_end_date                <date> 2021-12-16, 1991-08-30, 2001-10-12, 200… #> $ visit_type_concept_id         <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0… #> $ visit_start_datetime          <date> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ visit_end_datetime            <date> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ provider_id                   <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ care_site_id                  <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ visit_source_value            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ visit_source_concept_id       <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ admitting_source_concept_id   <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ admitting_source_value        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ discharge_to_concept_id       <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ discharge_to_source_value     <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ preceding_visit_occurrence_id <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …  cdm$visit_occurrence |>   dplyr::tally() #> # Source:   SQL [?? x 1] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>       n #>   <dbl> #> 1    48 cdm$cohort1 |>   dplyr::glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int> 2, 1, 1, 3, 1, 1, 1, 2, 3, 2 #> $ subject_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 #> $ cohort_start_date    <date> 2021-10-30, 2019-08-31, 1996-01-16, 2000-06-05, 2… #> $ cohort_end_date      <date> 2021-12-02, 2020-11-30, 1999-03-23, 2017-04-08, 2…  cdm$cohort1 |>   dplyr::tally() #> # Source:   SQL [?? x 1] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>       n #>   <dbl> #> 1    10 cdm$cohort2 |>   dplyr::glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int> 3, 2, 2, 1, 2, 2, 1, 2, 2, 2 #> $ subject_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 #> $ cohort_start_date    <date> 2021-11-15, 1988-12-24, 1990-10-29, 2004-09-25, 2… #> $ cohort_end_date      <date> 2021-11-24, 1993-03-08, 1993-09-13, 2013-08-10, 2…  cdm$cohort2 |>   dplyr::tally() #> # Source:   SQL [?? x 1] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>       n #>   <dbl> #> 1    10"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/mock_data.html","id":"setting-seeds","dir":"Articles","previous_headings":"Introduction","what":"Setting seeds","title":"Create mock data to test DrugUtilisation package","text":"user can also set seed control randomness within data. now observe cohort1 changed result seed: users can create mock data two ways, one set numberIndividual parameter cusutomise tables.","code":"cdm <- mockDrugUtilisation(   seed = 789 ) cdm$cohort1 |>   dplyr::glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int> 2, 1, 2, 1, 1, 3, 1, 3, 2, 1 #> $ subject_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 #> $ cohort_start_date    <date> 2018-06-14, 2019-04-10, 2020-01-28, 2010-07-09, 2… #> $ cohort_end_date      <date> 2018-08-10, 2019-11-19, 2020-02-02, 2015-04-24, 2…"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/mock_data.html","id":"create-mock-data-using-numberindividual-parameter","dir":"Articles","previous_headings":"Introduction","what":"Create mock data using numberIndividual parameter","title":"Create mock data to test DrugUtilisation package","text":"example use follows: ensure person, observation_period, cohort1 cohort2 100 rows. consequence , number rows tables visit_occurrence, condition_occurrence drug_strength rows compared mock data produced using default settings.","code":"cdm <- mockDrugUtilisation(numberIndividual = 100) cdm$person |>   dplyr::glimpse() #> Rows: ?? #> Columns: 18 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ person_id                   <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,… #> $ gender_concept_id           <int> 8507, 8507, 8507, 8507, 8507, 8507, 8532, … #> $ year_of_birth               <int> 1982, 1963, 1996, 1986, 1998, 1995, 1954, … #> $ day_of_birth                <int> 1, 24, 17, 4, 25, 9, 20, 4, 8, 22, 23, 5, … #> $ birth_datetime              <date> 1982-03-01, 1963-02-24, 1996-06-17, 1986-… #> $ race_concept_id             <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ ethnicity_concept_id        <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ location_id                 <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ provider_id                 <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ care_site_id                <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ month_of_birth              <int> 3, 2, 6, 12, 9, 5, 9, 11, 9, 7, 11, 7, 8, … #> $ person_source_value         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ gender_source_value         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ gender_source_concept_id    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ race_source_value           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ race_source_concept_id      <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ ethnicity_source_value      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… #> $ ethnicity_source_concept_id <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA… cdm$person |>   dplyr::tally() #> # Source:   SQL [?? x 1] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>       n #>   <dbl> #> 1   100 cdm$visit_occurrence |>   dplyr::glimpse() #> Rows: ?? #> Columns: 17 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ visit_occurrence_id           <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1… #> $ person_id                     <int> 1, 1, 1, 2, 2, 2, 3, 4, 4, 4, 5, 5, 5, 5… #> $ visit_concept_id              <int> 9202, 9202, 9202, 9202, 9202, 9202, 9202… #> $ visit_start_date              <date> 2008-12-12, 2008-10-22, 2010-07-09, 201… #> $ visit_end_date                <date> 2008-12-30, 2011-01-16, 2010-07-23, 201… #> $ visit_type_concept_id         <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0… #> $ visit_start_datetime          <date> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ visit_end_datetime            <date> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,… #> $ provider_id                   <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ care_site_id                  <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ visit_source_value            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ visit_source_concept_id       <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ admitting_source_concept_id   <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ admitting_source_value        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ discharge_to_concept_id       <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ discharge_to_source_value     <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … #> $ preceding_visit_occurrence_id <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, … cdm$visit_occurrence |>   dplyr::tally() #> # Source:   SQL [?? x 1] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>       n #>   <dbl> #> 1   498"},{"path":[]},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/mock_data.html","id":"customise-omop-tables","dir":"Articles","previous_headings":"Introduction > Creat mock data by customising tables","what":"Customise omop tables","title":"Create mock data to test DrugUtilisation package","text":"saw previously, omop tables automatically populated mockDrugUtilisation(). However, user can customise tables. example, customise drug_exposure table, one following: However, one needs vigilant customised omop table implicitly dependent omop tables. example, drug_exposure_start_date someone drug_exposure table lie within person’s observation_period_start_date observation_period_end_date. One also modify omop tables including person, concept, concept_ancestor, drug_strength, observation_period, condition_occurrence, observation, concept_relationship similar fashion.","code":"cdm <- mockDrugUtilisation(   drug_exposure = dplyr::tibble(     drug_exposure_id = 1:3,     person_id = c(1, 1, 1),     drug_concept_id = c(2, 3, 4),     drug_exposure_start_date = as.Date(c(       \"2000-01-01\", \"2000-01-10\", \"2000-02-20\"     )),     drug_exposure_end_date = as.Date(c(       \"2000-02-10\", \"2000-03-01\", \"2000-02-20\"     )),     quantity = c(41, 52, 1),     drug_type_concept_id = 0   ) ) cdm$drug_exposure |>   dplyr::glimpse() #> Rows: ?? #> Columns: 23 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ drug_exposure_id             <int> 1, 2, 3 #> $ person_id                    <int> 1, 1, 1 #> $ drug_concept_id              <int> 2, 3, 4 #> $ drug_exposure_start_date     <date> 2000-01-01, 2000-01-10, 2000-02-20 #> $ drug_exposure_end_date       <date> 2000-02-10, 2000-03-01, 2000-02-20 #> $ quantity                     <dbl> 41, 52, 1 #> $ drug_type_concept_id         <int> 0, 0, 0 #> $ drug_exposure_start_datetime <date> NA, NA, NA #> $ drug_exposure_end_datetime   <date> NA, NA, NA #> $ verbatim_end_date            <date> NA, NA, NA #> $ stop_reason                  <chr> NA, NA, NA #> $ refills                      <int> NA, NA, NA #> $ days_supply                  <int> NA, NA, NA #> $ sig                          <chr> NA, NA, NA #> $ route_concept_id             <int> NA, NA, NA #> $ lot_number                   <chr> NA, NA, NA #> $ provider_id                  <int> NA, NA, NA #> $ visit_occurrence_id          <int> NA, NA, NA #> $ visit_detail_id              <int> NA, NA, NA #> $ drug_source_value            <chr> NA, NA, NA #> $ drug_source_concept_id       <int> NA, NA, NA #> $ route_source_value           <chr> NA, NA, NA #> $ dose_unit_source_value       <chr> NA, NA, NA"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/mock_data.html","id":"customise-cohorts","dir":"Articles","previous_headings":"Introduction > Creat mock data by customising tables","what":"Customise cohorts","title":"Create mock data to test DrugUtilisation package","text":"Similarly, cohort tables can also customised.","code":"cdm <- mockDrugUtilisation(   observation_period = dplyr::tibble(     observation_period_id = 1,     person_id = 1:2,     observation_period_start_date = as.Date(\"1900-01-01\"),     observation_period_end_date = as.Date(\"2100-01-01\"),     period_type_concept_id = 0   ),   cohort1 = dplyr::tibble(     cohort_definition_id = 1,     subject_id = c(1, 1, 2),     cohort_start_date = as.Date(c(\"2000-01-01\", \"2001-01-01\", \"2000-01-01\")),     cohort_end_date = as.Date(c(\"2000-03-01\", \"2001-03-01\", \"2000-03-01\"))   ) ) cdm$cohort1 |>   dplyr::glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <dbl> 1, 1, 1 #> $ subject_id           <dbl> 1, 1, 2 #> $ cohort_start_date    <date> 2000-01-01, 2001-01-01, 2000-01-01 #> $ cohort_end_date      <date> 2000-03-01, 2001-03-01, 2000-03-01"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Summarise treatments","text":"creating study cohort, example specific condition interest, may interested describing treatments received individuals within . show summary can obtained.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"create-mock-table","dir":"Articles","previous_headings":"Introduction","what":"Create mock table","title":"Summarise treatments","text":"use mock data contained package throughout vignette. Let’s modify cohort tables cohort1 cohort2 mock dataset, first table includes 3 cohorts health conditions (study cohorts), second contains three treatments receive. Notice cohort1 cohort table three cohorts representing three different conditions: cohort2 cohort table three different treatment cohorts:","code":"library(DrugUtilisation)  cdm <- mockDrugUtilisation(numberIndividual = 200)  new_cohort_set <- settings(cdm$cohort1) |>   dplyr::arrange(cohort_definition_id) |>   dplyr::mutate(cohort_name = c(\"asthma\", \"bronchitis\", \"pneumonia\"))  cdm$cohort1 <- cdm$cohort1 |>   omopgenerics::newCohortTable(cohortSetRef = new_cohort_set)  new_cohort_set <- settings(cdm$cohort2) |>   dplyr::arrange(cohort_definition_id) |>   dplyr::mutate(cohort_name = c(\"albuterol\", \"fluticasone\", \"montelukast\"))  cdm$cohort2 <- cdm$cohort2 |>   omopgenerics::newCohortTable(cohortSetRef = new_cohort_set) settings(cdm$cohort1) #> # A tibble: 3 × 2 #>   cohort_definition_id cohort_name #>                  <int> <chr>       #> 1                    1 asthma      #> 2                    2 bronchitis  #> 3                    3 pneumonia settings(cdm$cohort2) #> # A tibble: 3 × 2 #>   cohort_definition_id cohort_name #>                  <int> <chr>       #> 1                    1 albuterol   #> 2                    2 fluticasone #> 3                    3 montelukast"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"summarise-treatment","dir":"Articles","previous_headings":"","what":"Summarise treatment","title":"Summarise treatments","text":"summariseTreatment() function produces summary treatment received study cohorts. three mandatory arguments: cohort: cohort cdm object. treatmentCohortName: name treatment cohort table. window: list specifying time windows treatments summarised. See example usage , use summariseTreatment() summarise treatments defined cohort2 target cohorts defined cohort1.","code":"summariseTreatment(   cohort = cdm$cohort1,   treatmentCohortName = c(\"cohort2\"),   window = list(c(0, 0), c(1, 30)) )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"strata-parameter","dir":"Articles","previous_headings":"Summarise treatment","what":"strata parameter","title":"Summarise treatments","text":"can also stratify cohort calculate estimates within strata group using strata parameter. Notice also used treatmentCohortId parameter specify want explore albuterol (corresponds cohort id 1 cohort table) across cohorts defined cohort1.","code":"cdm[[\"cohort1\"]] <- cdm[[\"cohort1\"]] |>   PatientProfiles::addSex() |>   PatientProfiles::addAge(ageGroup = list(\"<40\" = c(0, 39), \">=40\" = c(40, 150)))  results <- summariseTreatment(   cohort = cdm$cohort1,   treatmentCohortName = c(\"cohort2\"),   window = list(c(0, 0)),   treatmentCohortId = 1,   strata = list(\"sex\", \"age_group\") )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"other-parameters","dir":"Articles","previous_headings":"Summarise treatment","what":"other parameters","title":"Summarise treatments","text":"summariseTreatment() functions also input parameters can tuned: cohortId: restrict analysis particular cohort definition id target cohort. indexDate: column use index date start analysis. default use cohort_start_date, date column, cohort_end_date, can specified instead. censorDate: whether end analysis specific date. Otherwise follow individuals end respective observation period. mutuallyExclusive: default set FALSE, consider treatments separately, individual can belong different treatment groups time (.e. treated multiple drugs). Therefore, target cohort, sum percentages treatment drugs greater 100%. set TRUE, non-overlapping treatment groups assessed (multiple drugs needed), individuals belong one , percentages add 100. case, individual given one treatment drugs, percentages . However, can easily see analyses provide different results contexts.","code":"result_not_mutually_exc <- summariseTreatment(   cohort = cdm$cohort1,   treatmentCohortName = c(\"cohort2\"),   window = list(c(0, 0)) ) #> ℹ Intersect with medications table (cohort2) #> ℹ Summarising medications.  result_mutually_exc <- summariseTreatment(   cohort = cdm$cohort1,   treatmentCohortName = c(\"cohort2\"),   window = list(c(0, 0)),   mutuallyExclusive = TRUE ) #> ℹ Intersect with medications table (cohort2) #> ℹ Summarising medications.  tableTreatment(result = result_not_mutually_exc) tableTreatment(result = result_mutually_exc)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"visualise-results","dir":"Articles","previous_headings":"","what":"Visualise results","title":"Summarise treatments","text":"package includes table plot functions help visualise results summariseTreatment(), like just used show results .","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"tables","dir":"Articles","previous_headings":"Visualise results","what":"Tables","title":"Summarise treatments","text":"tableTreatment() function generates table gt, flextable, tibble format summarised_result produced summariseTreatment(). function customisation options format table according user preferences.","code":"tableTreatment(result = results)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/summarise_treatments.html","id":"plots","dir":"Articles","previous_headings":"Visualise results","what":"Plots","title":"Summarise treatments","text":"plotTreatment() function creates bar plot showing percentage treated untreated cohort, stratum, time-window. function offers customization options colors, faceting, handling strata.","code":"plotTreatment(   result = results,   facet =  sex + age_group ~ window_name + cohort_name,   colour = \"variable_level\" )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/treatment_discontinuation.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Summarising treatment adherence","text":"vignette go two common approaches assessing treatment adherence can performed creating drug cohorts. first approach assess time--discontinuation using survival methods, second estimate proportion patients covered.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/treatment_discontinuation.html","id":"adherence-to-amoxicillin","dir":"Articles","previous_headings":"","what":"Adherence to amoxicillin","title":"Summarising treatment adherence","text":"example, let’s say like study adherence among new users amoxicillin first 90-days use. can first create amoxicillin study cohort. ’ll use synthetic Eunomia dataset show done.","code":"library(DrugUtilisation)  db <- DBI::dbConnect(duckdb::duckdb(), dbdir = CDMConnector::eunomiaDir()) cdm <- CDMConnector::cdmFromCon(   con = db,   cdmSchema = \"main\",   writeSchema = \"main\",   cdmName = \"Eunomia\" )  cdm <- generateIngredientCohortSet(   cdm = cdm,   name = \"amoxicillin\",   ingredient = \"amoxicillin\",   gapEra = 7 )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/treatment_discontinuation.html","id":"time-to-discontinuation","dir":"Articles","previous_headings":"Adherence to amoxicillin","what":"Time-to-discontinuation","title":"Summarising treatment adherence","text":"can estimate Kaplan-Meier survival curves can use estimateSingleEventSurvival CohortSurvival package, follow-beginning individual’s cohort start date discontinuation occurring cohort end date. outcome washout set Inf ’ll considering first cohort entry individual. important note survival analysis focused single cohort entry, cohort end date taken indicate treatment discontinuation, gap era used creating drug cohort can often important impact results. can plot study result like : can similarly create table summarising result can also easily stratify results. add patient demographics cohort table using PatientProfiles packages stratify results age group sex. present results plot table.","code":"discontinuationSummary <- CohortSurvival::estimateSingleEventSurvival(   cdm = cdm,   targetCohortTable = \"amoxicillin\",   outcomeCohortTable = \"amoxicillin\",   outcomeDateVariable = \"cohort_end_date\",   outcomeWashout = Inf,   followUpDays = 90,   eventGap = 30 ) #CohortSurvival::plotSurvival(discontinuationSummary) #CohortSurvival::tableSurvival(discontinuationSummary) cdm$amoxicillin <- cdm$amoxicillin |>   PatientProfiles::addDemographics(     ageGroup = list(c(0, 40), c(41, Inf)), name = \"amoxicillin\"   )  discontinuationSummary <- CohortSurvival::estimateSingleEventSurvival(   cdm = cdm,   strata = list(c(\"age_group\"), c(\"sex\")),   targetCohortTable = \"amoxicillin\",   outcomeCohortTable = \"amoxicillin\",   outcomeDateVariable = \"cohort_end_date\",   followUpDays = 90,   eventGap = 30 ) #CohortSurvival::plotSurvival(discontinuationSummary, facet = \"strata_level\") #CohortSurvival::tableSurvival(discontinuationSummary)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/articles/treatment_discontinuation.html","id":"proportion-of-patients-covered","dir":"Articles","previous_headings":"Adherence to amoxicillin","what":"Proportion of patients covered","title":"Summarising treatment adherence","text":"Estimating proportion amoxicillin patients covered offers alternative approach describing treatment adherence. day following initiation (taken first cohort entry individual) estimate proportion patients ongoing cohort entry among still observation time. Unlike time--discontinuation approach shown , estimating proportion patients covered allows individuals re-initiate drug break. Consequently method typically far less sensitive choice gap era used creating drug cohort. Like survival estimates, can quickly create plot results  Similarly, can also stratify results similar way.","code":"ppcSummary <- cdm$amoxicillin |>   summariseProportionOfPatientsCovered(followUpDays = 90) plotProportionOfPatientsCovered(ppcSummary) ppcSummary <- cdm$amoxicillin |>   summariseProportionOfPatientsCovered(     strata = list(c(\"age_group\"), c(\"sex\")),     followUpDays = 90   ) plotProportionOfPatientsCovered(ppcSummary, facet = c(\"sex\", \"age_group\"))"},{"path":"https://darwin-eu.github.io/DrugUtilisation/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Martí Català. Author, maintainer. Mike Du. Contributor. Yuchen Guo. Author. Kim Lopez-Guell. Author. Edward Burn. Author. Xintong Li. Contributor. Marta Alcalde-Herraiz. Contributor. Nuria Mercade-Besora. Author. Xihang Chen. Author.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Burkard, Theresa, López-Güell, Kim, Gorbachev, Artem, Bellas, Lucía, Jödicke, M. , Burn, Edward, de Ridder, Maria, Mosseveld, Mees, Gratton, Jasmine, Seager, Sarah, Vojinovic, Dina, Mayer, Angel M, Ramírez-Anguita, Manuel J, Machín, Leis , Oja, Marek, Kolde, Raivo, Bonadt, Klaus, Prieto-Alhambra, Daniel, Reich, Chistian, Català, Martí (2024). “Calculating daily dose Observational Medical Outcomes Partnership Common Data Model.” Pharmacoepidemiology Drug Safety, 33(6), e5809. doi:10.1002/pds.5809.","code":"@Article{,   title = {Calculating daily dose in the Observational Medical Outcomes Partnership Common Data Model},   author = {{Burkard} and {Theresa} and {López-Güell} and {Kim} and {Gorbachev} and {Artem} and {Bellas} and {Lucía} and {Jödicke} and Annika M. and {Burn} and {Edward} and {de Ridder} and {Maria} and {Mosseveld} and {Mees} and {Gratton} and {Jasmine} and {Seager} and {Sarah} and {Vojinovic} and {Dina} and {Mayer} and Miguel Angel and {Ramírez-Anguita} and Juan Manuel and {Machín} and Angela Leis and {Oja} and {Marek} and {Kolde} and {Raivo} and {Bonadt} and {Klaus} and {Prieto-Alhambra} and {Daniel} and {Reich} and {Chistian} and {Català} and {Martí}},   journal = {Pharmacoepidemiology and Drug Safety},   year = {2024},   volume = {33},   number = {6},   pages = {e5809},   doi = {10.1002/pds.5809}, }"},{"path":[]},{"path":"https://darwin-eu.github.io/DrugUtilisation/index.html","id":"package-overview","dir":"","previous_headings":"","what":"Package overview","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"DrugUtilisation contains functions instantiate characterise drug cohorts data mapped OMOP Common Data Model. package supports: Creation drug cohorts Identification indications drug cohort Summarising drug utilisation among cohort terms duration, quantity, dose Description treatment adherence based proportion patients covered Detailing treatment restart switching initial treatment discontinuation","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/index.html","id":"example-usage","dir":"","previous_headings":"","what":"Example usage","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"First, need create cdm reference data ´ll using. generate example simulated data, see set database please consult CDMConnector package connection examples.","code":"library(DrugUtilisation) library(CDMConnector) library(omopgenerics) library(dplyr)  cdm <- mockDrugUtilisation(numberIndividual = 100)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/index.html","id":"create-a-cohort-of-acetaminophen-users","dir":"","previous_headings":"Example usage","what":"Create a cohort of acetaminophen users","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"generate cohort acetaminophen users use generateIngredientCohortSet, concatenating records fewer 7 days . filter cohort records include first record per person require least 30 days observation database prior drug start date.","code":"cdm <- generateIngredientCohortSet(   cdm = cdm,   name = \"dus_cohort\",   ingredient = \"acetaminophen\",   gapEra = 7 ) cdm$dus_cohort |>   requireIsFirstDrugEntry() |>   requireObservationBeforeDrug(days = 30) #> # Source:   table<dus_cohort> [?? x 4] #> # Database: DuckDB v1.2.0 [root@Darwin 24.4.0:R 4.4.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         19 2015-03-30        2015-08-24      #>  2                    1         24 2004-05-12        2005-10-17      #>  3                    1         27 2008-05-25        2010-11-30      #>  4                    1          3 2011-10-10        2014-04-19      #>  5                    1         47 2009-05-20        2013-10-09      #>  6                    1         51 2022-07-23        2022-07-24      #>  7                    1         73 2008-11-23        2012-08-16      #>  8                    1         31 2003-11-05        2005-03-24      #>  9                    1         17 2019-10-26        2020-12-19      #> 10                    1         28 1966-11-26        1967-03-31      #> # ℹ more rows"},{"path":"https://darwin-eu.github.io/DrugUtilisation/index.html","id":"indications-of-acetaminophen-users","dir":"","previous_headings":"Example usage","what":"Indications of acetaminophen users","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"Now ´ve created cohort first summarise indications cohort. indications always cohorts, first need create . create two indication cohorts, one headache influenza. can summarise indication results using summariseIndication function:","code":"indications <- list(headache = 378253, influenza = 4266367) cdm <- generateConceptCohortSet(cdm,   conceptSet = indications,   name = \"indications_cohort\" ) indication_summary <- cdm$dus_cohort |>   summariseIndication(     indicationCohortName = \"indications_cohort\",     unknownIndicationTable = \"condition_occurrence\",     indicationWindow = list(c(-30, 0))   ) #> ℹ Intersect with indications table (indications_cohort) #> ℹ Summarising indications. indication_summary |> glimpse() #> Rows: 12 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"a… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"Indication from 30 days before to the index date\", \"… #> $ variable_level   <chr> \"headache\", \"headache\", \"influenza\", \"influenza\", \"he… #> $ estimate_name    <chr> \"count\", \"percentage\", \"count\", \"percentage\", \"count\"… #> $ estimate_type    <chr> \"integer\", \"percentage\", \"integer\", \"percentage\", \"in… #> $ estimate_value   <chr> \"9\", \"16.0714285714286\", \"7\", \"12.5\", \"6\", \"10.714285… #> $ additional_name  <chr> \"window_name\", \"window_name\", \"window_name\", \"window_… #> $ additional_level <chr> \"-30 to 0\", \"-30 to 0\", \"-30 to 0\", \"-30 to 0\", \"-30 …"},{"path":"https://darwin-eu.github.io/DrugUtilisation/index.html","id":"drug-use","dir":"","previous_headings":"Example usage","what":"Drug use","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"can quickly obtain summary drug utilisation among cohort, various measures calculated provided ingredient concept (case concept acetaminophen).","code":"drug_utilisation_summary <- cdm$dus_cohort |>   summariseDrugUtilisation(     ingredientConceptId = 1125315,     gapEra = 7   ) drug_utilisation_summary |> glimpse() #> Rows: 72 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"a… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"number records\", \"number subjects\", \"number exposure… #> $ variable_level   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N… #> $ estimate_name    <chr> \"count\", \"count\", \"q25\", \"median\", \"q75\", \"mean\", \"sd… #> $ estimate_type    <chr> \"integer\", \"integer\", \"integer\", \"integer\", \"integer\"… #> $ estimate_value   <chr> \"56\", \"56\", \"1\", \"1\", \"1\", \"1.21428571428571\", \"0.494… #> $ additional_name  <chr> \"overall\", \"overall\", \"concept_set\", \"concept_set\", \"… #> $ additional_level <chr> \"overall\", \"overall\", \"ingredient_1125315_descendants… table(drug_utilisation_summary$variable_name) #>  #>    cumulative dose milligram          cumulative quantity  #>                            7                            7  #>                 days exposed              days prescribed  #>                            7                            7  #> initial daily dose milligram    initial exposure duration  #>                            7                            7  #>             initial quantity                  number eras  #>                            7                            7  #>             number exposures               number records  #>                            7                            1  #>              number subjects             time to exposure  #>                            1                            7"},{"path":"https://darwin-eu.github.io/DrugUtilisation/index.html","id":"combine-and-share-results","dir":"","previous_headings":"Example usage","what":"Combine and share results","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"Now can combine results suppress counts less 5 ready shared.","code":"results <- bind(   indication_summary,   drug_utilisation_summary ) |>   suppress(minCellCount = 5) results |> glimpse() #> Rows: 84 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2,… #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"a… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"Indication from 30 days before to the index date\", \"… #> $ variable_level   <chr> \"headache\", \"headache\", \"influenza\", \"influenza\", \"he… #> $ estimate_name    <chr> \"count\", \"percentage\", \"count\", \"percentage\", \"count\"… #> $ estimate_type    <chr> \"integer\", \"percentage\", \"integer\", \"percentage\", \"in… #> $ estimate_value   <chr> \"9\", \"16.0714285714286\", \"7\", \"12.5\", \"6\", \"10.714285… #> $ additional_name  <chr> \"window_name\", \"window_name\", \"window_name\", \"window_… #> $ additional_level <chr> \"-30 to 0\", \"-30 to 0\", \"-30 to 0\", \"-30 to 0\", \"-30 …"},{"path":"https://darwin-eu.github.io/DrugUtilisation/index.html","id":"further-analyses","dir":"","previous_headings":"","what":"Further analyses","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model","text":"many drug-related analyses done acetaminophen cohort using DrugUtilisation package. Please see package website details.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/DrugUtilisation-package.html","id":null,"dir":"Reference","previous_headings":"","what":"DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model — DrugUtilisation-package","title":"DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model — DrugUtilisation-package","text":"Summarise patient-level drug utilisation cohorts using data mapped Observational Medical Outcomes Partnership (OMOP) common data model. New users prevalent users cohorts can generated characteristics, indication drug use summarised.","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/DrugUtilisation-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model — DrugUtilisation-package","text":"Maintainer: Martí Català marti.catalasabate@ndorms.ox.ac.uk (ORCID) Authors: Yuchen Guo yuchen.guo@ndorms.ox.ac.uk (ORCID) Kim Lopez-Guell kim.lopez@spc.ox.ac.uk (ORCID) Edward Burn edward.burn@ndorms.ox.ac.uk (ORCID) Nuria Mercade-Besora nuria.mercadebesora@ndorms.ox.ac.uk (ORCID) Xihang Chen xihang.chen@ndorms.ox.ac.uk (ORCID) contributors: Mike Du mike.du@ndorms.ox.ac.uk (ORCID) [contributor] Xintong Li xintong.li@ndorms.ox.ac.uk (ORCID) [contributor] Marta Alcalde-Herraiz marta.alcaldeherraiz@ndorms.ox.ac.uk (ORCID) [contributor]","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"add new column cumulative dose. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"","code":"addCumulativeDose(   cohort,   ingredientConceptId,   conceptSet = NULL,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"cumulative_dose_{concept_name}_{ingredient}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"cohort cohort_table object. ingredientConceptId Ingredient OMOP concept interested study. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"cohort added column.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeDose.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the cumulative dose. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeDose","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addCumulativeDose(ingredientConceptId = 1125315) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id                                   <int> 1, 1, 1, 1, 1, 1 #> $ subject_id                                             <int> 1, 2, 6, 5, 10,… #> $ cohort_start_date                                      <date> 2021-11-30, 198… #> $ cohort_end_date                                        <date> 2021-12-04, 20… #> $ cumulative_dose_ingredient_1125315_descendants_1125315 <dbl> 20000, 15000, … # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"add new column cumulative quantity. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"","code":"addCumulativeQuantity(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"cumulative_quantity_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"cohort cohort_table object. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"cohort added column.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addCumulativeQuantity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the cumulative quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addCumulativeQuantity","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addCumulativeQuantity(conceptSet = codelist) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id                  <int> 1, 1, 1, 1, 1, 1, 1 #> $ subject_id                            <int> 4, 5, 6, 3, 8, 1, 9 #> $ cohort_start_date                     <date> 1991-01-21, 2022-08-20, 1994-12-… #> $ cohort_end_date                       <date> 1996-10-01, 2022-09-30, 1995-12-… #> $ cumulative_quantity_161_acetaminophen <dbl> 1, 65, 10, 21, 130, 45, 25 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysExposed.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the days exposed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysExposed","title":"To add a new column with the days exposed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysExposed","text":"add new column days exposed. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysExposed.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the days exposed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysExposed","text":"","code":"addDaysExposed(   cohort,   conceptSet,   gapEra,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"days_exposed_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysExposed.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the days exposed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysExposed","text":"cohort cohort_table object. conceptSet List concepts included. gapEra Number days two continuous exposures considered era. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysExposed.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the days exposed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysExposed","text":"cohort added column.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysExposed.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the days exposed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysExposed","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addDaysExposed(conceptSet = codelist, gapEra = 1) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id           <int> 1, 1, 1, 1 #> $ subject_id                     <int> 9, 1, 8, 10 #> $ cohort_start_date              <date> 1979-12-26, 1988-01-04, 1996-02-04, 199… #> $ cohort_end_date                <date> 1987-04-05, 1999-02-04, 1996-02-04, 200… #> $ days_exposed_161_acetaminophen <int> 2658, 4050, 1, 2986 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysPrescribed.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the days prescribed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysPrescribed","title":"To add a new column with the days prescribed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysPrescribed","text":"add new column days prescribed. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysPrescribed.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the days prescribed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysPrescribed","text":"","code":"addDaysPrescribed(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"days_prescribed_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysPrescribed.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the days prescribed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysPrescribed","text":"cohort cohort_table object. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysPrescribed.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the days prescribed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysPrescribed","text":"cohort added columns.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDaysPrescribed.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the days prescribed. To add multiple columns use addDrugUtilisation() for efficiency. — addDaysPrescribed","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addDaysPrescribed(conceptSet = codelist) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id              <int> 1, 1, 1, 1, 1, 1 #> $ subject_id                        <int> 2, 4, 9, 9, 6, 6 #> $ cohort_start_date                 <date> 2017-09-01, 1983-01-04, 2020-08-24, … #> $ cohort_end_date                   <date> 2017-09-23, 2000-04-17, 2020-12-13, … #> $ days_prescribed_161_acetaminophen <int> 23, 6314, 112, 20, 58, 1885 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugRestart.html","id":null,"dir":"Reference","previous_headings":"","what":"Add drug restart information as a column per follow-up period of interest. — addDrugRestart","title":"Add drug restart information as a column per follow-up period of interest. — addDrugRestart","text":"Add drug restart information column per follow-period interest.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugRestart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add drug restart information as a column per follow-up period of interest. — addDrugRestart","text":"","code":"addDrugRestart(   cohort,   switchCohortTable,   switchCohortId = NULL,   followUpDays = Inf,   censorDate = NULL,   incident = TRUE,   nameStyle = \"drug_restart_{follow_up_days}\" )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugRestart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add drug restart information as a column per follow-up period of interest. — addDrugRestart","text":"cohort cohort_table object. switchCohortTable cohort table cdm contains possible alternative treatments. switchCohortId cohort ids used switchCohortTable. NULL cohort definition ids used. followUpDays vector number days follow . can multiple values. censorDate Name column indicates date stop analysis, NULL end individuals observation used. incident Whether switch treatment incident (start discontinuation) (can start discontinuation last till ). nameStyle Character string specify nameStyle new columns.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugRestart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add drug restart information as a column per follow-up period of interest. — addDrugRestart","text":"cohort table given additional columns information restart, switch exposed per follow-period interest.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugRestart.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add drug restart information as a column per follow-up period of interest. — addDrugRestart","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  conceptlist <- list(acetaminophen = 1125360, metformin = c(1503297, 1503327)) cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"switch_cohort\",                                         conceptSet = conceptlist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$cohort1 |>   addDrugRestart(switchCohortTable = \"switch_cohort\") #> # Source:   table<og_046_1748531389> [?? x 5] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    2          5 1987-10-20        1989-01-26      #>  2                    2          4 2003-07-29        2004-12-03      #>  3                    3          3 2020-10-09        2020-12-20      #>  4                    2          6 1980-08-05        1987-08-19      #>  5                    2          7 2022-07-10        2022-10-26      #>  6                    2          1 2010-08-21        2012-11-28      #>  7                    2         10 2013-08-19        2016-01-08      #>  8                    3          2 2009-06-28        2009-08-04      #>  9                    3          9 2017-08-08        2018-11-26      #> 10                    2          8 2006-07-26        2007-10-16      #> # ℹ 1 more variable: drug_restart_inf <chr> # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"Add new columns with drug use related information — addDrugUtilisation","title":"Add new columns with drug use related information — addDrugUtilisation","text":"Add new columns drug use related information","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add new columns with drug use related information — addDrugUtilisation","text":"","code":"addDrugUtilisation(   cohort,   gapEra,   conceptSet = NULL,   ingredientConceptId = NULL,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   numberExposures = TRUE,   numberEras = TRUE,   daysExposed = TRUE,   daysPrescribed = TRUE,   timeToExposure = TRUE,   initialExposureDuration = TRUE,   initialQuantity = TRUE,   cumulativeQuantity = TRUE,   initialDailyDose = TRUE,   cumulativeDose = TRUE,   nameStyle = \"{value}_{concept_name}_{ingredient}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add new columns with drug use related information — addDrugUtilisation","text":"cohort cohort_table object. gapEra Number days two continuous exposures considered era. conceptSet List concepts included. ingredientConceptId Ingredient OMOP concept interested study. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. numberExposures Whether include 'number_exposures' (number drug exposure records indexDate censorDate). numberEras Whether include 'number_eras' (number continuous exposure episodes indexDate censorDate). daysExposed Whether include 'days_exposed' (number days individual continuous exposure episode, including allowed treatment gaps, indexDate censorDate; sum length different drug eras). daysPrescribed Whether include 'days_prescribed' (sum number days prescription contribute analysis). timeToExposure Whether include 'time_to_exposure' (number days indexDate first episode). initialExposureDuration Whether include 'initial_exposure_duration' (number prescribed days first drug exposure record). initialQuantity Whether include 'initial_quantity' (quantity first drug exposure record). cumulativeQuantity Whether include 'cumulative_quantity' (sum quantity different exposures considered analysis). initialDailyDose Whether include 'initial_daily_dose_{unit}' (daily dose first considered prescription). cumulativeDose Whether include 'cumulative_dose_{unit}' (sum cumulative dose analysed drug exposure records). nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add new columns with drug use related information — addDrugUtilisation","text":"cohort added columns.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add new columns with drug use related information — addDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\")  cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days. cdm$dus_cohort |>   addDrugUtilisation(ingredientConceptId = 1125315, gapEra = 30) |>   glimpse() #> Rows: ?? #> Columns: 14 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id                                                <int> 1,… #> $ subject_id                                                          <int> 1,… #> $ cohort_start_date                                                   <date> 2… #> $ cohort_end_date                                                     <date> 2… #> $ number_exposures_ingredient_1125315_descendants                     <int> 1,… #> $ time_to_exposure_ingredient_1125315_descendants                     <int> 0,… #> $ cumulative_quantity_ingredient_1125315_descendants                  <dbl> 40… #> $ initial_quantity_ingredient_1125315_descendants                     <dbl> 40… #> $ initial_exposure_duration_ingredient_1125315_descendants            <int> 12… #> $ number_eras_ingredient_1125315_descendants                          <int> 1,… #> $ days_exposed_ingredient_1125315_descendants                         <int> 12… #> $ days_prescribed_ingredient_1125315_descendants                      <int> 12… #> $ cumulative_dose_milligram_ingredient_1125315_descendants_1125315    <dbl> 20… #> $ initial_daily_dose_milligram_ingredient_1125315_descendants_1125315 <dbl> 15… # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addIndication.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a variable indicating individuals indications — addIndication","title":"Add a variable indicating individuals indications — addIndication","text":"Add variable drug cohort indicating presence indication cohort specified time window. individual one indication cohorts, considered unknown indication present one specified OMOP CDM clinical tables. neither indication cohort clinical table considered observed indication.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addIndication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a variable indicating individuals indications — addIndication","text":"","code":"addIndication(   cohort,   indicationCohortName,   indicationCohortId = NULL,   indicationWindow = list(c(0, 0)),   unknownIndicationTable = NULL,   indexDate = \"cohort_start_date\",   censorDate = NULL,   mutuallyExclusive = TRUE,   nameStyle = NULL,   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addIndication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a variable indicating individuals indications — addIndication","text":"cohort cohort_table object. indicationCohortName Name indication cohort table indicationCohortId target cohort Id add indication indicationWindow time window interests unknownIndicationTable Tables search unknown indications indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. mutuallyExclusive Whether consider mutually exclusive categories (one column per window) (one column per window indication). nameStyle Name style indications. default: 'indication_{window_name}' (mutuallyExclusive = TRUE), 'indication_{window_name}_{cohort_name}' (mutuallyExclusive = FALSE). name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addIndication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add a variable indicating individuals indications — addIndication","text":"original table variable added summarises individual´s indications.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addIndication.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a variable indicating individuals indications — addIndication","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CDMConnector) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation()  indications <- list(headache = 378253, asthma = 317009) cdm <- generateConceptCohortSet(cdm = cdm,                                 conceptSet = indications,                                 name = \"indication_cohorts\")  cdm <- generateIngredientCohortSet(cdm = cdm,                                    name = \"drug_cohort\",                                    ingredient = \"acetaminophen\") #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$drug_cohort |>   addIndication(     indicationCohortName = \"indication_cohorts\",     indicationWindow = list(c(0, 0)),     unknownIndicationTable = \"condition_occurrence\"   ) |>   glimpse() #> ℹ Intersect with indications table (indication_cohorts). #> ℹ Getting unknown indications from condition_occurrence. #> ℹ Collapse indications to mutually exclusive categories #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1 #> $ subject_id           <int> 9, 3, 4, 2, 7, 6 #> $ cohort_start_date    <date> 2010-10-08, 1987-08-06, 2010-08-05, 2006-05-13, 2… #> $ cohort_end_date      <date> 2010-12-29, 2001-06-07, 2010-10-28, 2008-06-29, 2… #> $ indication_0_to_0    <chr> \"none\", \"none\", \"none\", \"asthma\", \"none\", \"heada… # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"add new column initial daily dose. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"","code":"addInitialDailyDose(   cohort,   ingredientConceptId,   conceptSet = NULL,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"initial_daily_dose_{concept_name}_{ingredient}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"cohort cohort_table object. ingredientConceptId Ingredient OMOP concept interested study. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"cohort added column.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialDailyDose.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the initial daily dose. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialDailyDose","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addInitialDailyDose(ingredientConceptId = 1125315) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id                                      <int> 1, 1, 1, 1, … #> $ subject_id                                                <int> 3, 3, 4, 4, … #> $ cohort_start_date                                         <date> 1989-12-17,… #> $ cohort_end_date                                           <date> 1991-08-06,… #> $ initial_daily_dose_ingredient_1125315_descendants_1125315 <dbl> 401.337793, … # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialExposureDuration.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the duration of the first exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialExposureDuration","title":"To add a new column with the duration of the first exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialExposureDuration","text":"add new column duration first exposure. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialExposureDuration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the duration of the first exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialExposureDuration","text":"","code":"addInitialExposureDuration(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"initial_exposure_duration_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialExposureDuration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the duration of the first exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialExposureDuration","text":"cohort cohort_table object. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialExposureDuration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the duration of the first exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialExposureDuration","text":"cohort added column.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialExposureDuration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the duration of the first exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialExposureDuration","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addInitialExposureDuration(conceptSet = codelist) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id                        <int> 1, 1, 1, 1, 1, 1, 1 #> $ subject_id                                  <int> 1, 8, 10, 10, 3, 4, 5 #> $ cohort_start_date                           <date> 2020-02-29, 2015-07-10, 20… #> $ cohort_end_date                             <date> 2020-02-29, 2015-11-25, 20… #> $ initial_exposure_duration_161_acetaminophen <int> 1, 139, 175, 7, 909, 105,… # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"add new column initial quantity. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"","code":"addInitialQuantity(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"initial_quantity_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"cohort cohort_table object. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"cohort added column.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addInitialQuantity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the initial quantity. To add multiple columns use addDrugUtilisation() for efficiency. — addInitialQuantity","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addInitialQuantity(conceptSet = codelist) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id               <int> 1, 1, 1, 1, 1, 1, 1, 1, 1 #> $ subject_id                         <int> 8, 2, 5, 5, 5, 3, 3, 10, 4 #> $ cohort_start_date                  <date> 2012-07-22, 2011-10-05, 2015-07-06,… #> $ cohort_end_date                    <date> 2020-03-15, 2011-10-16, 2015-09-07,… #> $ initial_quantity_161_acetaminophen <dbl> 70, 1, 20, 50, 5, 70, 40, 25, 45 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberEras.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"add new column number eras. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberEras.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"","code":"addNumberEras(   cohort,   conceptSet,   gapEra,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"number_eras_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberEras.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"cohort cohort_table object. conceptSet List concepts included. gapEra Number days two continuous exposures considered era. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberEras.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"cohort added column.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberEras.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the number of eras. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberEras","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addNumberEras(conceptSet = codelist, gapEra = 1) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id          <int> 1, 1, 1, 1, 1, 1, 1 #> $ subject_id                    <int> 9, 9, 1, 8, 10, 5, 4 #> $ cohort_start_date             <date> 2018-08-28, 2018-12-11, 2022-10-21, 2011… #> $ cohort_end_date               <date> 2018-10-01, 2018-12-16, 2022-11-06, 2013… #> $ number_eras_161_acetaminophen <int> 1, 1, 1, 1, 1, 1, 1 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberExposures.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"add new column number exposures. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberExposures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"","code":"addNumberExposures(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"number_exposures_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberExposures.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"cohort cohort_table object. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberExposures.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"cohort added columns.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addNumberExposures.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the number of exposures. To add multiple columns use addDrugUtilisation() for efficiency. — addNumberExposures","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addNumberExposures(conceptSet = codelist) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id               <int> 1, 1, 1, 1, 1, 1, 1, 1, 1 #> $ subject_id                         <int> 6, 2, 8, 3, 10, 10, 1, 1, 7 #> $ cohort_start_date                  <date> 2018-07-25, 2022-09-04, 2006-01-19,… #> $ cohort_end_date                    <date> 2019-09-02, 2022-09-26, 2006-12-07,… #> $ number_exposures_161_acetaminophen <int> 1, 4, 2, 1, 1, 1, 1, 1, 1 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":null,"dir":"Reference","previous_headings":"","what":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"add new column time exposure. add multiple columns use addDrugUtilisation() efficiency.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"","code":"addTimeToExposure(   cohort,   conceptSet,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   nameStyle = \"time_to_exposure_{concept_name}\",   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"cohort cohort_table object. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. nameStyle Character string specify nameStyle new columns. name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"cohort added column.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTimeToExposure.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"To add a new column with the time to exposure. To add multiple columns use addDrugUtilisation() for efficiency. — addTimeToExposure","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   addTimeToExposure(conceptSet = codelist) |>   glimpse() #> Rows: ?? #> Columns: 5 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id               <int> 1, 1, 1, 1, 1 #> $ subject_id                         <int> 3, 10, 2, 7, 1 #> $ cohort_start_date                  <date> 2022-05-17, 1997-01-14, 2013-08-01,… #> $ cohort_end_date                    <date> 2022-06-03, 2004-04-23, 2019-05-27,… #> $ time_to_exposure_161_acetaminophen <int> 0, 0, 0, 0, 0 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTreatment.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a variable indicating individuals medications — addTreatment","title":"Add a variable indicating individuals medications — addTreatment","text":"Add variable drug cohort indicating presence medication cohort specified time window.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTreatment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a variable indicating individuals medications — addTreatment","text":"","code":"addTreatment(   cohort,   treatmentCohortName,   treatmentCohortId = NULL,   window = list(c(0, 0)),   indexDate = \"cohort_start_date\",   censorDate = NULL,   mutuallyExclusive = TRUE,   nameStyle = NULL,   name = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTreatment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a variable indicating individuals medications — addTreatment","text":"cohort cohort_table object. treatmentCohortName Name treatment cohort table treatmentCohortId target cohort Id add treatment window time window interests. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. mutuallyExclusive Whether consider mutually exclusive categories (one column per window) (one column per window treatment). nameStyle Name style treatment columns. default: 'treatment_{window_name}' (mutuallyExclusive = TRUE), 'treatment_{window_name}_{cohort_name}' (mutuallyExclusive = FALSE). name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTreatment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add a variable indicating individuals medications — addTreatment","text":"original table variable added summarises individual´s indications.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/addTreatment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a variable indicating individuals medications — addTreatment","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation(numberIndividuals = 50)  cdm <- generateIngredientCohortSet(cdm = cdm,                                    name = \"drug_cohort\",                                    ingredient = \"acetaminophen\") #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm <- generateIngredientCohortSet(cdm = cdm,                                    name = \"treatments\",                                    ingredient = c(\"metformin\", \"simvastatin\")) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$drug_cohort |>   addTreatment(\"treatments\", window = list(c(0, 0), c(1, 30), c(31, 60))) |>   glimpse() #> ℹ Intersect with medications table (treatments). #> ℹ Collapse medications to mutually exclusive categories #> Rows: ?? #> Columns: 7 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <int> 23, 30, 44, 43, 44, 5, 31, 8, 38, 29, 16, 21, 2, … #> $ cohort_start_date    <date> 1998-11-17, 2018-08-31, 2012-04-23, 2000-04-07, … #> $ cohort_end_date      <date> 1999-10-01, 2019-08-10, 2012-05-21, 2001-07-14, … #> $ medication_0_to_0    <chr> \"simvastatin\", \"simvastatin\", \"simvastatin\", \"unt… #> $ medication_1_to_30   <chr> \"simvastatin\", \"simvastatin\", \"simvastatin\", \"unt… #> $ medication_31_to_60  <chr> \"simvastatin\", \"simvastatin\", \"simvastatin\", \"unt… # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"Run benchmark drug utilisation cohort generation","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"","code":"benchmarkDrugUtilisation(   cdm,   ingredient = \"acetaminophen\",   alternativeIngredient = c(\"ibuprofen\", \"aspirin\", \"diclofenac\"),   indicationCohort = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"cdm cdm_reference object. ingredient Name ingredient benchmark. alternativeIngredient Name ingredients use alternative treatments. indicationCohort Name cohort cdm_reference object use indicatiomn.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"summarise_result object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/benchmarkDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run benchmark of drug utilisation cohort generation — benchmarkDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CDMConnector) library(duckdb) #> Loading required package: DBI  requireEunomia() #> ℹ `EUNOMIA_DATA_FOLDER` set to: /tmp/RtmpFXODKG. #>  #> Download completed! con <- dbConnect(drv = duckdb(dbdir = eunomiaDir())) #> Creating CDM database /tmp/RtmpFXODKG/GiBleed_5.3.zip cdm <- cdmFromCon(con = con, cdmSchema = \"main\", writeSchema = \"main\")  timings <- benchmarkDrugUtilisation(cdm) #> 29-05-2025 15:11:13 Benchmark get necessary concepts #> 29-05-2025 15:11:14 Benchmark generateDrugUtilisation #> 29-05-2025 15:11:17 Benchmark generateDrugUtilisation with numberExposures and #> daysPrescribed #> 29-05-2025 15:11:20 Benchmark require #> 29-05-2025 15:11:22 Benchmark generateIngredientCohortSet #> 29-05-2025 15:11:27 Benchmark summariseDrugUtilisation #> 29-05-2025 15:11:33 Benchmark summariseDrugRestart #> 29-05-2025 15:11:35 Benchmark summariseProportionOfPatientsCovered #> 29-05-2025 15:11:40 Benchmark summariseTreatment #> 29-05-2025 15:11:44 Benchmark drop created tables  timings #> # A tibble: 10 × 13 #>    result_id cdm_name group_name group_level            strata_name strata_level #>        <int> <chr>    <chr>      <chr>                  <chr>       <chr>        #>  1         1 Synthea  task       get necessary concepts overall     overall      #>  2         1 Synthea  task       generateDrugUtilisati… overall     overall      #>  3         1 Synthea  task       generateDrugUtilisati… overall     overall      #>  4         1 Synthea  task       require                overall     overall      #>  5         1 Synthea  task       generateIngredientCoh… overall     overall      #>  6         1 Synthea  task       summariseDrugUtilisat… overall     overall      #>  7         1 Synthea  task       summariseDrugRestart   overall     overall      #>  8         1 Synthea  task       summariseProportionOf… overall     overall      #>  9         1 Synthea  task       summariseTreatment     overall     overall      #> 10         1 Synthea  task       drop created tables    overall     overall      #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cdmDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of cdm. — cdmDoc","title":"Helper for consistent documentation of cdm. — cdmDoc","text":"Helper consistent documentation cdm.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cdmDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of cdm. — cdmDoc","text":"cdm cdm_reference object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/censorDateDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of censorDate. — censorDateDoc","title":"Helper for consistent documentation of censorDate. — censorDateDoc","text":"Helper consistent documentation censorDate.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/censorDateDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of censorDate. — censorDateDoc","text":"censorDate Name column indicates date stop analysis, NULL end individuals observation used.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cohortDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of cohort. — cohortDoc","title":"Helper for consistent documentation of cohort. — cohortDoc","text":"Helper consistent documentation cohort.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cohortDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of cohort. — cohortDoc","text":"cohort cohort_table object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cohortGapEra.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the gapEra used to create a cohort — cohortGapEra","title":"Get the gapEra used to create a cohort — cohortGapEra","text":"Get gapEra used create cohort","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cohortGapEra.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the gapEra used to create a cohort — cohortGapEra","text":"","code":"cohortGapEra(cohort, cohortId = NULL)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cohortGapEra.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the gapEra used to create a cohort — cohortGapEra","text":"cohort cohort_table object. cohortId Integer vector refering cohortIds cohort. NULL cohort definition ids settings used.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cohortGapEra.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the gapEra used to create a cohort — cohortGapEra","text":"gapEra values specific cohortIds","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cohortGapEra.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the gapEra used to create a cohort — cohortGapEra","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator)  cdm <- mockDrugUtilisation()  druglist <- getDrugIngredientCodes(cdm = cdm,                                    name = c(\"acetaminophen\", \"metformin\"))  cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"drug_cohorts\",                                         conceptSet = druglist,                                         gapEra = 100) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 100 days.  cohortGapEra(cdm$drug_cohorts) #> [1] 100 100 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cohortIdDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of cohortId. — cohortIdDoc","title":"Helper for consistent documentation of cohortId. — cohortIdDoc","text":"Helper consistent documentation cohortId.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/cohortIdDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of cohortId. — cohortIdDoc","text":"cohortId cohort definition id restrict . NULL, cohorts included.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/compNameDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of name for computed tables. — compNameDoc","title":"Helper for consistent documentation of name for computed tables. — compNameDoc","text":"Helper consistent documentation name computed tables.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/compNameDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of name for computed tables. — compNameDoc","text":"name Name new computed cohort table, NULL temporary table created.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/conceptSetDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of conceptSet. — conceptSetDoc","title":"Helper for consistent documentation of conceptSet. — conceptSetDoc","text":"Helper consistent documentation conceptSet.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/conceptSetDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of conceptSet. — conceptSetDoc","text":"conceptSet List concepts included.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/daysPrescribedDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of daysPrescribed. — daysPrescribedDoc","title":"Helper for consistent documentation of daysPrescribed. — daysPrescribedDoc","text":"Helper consistent documentation daysPrescribed.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/daysPrescribedDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of daysPrescribed. — daysPrescribedDoc","text":"daysPrescribed Whether include 'days_prescribed' (number days prescribed used create era).","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/drugUtilisationDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of add/summariseDrugUtilisation functions. — drugUtilisationDoc","title":"Helper for consistent documentation of add/summariseDrugUtilisation functions. — drugUtilisationDoc","text":"Helper consistent documentation add/summariseDrugUtilisation functions.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/drugUtilisationDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of add/summariseDrugUtilisation functions. — drugUtilisationDoc","text":"numberExposures Whether include 'number_exposures' (number drug exposure records indexDate censorDate). numberEras Whether include 'number_eras' (number continuous exposure episodes indexDate censorDate). daysExposed Whether include 'days_exposed' (number days individual continuous exposure episode, including allowed treatment gaps, indexDate censorDate; sum length different drug eras). daysPrescribed Whether include 'days_prescribed' (sum number days prescription contribute analysis). timeToExposure Whether include 'time_to_exposure' (number days indexDate first episode). initialExposureDuration Whether include 'initial_exposure_duration' (number prescribed days first drug exposure record). initialQuantity Whether include 'initial_quantity' (quantity first drug exposure record). cumulativeQuantity Whether include 'cumulative_quantity' (sum quantity different exposures considered analysis). initialDailyDose Whether include 'initial_daily_dose_{unit}' (daily dose first considered prescription). cumulativeDose Whether include 'cumulative_dose_{unit}' (sum cumulative dose analysed drug exposure records). exposedTime deprecated.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/erafyCohort.html","id":null,"dir":"Reference","previous_headings":"","what":"Erafy a cohort_table collapsing records separated gapEra days or less. — erafyCohort","title":"Erafy a cohort_table collapsing records separated gapEra days or less. — erafyCohort","text":"Erafy cohort_table collapsing records separated gapEra days less.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/erafyCohort.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Erafy a cohort_table collapsing records separated gapEra days or less. — erafyCohort","text":"","code":"erafyCohort(   cohort,   gapEra,   cohortId = NULL,   nameStyle = \"{cohort_name}_{gap_era}\",   name = omopgenerics::tableName(cohort) )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/erafyCohort.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Erafy a cohort_table collapsing records separated gapEra days or less. — erafyCohort","text":"cohort cohort_table object. gapEra Number days two continuous exposures considered era. cohortId cohort definition id restrict . NULL, cohorts included. nameStyle String create new names cohorts. Must contain '{cohort_name}' one cohort present '{gap_era}' one gapEra provided. name Name new cohort table, must length 1 character vector.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/erafyCohort.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Erafy a cohort_table collapsing records separated gapEra days or less. — erafyCohort","text":"cohort_table object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/erafyCohort.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Erafy a cohort_table collapsing records separated gapEra days or less. — erafyCohort","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  cdm$cohort2 <- cdm$cohort1 |>   erafyCohort(gapEra = 30, name = \"cohort2\")  cdm$cohort2 #> # Source:   table<cohort2> [?? x 4] #> # Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    3          1 2019-07-07        2019-09-17      #>  2                    3          2 2020-09-13        2021-04-09      #>  3                    1          9 2015-12-04        2017-01-28      #>  4                    1          6 2022-11-25        2022-12-04      #>  5                    3          8 2009-09-10        2013-10-12      #>  6                    1         10 2008-10-02        2009-04-14      #>  7                    1          7 2013-11-12        2016-08-11      #>  8                    2          4 2012-10-11        2013-08-23      #>  9                    3          5 2004-06-07        2009-02-26      #> 10                    1          3 2013-03-20        2014-05-05       settings(cdm$cohort2) #> # A tibble: 3 × 3 #>   cohort_definition_id cohort_name gap_era #>                  <int> <chr>       <chr>   #> 1                    1 cohort_1_30 30      #> 2                    2 cohort_2_30 30      #> 3                    3 cohort_3_30 30       mockDisconnect(cdm) # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/gapEraDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of gapEra. — gapEraDoc","title":"Helper for consistent documentation of gapEra. — gapEraDoc","text":"Helper consistent documentation gapEra.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/gapEraDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of gapEra. — gapEraDoc","text":"gapEra Number days two continuous exposures considered era.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a set of drug cohorts based on ATC classification — generateAtcCohortSet","title":"Generate a set of drug cohorts based on ATC classification — generateAtcCohortSet","text":"Adds new cohort table cdm reference individuals drug exposure records belong specified Anatomical Therapeutic Chemical (ATC) classification. Cohort start end dates based drug record start end dates, respectively. Records overlap fewer days specified gap era concatenated single cohort entry.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a set of drug cohorts based on ATC classification — generateAtcCohortSet","text":"","code":"generateAtcCohortSet(   cdm,   name,   atcName = NULL,   gapEra = 1,   subsetCohort = NULL,   subsetCohortId = NULL,   numberExposures = FALSE,   daysPrescribed = FALSE,   ... )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a set of drug cohorts based on ATC classification — generateAtcCohortSet","text":"cdm cdm_reference object. name Name new cohort table, must length 1 character vector. atcName Names ATC classification interest. gapEra Number days two continuous exposures considered era. Records fewer days gap concatenated cohort record. subsetCohort Cohort table subset. subsetCohortId Cohort id subset. numberExposures Whether include 'number_exposures' (number drug exposure records indexDate censorDate). daysPrescribed Whether include 'days_prescribed' (number days prescribed used create era). ... Arguments passed CodelistGenerator::getATCCodes().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a set of drug cohorts based on ATC classification — generateAtcCohortSet","text":"function returns cdm reference provided addition new cohort table.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateAtcCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a set of drug cohorts based on ATC classification — generateAtcCohortSet","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation()  cdm <- generateAtcCohortSet(cdm = cdm,                             atcName = \"alimentary tract and metabolism\",                             name = \"drugs\") #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> Warning: cohort_name must be snake case and have less than 100 characters, the following #> cohorts will be renamed: #> • alimentary tract and metabolism -> alimentary_tract_and_metabolism #> ℹ Collapsing records with gapEra = 1 days.  cdm$drugs |>   glimpse() #> Rows: ?? #> Columns: 6 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int>  #> $ subject_id           <int>  #> $ cohort_start_date    <date>  #> $ cohort_end_date      <date>  #> $ number_exposures     <int>  #> $ days_prescribed      <int>  # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a set of drug cohorts based on given concepts — generateDrugUtilisationCohortSet","title":"Generate a set of drug cohorts based on given concepts — generateDrugUtilisationCohortSet","text":"Adds new cohort table cdm reference individuals drug exposure records specified concepts. Cohort start end dates based drug record start end dates, respectively. Records overlap fewer days specified gap era concatenated single cohort entry.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a set of drug cohorts based on given concepts — generateDrugUtilisationCohortSet","text":"","code":"generateDrugUtilisationCohortSet(   cdm,   name,   conceptSet,   gapEra = 1,   subsetCohort = NULL,   subsetCohortId = NULL,   numberExposures = FALSE,   daysPrescribed = FALSE )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a set of drug cohorts based on given concepts — generateDrugUtilisationCohortSet","text":"cdm cdm_reference object. name Name new cohort table, must length 1 character vector. conceptSet List concepts included. gapEra Number days two continuous exposures considered era. subsetCohort Cohort table subset. subsetCohortId Cohort id subset. numberExposures Whether include 'number_exposures' (number drug exposure records indexDate censorDate). daysPrescribed Whether include 'days_prescribed' (number days prescribed used create era).","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a set of drug cohorts based on given concepts — generateDrugUtilisationCohortSet","text":"function returns cdm reference provided addition new cohort table.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a set of drug cohorts based on given concepts — generateDrugUtilisationCohortSet","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation()  druglist <- getDrugIngredientCodes(cdm = cdm,                                    name = c(\"acetaminophen\", \"metformin\"),                                    nameStyle = \"{concept_name}\")  cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"drug_cohorts\",                                         conceptSet = druglist,                                         gapEra = 30,                                         numberExposures = TRUE,                                         daysPrescribed = TRUE) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 30 days.  cdm$drug_cohorts |>   glimpse() #> Rows: ?? #> Columns: 6 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int> 1, 1, 2, 1, 2, 1, 2, 1, 1 #> $ subject_id           <int> 1, 3, 6, 10, 1, 9, 5, 6, 2 #> $ cohort_start_date    <date> 2012-04-04, 2002-04-26, 2002-01-09, 2018-05-26, 1… #> $ cohort_end_date      <date> 2013-04-18, 2002-12-03, 2007-11-11, 2018-07-23, 2… #> $ number_exposures     <int> 1, 1, 1, 2, 1, 1, 3, 1, 1 #> $ days_prescribed      <int> 380, 222, 2133, 76, 1804, 1418, 4810, 4524, 21 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a set of drug cohorts based on drug ingredients — generateIngredientCohortSet","title":"Generate a set of drug cohorts based on drug ingredients — generateIngredientCohortSet","text":"Adds new cohort table cdm reference individuals drug exposure records specified drug ingredient. Cohort start end dates based drug record start end dates, respectively. Records overlap fewer days specified gap era concatenated single cohort entry.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a set of drug cohorts based on drug ingredients — generateIngredientCohortSet","text":"","code":"generateIngredientCohortSet(   cdm,   name,   ingredient = NULL,   gapEra = 1,   subsetCohort = NULL,   subsetCohortId = NULL,   numberExposures = FALSE,   daysPrescribed = FALSE,   ... )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a set of drug cohorts based on drug ingredients — generateIngredientCohortSet","text":"cdm cdm_reference object. name Name new cohort table, must length 1 character vector. ingredient Accepts vectors named lists ingredient names. vector input, e.g., c(\"acetaminophen\", \"codeine\"), generates cohort table descendant concept codes ingredient, assigning unique cohort_definition_id. named list input, e.g., list( \"test_1\" = c(\"simvastatin\", \"acetaminophen\"), \"test_2\" = \"metformin\"), produces cohort table based structure input, name leads combined set descendant concept codes specified ingredients, creating distinct cohort_definition_id named group. gapEra Number days two continuous exposures considered era. subsetCohort Cohort table subset. subsetCohortId Cohort id subset. numberExposures Whether include 'number_exposures' (number drug exposure records indexDate censorDate). daysPrescribed Whether include 'days_prescribed' (number days prescribed used create era). ... Arguments passed CodelistGenerator::getDrugIngredientCodes().","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a set of drug cohorts based on drug ingredients — generateIngredientCohortSet","text":"function returns cdm reference provided addition new cohort table.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/generateIngredientCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a set of drug cohorts based on drug ingredients — generateIngredientCohortSet","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation()  cdm <- generateIngredientCohortSet(cdm = cdm,                                    ingredient = \"acetaminophen\",                                    name = \"acetaminophen\") #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$acetaminophen |>   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB v1.2.2 [unknown@Linux 6.11.0-1014-azure:R 4.5.0/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1 #> $ subject_id           <int> 1, 6, 5, 2, 9, 3, 3 #> $ cohort_start_date    <date> 2022-01-20, 2007-05-31, 1997-04-29, 2016-12-28, 1… #> $ cohort_end_date      <date> 2022-05-31, 2007-09-02, 2004-03-27, 2017-02-11, 1… # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/indexDateDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of indexDate. — indexDateDoc","title":"Helper for consistent documentation of indexDate. — indexDateDoc","text":"Helper consistent documentation indexDate.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/indexDateDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of indexDate. — indexDateDoc","text":"indexDate Name column indicates date start analysis.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/ingredientConceptIdDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of ingredientConceptId. — ingredientConceptIdDoc","title":"Helper for consistent documentation of ingredientConceptId. — ingredientConceptIdDoc","text":"Helper consistent documentation ingredientConceptId.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/ingredientConceptIdDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of ingredientConceptId. — ingredientConceptIdDoc","text":"ingredientConceptId Ingredient OMOP concept interested study.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"It creates a mock database for testing DrugUtilisation package — mockDrugUtilisation","title":"It creates a mock database for testing DrugUtilisation package — mockDrugUtilisation","text":"creates mock database testing DrugUtilisation package","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"It creates a mock database for testing DrugUtilisation package — mockDrugUtilisation","text":"","code":"mockDrugUtilisation(   con = NULL,   writeSchema = NULL,   numberIndividuals = 10,   seed = NULL,   ... )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"It creates a mock database for testing DrugUtilisation package — mockDrugUtilisation","text":"con DBIConnection object database. NULL new duckdb connection used. writeSchema schema writing permissions copy cdm tables. numberIndividuals Number individuals mock cdm. seed Seed random numbers. NULL seed used. ... Tables use basis create mock. tables provided used construct cdm object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"It creates a mock database for testing DrugUtilisation package — mockDrugUtilisation","text":"cdm reference mock tables","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"It creates a mock database for testing DrugUtilisation package — mockDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  cdm #>  #> ── # OMOP CDM reference (duckdb) of DUS MOCK ─────────────────────────────────── #> • omop tables: person, observation_period, concept, concept_ancestor, #> drug_strength, concept_relationship, drug_exposure, condition_occurrence, #> observation, visit_occurrence #> • cohort tables: cohort1, cohort2 #> • achilles tables: - #> • other tables: - # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/nameStyleDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of nameStyle. — nameStyleDoc","title":"Helper for consistent documentation of nameStyle. — nameStyleDoc","text":"Helper consistent documentation nameStyle.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/nameStyleDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of nameStyle. — nameStyleDoc","text":"nameStyle Character string specify nameStyle new columns.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/newNameDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of name for new cohorts. — newNameDoc","title":"Helper for consistent documentation of name for new cohorts. — newNameDoc","text":"Helper consistent documentation name new cohorts.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/newNameDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of name for new cohorts. — newNameDoc","text":"name Name new cohort table, must length 1 character vector.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/numberExposuresDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of numberExposures. — numberExposuresDoc","title":"Helper for consistent documentation of numberExposures. — numberExposuresDoc","text":"Helper consistent documentation numberExposures.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/numberExposuresDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of numberExposures. — numberExposuresDoc","text":"numberExposures Whether include 'number_exposures' (number drug exposure records indexDate censorDate).","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/patternTable.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to create a tibble with the patterns from current drug strength table — patternTable","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"Function create tibble patterns current drug strength table","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/patternTable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"","code":"patternTable(cdm)"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/patternTable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"cdm cdm_reference object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/patternTable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"function creates tibble different patterns found table, plus column potentially valid invalid combinations.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/patternTable.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  patternTable(cdm) #> # A tibble: 5 × 12 #>   pattern_id formula_name            validity number_concepts number_ingredients #>        <dbl> <chr>                   <chr>              <dbl>              <dbl> #> 1          9 fixed amount formulati… pattern…               7                  4 #> 2         18 concentration formulat… pattern…               1                  1 #> 3         24 concentration formulat… pattern…               1                  1 #> 4         40 concentration formulat… pattern…               1                  1 #> 5         NA NA                      no patt…               4                  4 #> # ℹ 7 more variables: number_records <dbl>, amount_numeric <dbl>, #> #   amount_unit_concept_id <dbl>, numerator_numeric <dbl>, #> #   numerator_unit_concept_id <dbl>, denominator_numeric <dbl>, #> #   denominator_unit_concept_id <dbl> # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/patternsWithFormula.html","id":null,"dir":"Reference","previous_headings":"","what":"Patterns valid to compute daily dose with the associated formula. — patternsWithFormula","title":"Patterns valid to compute daily dose with the associated formula. — patternsWithFormula","text":"Patterns valid compute daily dose associated formula.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/patternsWithFormula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Patterns valid to compute daily dose with the associated formula. — patternsWithFormula","text":"","code":"patternsWithFormula"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/patternsWithFormula.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Patterns valid to compute daily dose with the associated formula. — patternsWithFormula","text":"data frame eight variables: pattern_id, amount, amount_unit, numerator, numerator_unit, denominator, denominator_unit, formula_name formula.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of plot. — plotDoc","title":"Helper for consistent documentation of plot. — plotDoc","text":"Helper consistent documentation plot.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of plot. — plotDoc","text":"facet Columns facet . See options availablePlotColumns(result). Formula also allowed specify rows columns. colour Columns color . See options availablePlotColumns(result).","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"Generate custom ggplot2 summarised_result object generated summariseDrugRestart() function.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"","code":"plotDrugRestart(   result,   facet = cdm_name + cohort_name ~ follow_up_days,   colour = \"variable_level\" )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"result summarised_result object. facet Columns facet . See options availablePlotColumns(result). Formula also allowed specify rows columns. colour Columns color . See options availablePlotColumns(result).","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"ggplot2 object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugRestart.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseDrugRestart() function. — plotDrugRestart","text":"","code":"if (FALSE) { # \\dontrun{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  conceptlist <- list(\"a\" = 1125360, \"b\" = c(1503297, 1503327)) cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"switch_cohort\",                                         conceptSet = conceptlist)  result <- cdm$cohort1 |>   summariseDrugRestart(switchCohortTable = \"switch_cohort\")  plotDrugRestart(result) } # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot the results of summariseDrugUtilisation — plotDrugUtilisation","title":"Plot the results of summariseDrugUtilisation — plotDrugUtilisation","text":"Plot results summariseDrugUtilisation","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot the results of summariseDrugUtilisation — plotDrugUtilisation","text":"","code":"plotDrugUtilisation(   result,   variable = \"number exposures\",   plotType = \"barplot\",   facet = strataColumns(result),   colour = \"cohort_name\" )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot the results of summariseDrugUtilisation — plotDrugUtilisation","text":"result summarised_result object. variable Variable plot. See unique(result$variable_name) options. plotType Must choice : 'scatterplot', 'barplot', 'densityplot', 'boxplot'. facet Columns facet . See options availablePlotColumns(result). Formula also allowed specify rows columns. colour Columns color . See options availablePlotColumns(result).","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot the results of summariseDrugUtilisation — plotDrugUtilisation","text":"ggplot2 object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot the results of summariseDrugUtilisation — plotDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation) library(PatientProfiles) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation(numberIndividuals = 100) codes <- list(aceta = c(1125315, 1125360, 2905077, 43135274)) cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"cohort\",                                         conceptSet = codes) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  result <- cdm$cohort |>   addSex() |>   summariseDrugUtilisation(     strata = \"sex\",     ingredientConceptId = 1125315,     estimates = c(\"min\", \"q25\", \"median\", \"q75\", \"max\", \"density\")   )  result |>   filter(estimate_name == \"median\") |>   plotDrugUtilisation(     variable = \"days prescribed\",     plotType = \"barplot\"   )   result |>   plotDrugUtilisation(     variable = \"days exposed\",     facet = cohort_name ~ cdm_name,     colour = \"sex\",     plotType = \"boxplot\"   )   result |>   plotDrugUtilisation(     variable = \"cumulative dose milligram\",     plotType = \"densityplot\",     facet = \"cohort_name\",     colour = \"sex\"   )   mockDisconnect(cdm) # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotIndication.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a plot visualisation (ggplot2) from the output of summariseIndication — plotIndication","title":"Generate a plot visualisation (ggplot2) from the output of summariseIndication — plotIndication","text":"Generate plot visualisation (ggplot2) output summariseIndication","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotIndication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a plot visualisation (ggplot2) from the output of summariseIndication — plotIndication","text":"","code":"plotIndication(   result,   facet = cdm_name + cohort_name ~ window_name,   colour = \"variable_level\" )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotIndication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a plot visualisation (ggplot2) from the output of summariseIndication — plotIndication","text":"result summarised_result object. facet Columns facet . See options availablePlotColumns(result). Formula also allowed specify rows columns. colour Columns color . See options availablePlotColumns(result).","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotIndication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a plot visualisation (ggplot2) from the output of summariseIndication — plotIndication","text":"ggplot2 object","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotIndication.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a plot visualisation (ggplot2) from the output of summariseIndication — plotIndication","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CDMConnector)  cdm <- mockDrugUtilisation()  indications <- list(headache = 378253, asthma = 317009) cdm <- generateConceptCohortSet(cdm = cdm,                                 conceptSet = indications,                                 name = \"indication_cohorts\")  cdm <- generateIngredientCohortSet(cdm = cdm,                                    name = \"drug_cohort\",                                    ingredient = \"acetaminophen\") #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  result <- cdm$drug_cohort |>   summariseIndication(     indicationCohortName = \"indication_cohorts\",     unknownIndicationTable = \"condition_occurrence\",     indicationWindow = list(c(-Inf, 0), c(-365, 0))   ) #> ℹ Intersect with indications table (indication_cohorts) #> ℹ Summarising indications.  plotIndication(result)  # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotProportionOfPatientsCovered.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot proportion of patients covered — plotProportionOfPatientsCovered","title":"Plot proportion of patients covered — plotProportionOfPatientsCovered","text":"Plot proportion patients covered","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotProportionOfPatientsCovered.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot proportion of patients covered — plotProportionOfPatientsCovered","text":"","code":"plotProportionOfPatientsCovered(   result,   facet = \"cohort_name\",   colour = strataColumns(result),   ribbon = TRUE )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotProportionOfPatientsCovered.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot proportion of patients covered — plotProportionOfPatientsCovered","text":"result summarised_result object. facet Columns facet . See options availablePlotColumns(result). Formula also allowed specify rows columns. colour Columns color . See options availablePlotColumns(result). ribbon Whether plot ribbon confidence intervals.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotProportionOfPatientsCovered.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot proportion of patients covered — plotProportionOfPatientsCovered","text":"Plot proportion patients covered time","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotProportionOfPatientsCovered.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot proportion of patients covered — plotProportionOfPatientsCovered","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"my_cohort\",                                         conceptSet = list(drug_of_interest = c(1503297, 1503327))) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing records with gapEra = 1 days.  result <- cdm$my_cohort |>   summariseProportionOfPatientsCovered(followUpDays = 365) #> Warning: No records found in cohort table  plotProportionOfPatientsCovered(result) #> Warning: No PPC results found  # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotTreatment.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"Generate custom ggplot2 summarised_result object generated summariseTreatment function.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotTreatment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"","code":"plotTreatment(   result,   facet = cdm_name + cohort_name ~ window_name,   colour = \"variable_level\" )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotTreatment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"result summarised_result object. facet Columns facet . See options availablePlotColumns(result). Formula also allowed specify rows columns. colour Columns color . See options availablePlotColumns(result).","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotTreatment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"ggplot2 object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/plotTreatment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a custom ggplot2 from a summarised_result object generated with summariseTreatment function. — plotTreatment","text":"","code":"if (FALSE) { # \\dontrun{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() result <- cdm$cohort1 |>   summariseTreatment(     treatmentCohortName = \"cohort2\",     window = list(c(0, 30), c(31, 365))   )  plotTreatment(result) } # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. omopgenerics additionalColumns, attrition, bind, cohortCodelist, cohortCount, exportSummarisedResult, groupColumns, importSummarisedResult, settings, settingsColumns, strataColumns, suppress, tidy PatientProfiles mockDisconnect","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":null,"dir":"Reference","previous_headings":"","what":"Restrict cohort to only cohort records within a certain date range — requireDrugInDateRange","title":"Restrict cohort to only cohort records within a certain date range — requireDrugInDateRange","text":"Filter cohort table keeping cohort records specified index date within specified date range.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Restrict cohort to only cohort records within a certain date range — requireDrugInDateRange","text":"","code":"requireDrugInDateRange(   cohort,   dateRange,   indexDate = \"cohort_start_date\",   cohortId = NULL,   name = omopgenerics::tableName(cohort) )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Restrict cohort to only cohort records within a certain date range — requireDrugInDateRange","text":"cohort cohort_table object. dateRange Date interval consider. records index date outside range dropped. indexDate column containing date checked date range. cohortId cohort definition id restrict . NULL, cohorts included. name Name new cohort table, must length 1 character vector.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Restrict cohort to only cohort records within a certain date range — requireDrugInDateRange","text":"cohort table applied date requirement.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireDrugInDateRange.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Restrict cohort to only cohort records within a certain date range — requireDrugInDateRange","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation()  cdm$cohort1 <- cdm$cohort1 |>   requireDrugInDateRange(dateRange = as.Date(c(\"2020-01-01\", NA)))  attrition(cdm$cohort1) |>   glimpse() #> Rows: 6 #> Columns: 7 #> $ cohort_definition_id <int> 1, 1, 2, 2, 3, 3 #> $ number_records       <int> 3, 1, 5, 0, 2, 1 #> $ number_subjects      <int> 3, 1, 5, 0, 2, 1 #> $ reason_id            <int> 1, 2, 1, 2, 1, 2 #> $ reason               <chr> \"Initial qualifying events\", \"require cohort_star… #> $ excluded_records     <int> 0, 2, 0, 5, 0, 1 #> $ excluded_subjects    <int> 0, 2, 0, 5, 0, 1 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":null,"dir":"Reference","previous_headings":"","what":"Restrict cohort to only the first cohort record per subject — requireIsFirstDrugEntry","title":"Restrict cohort to only the first cohort record per subject — requireIsFirstDrugEntry","text":"Filter cohort table keeping first cohort record per subject.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Restrict cohort to only the first cohort record per subject — requireIsFirstDrugEntry","text":"","code":"requireIsFirstDrugEntry(   cohort,   cohortId = NULL,   name = omopgenerics::tableName(cohort) )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Restrict cohort to only the first cohort record per subject — requireIsFirstDrugEntry","text":"cohort cohort_table object. cohortId cohort definition id restrict . NULL, cohorts included. name Name new cohort table, must length 1 character vector.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Restrict cohort to only the first cohort record per subject — requireIsFirstDrugEntry","text":"cohort table applied first entry requirement.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireIsFirstDrugEntry.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Restrict cohort to only the first cohort record per subject — requireIsFirstDrugEntry","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation()  cdm$cohort1 <- cdm$cohort1 |>   requireIsFirstDrugEntry()  attrition(cdm$cohort1) |>   glimpse() #> Rows: 6 #> Columns: 7 #> $ cohort_definition_id <int> 1, 1, 2, 2, 3, 3 #> $ number_records       <int> 4, 4, 1, 1, 5, 5 #> $ number_subjects      <int> 4, 4, 1, 1, 5, 5 #> $ reason_id            <int> 1, 2, 1, 2, 1, 2 #> $ reason               <chr> \"Initial qualifying events\", \"require is the firs… #> $ excluded_records     <int> 0, 0, 0, 0, 0, 0 #> $ excluded_subjects    <int> 0, 0, 0, 0, 0, 0 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":null,"dir":"Reference","previous_headings":"","what":"Restrict cohort to only cohort records with the given amount of prior observation time in the database — requireObservationBeforeDrug","title":"Restrict cohort to only cohort records with the given amount of prior observation time in the database — requireObservationBeforeDrug","text":"Filter cohort table keeping cohort records individual required observation time database prior cohort start date.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Restrict cohort to only cohort records with the given amount of prior observation time in the database — requireObservationBeforeDrug","text":"","code":"requireObservationBeforeDrug(   cohort,   days,   cohortId = NULL,   name = omopgenerics::tableName(cohort) )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Restrict cohort to only cohort records with the given amount of prior observation time in the database — requireObservationBeforeDrug","text":"cohort cohort_table object. days Number days prior observation required cohort start date. records fewer days dropped. cohortId cohort definition id restrict . NULL, cohorts included. name Name new cohort table, must length 1 character vector.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Restrict cohort to only cohort records with the given amount of prior observation time in the database — requireObservationBeforeDrug","text":"cohort table applied prior observation requirement.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requireObservationBeforeDrug.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Restrict cohort to only cohort records with the given amount of prior observation time in the database — requireObservationBeforeDrug","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation()  cdm$cohort1 <- cdm$cohort1 |>   requireObservationBeforeDrug(days = 365)  attrition(cdm$cohort1) |>   glimpse() #> Rows: 6 #> Columns: 7 #> $ cohort_definition_id <int> 1, 1, 2, 2, 3, 3 #> $ number_records       <int> 3, 2, 2, 0, 5, 4 #> $ number_subjects      <int> 3, 2, 2, 0, 5, 4 #> $ reason_id            <int> 1, 2, 1, 2, 1, 2 #> $ reason               <chr> \"Initial qualifying events\", \"require prior obser… #> $ excluded_records     <int> 0, 1, 0, 2, 0, 1 #> $ excluded_subjects    <int> 0, 1, 0, 2, 0, 1 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":null,"dir":"Reference","previous_headings":"","what":"Restrict cohort to only cohort records with a given amount of time since the last cohort record ended — requirePriorDrugWashout","title":"Restrict cohort to only cohort records with a given amount of time since the last cohort record ended — requirePriorDrugWashout","text":"Filter cohort table keeping cohort records required amount time passed since last cohort entry ended individual.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Restrict cohort to only cohort records with a given amount of time since the last cohort record ended — requirePriorDrugWashout","text":"","code":"requirePriorDrugWashout(   cohort,   days,   cohortId = NULL,   name = omopgenerics::tableName(cohort) )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Restrict cohort to only cohort records with a given amount of time since the last cohort record ended — requirePriorDrugWashout","text":"cohort cohort_table object. days number days required passed since last cohort record finished. records fewer days dropped. Note setting days Inf lead result using requireIsFirstDrugEntry function (individual´s first cohort record kept). cohortId cohort definition id restrict . NULL, cohorts included. name Name new cohort table, must length 1 character vector.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Restrict cohort to only cohort records with a given amount of time since the last cohort record ended — requirePriorDrugWashout","text":"cohort table applied washout requirement.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/requirePriorDrugWashout.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Restrict cohort to only cohort records with a given amount of time since the last cohort record ended — requirePriorDrugWashout","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation()  cdm$cohort1 <- cdm$cohort1 |>   requirePriorDrugWashout(days = 90)  attrition(cdm$cohort1) |>   glimpse() #> Rows: 6 #> Columns: 7 #> $ cohort_definition_id <int> 1, 1, 2, 2, 3, 3 #> $ number_records       <int> 3, 3, 4, 4, 3, 3 #> $ number_subjects      <int> 3, 3, 4, 4, 3, 3 #> $ reason_id            <int> 1, 2, 1, 2, 1, 2 #> $ reason               <chr> \"Initial qualifying events\", \"require prior use d… #> $ excluded_records     <int> 0, 0, 0, 0, 0, 0 #> $ excluded_subjects    <int> 0, 0, 0, 0, 0, 0 # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/restrictIncidentDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of restrictIncident. — restrictIncidentDoc","title":"Helper for consistent documentation of restrictIncident. — restrictIncidentDoc","text":"Helper consistent documentation restrictIncident.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/restrictIncidentDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of restrictIncident. — restrictIncidentDoc","text":"restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/resultDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of result. — resultDoc","title":"Helper for consistent documentation of result. — resultDoc","text":"Helper consistent documentation result.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/resultDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of result. — resultDoc","text":"result summarised_result object.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/strataDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of strata. — strataDoc","title":"Helper for consistent documentation of strata. — strataDoc","text":"Helper consistent documentation strata.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/strataDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of strata. — strataDoc","text":"strata list variables stratify results. variables must added additional columns cohort table.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":null,"dir":"Reference","previous_headings":"","what":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"Check coverage daily dose computation sample cdm selected concept sets ingredient","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"","code":"summariseDoseCoverage(   cdm,   ingredientConceptId,   estimates = c(\"count_missing\", \"percentage_missing\", \"mean\", \"sd\", \"q25\", \"median\",     \"q75\"),   sampleSize = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"cdm cdm_reference object. ingredientConceptId Ingredient OMOP concept interested study. estimates Estimates obtain. sampleSize Maximum number records ingredient estimate dose coverage. ingredient , random sample equal sampleSize considered. NULL, records used.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"function returns information coverage computeDailyDose.R selected ingredients concept sets","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDoseCoverage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check coverage of daily dose computation in a sample of the cdm for selected concept sets and ingredient — summariseDoseCoverage","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  summariseDoseCoverage(cdm = cdm, ingredientConceptId = 1125315) #> ℹ The following estimates will be computed: #> • daily_dose: count_missing, percentage_missing, mean, sd, q25, median, q75 #> ! Table is collected to memory as not all requested estimates are supported on #>   the database side #> → Start summary of data, at 2025-05-29 15:13:16.202081 #> ✔ Summary finished, at 2025-05-29 15:13:16.634284 #> # A tibble: 56 × 13 #>    result_id cdm_name group_name      group_level   strata_name strata_level #>        <int> <chr>    <chr>           <chr>         <chr>       <chr>        #>  1         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  2         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  3         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  4         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  5         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  6         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  7         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  8         1 DUS MOCK ingredient_name acetaminophen overall     overall      #>  9         1 DUS MOCK ingredient_name acetaminophen unit        milligram    #> 10         1 DUS MOCK ingredient_name acetaminophen unit        milligram    #> # ℹ 46 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugRestart.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise the drug restart for each follow-up period of interest. — summariseDrugRestart","title":"Summarise the drug restart for each follow-up period of interest. — summariseDrugRestart","text":"Summarise drug restart follow-period interest.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugRestart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise the drug restart for each follow-up period of interest. — summariseDrugRestart","text":"","code":"summariseDrugRestart(   cohort,   cohortId = NULL,   switchCohortTable,   switchCohortId = NULL,   strata = list(),   followUpDays = Inf,   censorDate = NULL,   incident = TRUE,   restrictToFirstDiscontinuation = TRUE )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugRestart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise the drug restart for each follow-up period of interest. — summariseDrugRestart","text":"cohort cohort_table object. cohortId cohort definition id restrict . NULL, cohorts included. switchCohortTable cohort table cdm contains possible alternative treatments. switchCohortId cohort ids used switchCohortTable. NULL cohort definition ids used. strata list variables stratify results. variables must added additional columns cohort table. followUpDays vector number days follow . can multiple values. censorDate Name column indicates date stop analysis, NULL end individuals observation used. incident Whether switch treatment incident (start discontinuation) (can start discontinuation last till ). restrictToFirstDiscontinuation Whether consider first discontinuation episode .","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugRestart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise the drug restart for each follow-up period of interest. — summariseDrugRestart","text":"summarised_result object percentages restart, switch exposed per follow-period given.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugRestart.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise the drug restart for each follow-up period of interest. — summariseDrugRestart","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  conceptlist <- list(acetaminophen = 1125360, metformin = c(1503297, 1503327)) cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"switch_cohort\",                                         conceptSet = conceptlist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  result <- cdm$cohort1 |>   summariseDrugRestart(switchCohortTable = \"switch_cohort\")  tableDrugRestart(result)                     CDM name                            DUS MOCK            Treatment       Estimate name                Cohort name            cohort_1       cohort_2       cohort_3     Drug restart till end of observation     restart N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)switch N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)restart and switch N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)untreated N (%) 3 (100.00 %) 3 (100.00 %) 4 (100.00 %)# }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"function used summarise dose utilisation table multiple cohorts.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"","code":"summariseDrugUtilisation(   cohort,   cohortId = NULL,   strata = list(),   estimates = c(\"q25\", \"median\", \"q75\", \"mean\", \"sd\", \"count_missing\",     \"percentage_missing\"),   ingredientConceptId = NULL,   conceptSet = NULL,   indexDate = \"cohort_start_date\",   censorDate = \"cohort_end_date\",   restrictIncident = TRUE,   gapEra = 1,   numberExposures = TRUE,   numberEras = TRUE,   daysExposed = TRUE,   daysPrescribed = TRUE,   timeToExposure = TRUE,   initialExposureDuration = TRUE,   initialQuantity = TRUE,   cumulativeQuantity = TRUE,   initialDailyDose = TRUE,   cumulativeDose = TRUE )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"cohort cohort_table object. cohortId cohort definition id restrict . NULL, cohorts included. strata list variables stratify results. variables must added additional columns cohort table. estimates Estimates want columns. ingredientConceptId Ingredient OMOP concept interested study. conceptSet List concepts included. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. restrictIncident Whether include incident prescriptions analysis. FALSE prescriptions overlap study period included. gapEra Number days two continuous exposures considered era. numberExposures Whether include 'number_exposures' (number drug exposure records indexDate censorDate). numberEras Whether include 'number_eras' (number continuous exposure episodes indexDate censorDate). daysExposed Whether include 'days_exposed' (number days individual continuous exposure episode, including allowed treatment gaps, indexDate censorDate; sum length different drug eras). daysPrescribed Whether include 'days_prescribed' (sum number days prescription contribute analysis). timeToExposure Whether include 'time_to_exposure' (number days indexDate first episode). initialExposureDuration Whether include 'initial_exposure_duration' (number prescribed days first drug exposure record). initialQuantity Whether include 'initial_quantity' (quantity first drug exposure record). cumulativeQuantity Whether include 'cumulative_quantity' (sum quantity different exposures considered analysis). initialDailyDose Whether include 'initial_daily_dose_{unit}' (daily dose first considered prescription). cumulativeDose Whether include 'cumulative_dose_{unit}' (sum cumulative dose analysed drug exposure records).","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"summary drug utilisation stratified cohort_name strata_name","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This function is used to summarise the dose utilisation table over multiple cohorts. — summariseDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator)  cdm <- mockDrugUtilisation() cdm <- generateIngredientCohortSet(cdm = cdm,                                    ingredient = \"acetaminophen\",                                    name = \"dus_cohort\") #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$dus_cohort |>   summariseDrugUtilisation(ingredientConceptId = 1125315) #> # A tibble: 72 × 13 #>    result_id cdm_name group_name  group_level   strata_name strata_level #>        <int> <chr>    <chr>       <chr>         <chr>       <chr>        #>  1         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  2         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  3         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  4         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  5         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  6         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  7         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  8         1 DUS MOCK cohort_name acetaminophen overall     overall      #>  9         1 DUS MOCK cohort_name acetaminophen overall     overall      #> 10         1 DUS MOCK cohort_name acetaminophen overall     overall      #> # ℹ 62 more rows #> # ℹ 7 more variables: variable_name <chr>, variable_level <chr>, #> #   estimate_name <chr>, estimate_type <chr>, estimate_value <chr>, #> #   additional_name <chr>, additional_level <chr> # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseIndication.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise the indications of individuals in a drug cohort — summariseIndication","title":"Summarise the indications of individuals in a drug cohort — summariseIndication","text":"Summarise observed indications patients drug cohort based presence indication cohort specified time window. individual one indication cohorts, considered unknown indication present one specified OMOP CDM clinical tables. Otherwise,  neither indication cohort clinical table considered observed indication.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseIndication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise the indications of individuals in a drug cohort — summariseIndication","text":"","code":"summariseIndication(   cohort,   strata = list(),   indicationCohortName,   cohortId = NULL,   indicationCohortId = NULL,   indicationWindow = list(c(0, 0)),   unknownIndicationTable = NULL,   indexDate = \"cohort_start_date\",   mutuallyExclusive = TRUE,   censorDate = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseIndication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise the indications of individuals in a drug cohort — summariseIndication","text":"cohort cohort_table object. strata list variables stratify results. variables must added additional columns cohort table. indicationCohortName Name cohort table potential indications. cohortId cohort definition id restrict . NULL, cohorts included. indicationCohortId target cohort ID add indication. NULL cohorts considered. indicationWindow time window identify indications. unknownIndicationTable Tables OMOP CDM search unknown indications. indexDate Name column indicates date start analysis. mutuallyExclusive Whether report indications mutually exclusive report independent results. censorDate Name column indicates date stop analysis, NULL end individuals observation used.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseIndication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise the indications of individuals in a drug cohort — summariseIndication","text":"summarised result","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseIndication.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise the indications of individuals in a drug cohort — summariseIndication","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CDMConnector) library(dplyr, warn.conflicts = FALSE)  cdm <- mockDrugUtilisation()  indications <- list(headache = 378253, asthma = 317009) cdm <- generateConceptCohortSet(cdm = cdm,                                 conceptSet = indications,                                 name = \"indication_cohorts\")  cdm <- generateIngredientCohortSet(cdm = cdm,                                    name = \"drug_cohort\",                                    ingredient = \"acetaminophen\") #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  cdm$drug_cohort |>   summariseIndication(     indicationCohortName = \"indication_cohorts\",     unknownIndicationTable = \"condition_occurrence\",     indicationWindow = list(c(-Inf, 0))   ) |>   glimpse() #> ℹ Intersect with indications table (indication_cohorts) #> ℹ Summarising indications. #> Rows: 12 #> Columns: 13 #> $ result_id        <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 #> $ cdm_name         <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS … #> $ group_name       <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_… #> $ group_level      <chr> \"acetaminophen\", \"acetaminophen\", \"acetaminophen\", \"a… #> $ strata_name      <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ strata_level     <chr> \"overall\", \"overall\", \"overall\", \"overall\", \"overall\"… #> $ variable_name    <chr> \"Indication any time before or on index date\", \"Indic… #> $ variable_level   <chr> \"asthma\", \"asthma\", \"headache\", \"headache\", \"asthma a… #> $ estimate_name    <chr> \"count\", \"percentage\", \"count\", \"percentage\", \"count\"… #> $ estimate_type    <chr> \"integer\", \"percentage\", \"integer\", \"percentage\", \"in… #> $ estimate_value   <chr> \"1\", \"16.6666666666667\", \"0\", \"0\", \"2\", \"33.333333333… #> $ additional_name  <chr> \"window_name\", \"window_name\", \"window_name\", \"window_… #> $ additional_level <chr> \"-inf to 0\", \"-inf to 0\", \"-inf to 0\", \"-inf to 0\", \"… # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseProportionOfPatientsCovered.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise proportion Of patients covered — summariseProportionOfPatientsCovered","title":"Summarise proportion Of patients covered — summariseProportionOfPatientsCovered","text":"Gives proportion patients still observation cohort given day following first cohort entry. known “proportion patients covered” (PPC) method assessing treatment persistence.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseProportionOfPatientsCovered.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise proportion Of patients covered — summariseProportionOfPatientsCovered","text":"","code":"summariseProportionOfPatientsCovered(   cohort,   cohortId = NULL,   strata = list(),   followUpDays = NULL )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseProportionOfPatientsCovered.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise proportion Of patients covered — summariseProportionOfPatientsCovered","text":"cohort cohort_table object. cohortId cohort definition id restrict . NULL, cohorts included. strata list variables stratify results. variables must added additional columns cohort table. followUpDays Number days follow individuals . NULL maximum amount days individuals first cohort start date last cohort end date used","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseProportionOfPatientsCovered.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise proportion Of patients covered — summariseProportionOfPatientsCovered","text":"summarised result","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseProportionOfPatientsCovered.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise proportion Of patients covered — summariseProportionOfPatientsCovered","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation(numberIndividuals = 100)  result <- cdm$cohort1 |>   summariseProportionOfPatientsCovered(followUpDays = 365) #> Getting PPC for cohort cohort_1 #> Collecting cohort into memory #> Geting PPC over 365 days following first cohort entry #>  -- getting PPC for ■■■■■■■■■■■■                     131 of 365 days #>  -- getting PPC for ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■  365 of 365 days #> Getting PPC for cohort cohort_2 #> Collecting cohort into memory #> Geting PPC over 365 days following first cohort entry #>  -- getting PPC for ■■■■■■■■■■■■                     129 of 365 days #>  -- getting PPC for ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■  365 of 365 days #> Getting PPC for cohort cohort_3 #> Collecting cohort into memory #> Geting PPC over 365 days following first cohort entry #>  -- getting PPC for ■■■■■■■■■■■                      127 of 365 days #>  -- getting PPC for ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■  365 of 365 days  tidy(result) #> # A tibble: 1,098 × 11 #>    cdm_name cohort_name variable_name variable_level time  outcome_count #>    <chr>    <chr>       <chr>         <chr>          <chr>         <int> #>  1 DUS MOCK cohort_1    overall       overall        0                30 #>  2 DUS MOCK cohort_1    overall       overall        1                30 #>  3 DUS MOCK cohort_1    overall       overall        2                30 #>  4 DUS MOCK cohort_1    overall       overall        3                30 #>  5 DUS MOCK cohort_1    overall       overall        4                30 #>  6 DUS MOCK cohort_1    overall       overall        5                30 #>  7 DUS MOCK cohort_1    overall       overall        6                30 #>  8 DUS MOCK cohort_1    overall       overall        7                29 #>  9 DUS MOCK cohort_1    overall       overall        8                29 #> 10 DUS MOCK cohort_1    overall       overall        9                29 #> # ℹ 1,088 more rows #> # ℹ 5 more variables: denominator_count <int>, ppc <dbl>, ppc_lower <dbl>, #> #   ppc_upper <dbl>, cohort_table_name <chr> # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseTreatment.html","id":null,"dir":"Reference","previous_headings":"","what":"This function is used to summarise treatments received — summariseTreatment","title":"This function is used to summarise treatments received — summariseTreatment","text":"function used summarise treatments received","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseTreatment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function is used to summarise treatments received — summariseTreatment","text":"","code":"summariseTreatment(   cohort,   window,   treatmentCohortName,   cohortId = NULL,   treatmentCohortId = NULL,   strata = list(),   indexDate = \"cohort_start_date\",   censorDate = NULL,   mutuallyExclusive = FALSE )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseTreatment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function is used to summarise treatments received — summariseTreatment","text":"cohort cohort_table object. window Time window summarise treatments. treatmentCohortName Name cohort cdm contains treatments interest. cohortId cohort definition id restrict . NULL, cohorts included. treatmentCohortId Cohort definition id interest treatmentCohortName. strata list variables stratify results. variables must added additional columns cohort table. indexDate Name column indicates date start analysis. censorDate Name column indicates date stop analysis, NULL end individuals observation used. mutuallyExclusive Whether include mutually exclusive treatments .","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseTreatment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"This function is used to summarise treatments received — summariseTreatment","text":"summary treatments stratified cohort_name strata_name","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/summariseTreatment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This function is used to summarise treatments received — summariseTreatment","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() cdm$cohort1 |>   summariseTreatment(     treatmentCohortName = \"cohort2\",     window = list(c(0, 30), c(31, 365))   ) #> ℹ Intersect with medications table (cohort2) #> ℹ Summarising medications. # }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper for consistent documentation of table. — tableDoc","title":"Helper for consistent documentation of table. — tableDoc","text":"Helper consistent documentation table.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper for consistent documentation of table. — tableDoc","text":"type Type table. Check supported types visOmopResults::tableType(). header Columns use header. See options availableTableColumns(result). groupColumn Columns group . See options availableTableColumns(result). hide Columns hide visualisation. See options availableTableColumns(result). .options named list additional formatting options. visOmopResults::tableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDoseCoverage.html","id":null,"dir":"Reference","previous_headings":"","what":"Format a dose_coverage object into a visual table. — tableDoseCoverage","title":"Format a dose_coverage object into a visual table. — tableDoseCoverage","text":"Format dose_coverage object visual table.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDoseCoverage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a dose_coverage object into a visual table. — tableDoseCoverage","text":"","code":"tableDoseCoverage(   result,   header = c(\"variable_name\", \"estimate_name\"),   groupColumn = c(\"cdm_name\", \"ingredient_name\"),   type = \"gt\",   hide = c(\"variable_level\", \"sample_size\"),   .options = list() )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDoseCoverage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a dose_coverage object into a visual table. — tableDoseCoverage","text":"result summarised_result object. header Columns use header. See options availableTableColumns(result). groupColumn Columns group . See options availableTableColumns(result). type Type table. Check supported types visOmopResults::tableType(). hide Columns hide visualisation. See options availableTableColumns(result). .options named list additional formatting options. visOmopResults::tableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDoseCoverage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a dose_coverage object into a visual table. — tableDoseCoverage","text":"table formatted version summariseDrugCoverage() results.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDoseCoverage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format a dose_coverage object into a visual table. — tableDoseCoverage","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  result <- summariseDoseCoverage(cdm, 1125315) #> ℹ The following estimates will be computed: #> • daily_dose: count_missing, percentage_missing, mean, sd, q25, median, q75 #> ! Table is collected to memory as not all requested estimates are supported on #>   the database side #> → Start summary of data, at 2025-05-29 15:14:13.674256 #> ✔ Summary finished, at 2025-05-29 15:14:14.118092  tableDoseCoverage(result)                     Variable name                            number records                       Missing dose                       daily_dose            Unit       Route       Pattern id                Estimate name            N       N (%)       Mean (SD)       Median (Q25 - Q75)     DUS MOCK; acetaminophen     overall overall overall 6 0 (0.00 %) 433.93 (941.85) 40.09 (12.91 - 131.21)milligram overall overall 6 0 (0.00 %) 433.93 (941.85) 40.09 (12.91 - 131.21) oral overall 3 0 (0.00 %) 839.46 (1,312.99) 160.00 (82.72 - 1,256.47) topical overall 3 0 (0.00 %) 28.41 (20.78) 35.34 (20.19 - 40.09) oral 9 3 0 (0.00 %) 839.46 (1,312.99) 160.00 (82.72 - 1,256.47) topical 9 3 0 (0.00 %) 28.41 (20.78) 35.34 (20.19 - 40.09)# }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugRestart.html","id":null,"dir":"Reference","previous_headings":"","what":"Format a drug_restart object into a visual table. — tableDrugRestart","title":"Format a drug_restart object into a visual table. — tableDrugRestart","text":"Format drug_restart object visual table.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugRestart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a drug_restart object into a visual table. — tableDrugRestart","text":"","code":"tableDrugRestart(   result,   header = c(\"cdm_name\", \"cohort_name\"),   groupColumn = \"variable_name\",   type = \"gt\",   hide = c(\"censor_date\", \"restrict_to_first_discontinuation\", \"follow_up_days\",     \"cohort_table_name\", \"incident\", \"switch_cohort_table\"),   .options = list() )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugRestart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a drug_restart object into a visual table. — tableDrugRestart","text":"result summarised_result object. header Columns use header. See options availableTableColumns(result). groupColumn Columns group . See options availableTableColumns(result). type Type table. Check supported types visOmopResults::tableType(). hide Columns hide visualisation. See options availableTableColumns(result). .options named list additional formatting options. visOmopResults::tableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugRestart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a drug_restart object into a visual table. — tableDrugRestart","text":"table formatted version summariseDrugRestart() results.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugRestart.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format a drug_restart object into a visual table. — tableDrugRestart","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  conceptlist <- list(acetaminophen = 1125360, metformin = c(1503297, 1503327)) cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"switch_cohort\",                                         conceptSet = conceptlist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  result <- cdm$cohort1 |>   summariseDrugRestart(switchCohortTable = \"switch_cohort\")  tableDrugRestart(result)                     CDM name                            DUS MOCK            Treatment       Estimate name                Cohort name            cohort_1       cohort_2       cohort_3     Drug restart till end of observation     restart N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)switch N (%) 0 (0.00 %) 0 (0.00 %) 2 (50.00 %)restart and switch N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)untreated N (%) 5 (100.00 %) 1 (100.00 %) 2 (50.00 %)# }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","title":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","text":"Format drug_utilisation object visual table.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","text":"","code":"tableDrugUtilisation(   result,   header = c(\"cdm_name\"),   groupColumn = c(\"cohort_name\", strataColumns(result)),   type = \"gt\",   hide = c(\"variable_level\", \"censor_date\", \"cohort_table_name\", \"gap_era\", \"index_date\",     \"restrict_incident\"),   .options = list() )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","text":"result summarised_result object. header Columns use header. See options availableTableColumns(result). groupColumn Columns group . See options availableTableColumns(result). type Type table. Check supported types visOmopResults::tableType(). hide Columns hide visualisation. See options availableTableColumns(result). .options named list additional formatting options. visOmopResults::tableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","text":"table formatted version summariseIndication() results.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format a drug_utilisation object into a visual table. — tableDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator)  cdm <- mockDrugUtilisation() codelist <- getDrugIngredientCodes(cdm = cdm, name = \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"dus_cohort\",                                         conceptSet = codelist) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  drugUse <- cdm$dus_cohort |>   summariseDrugUtilisation(ingredientConceptId = 1125315)  tableDrugUtilisation(drugUse)     Concept set       Ingredient       Variable name       Estimate name                CDM name            DUS MOCK     161_acetaminophen     overall overall number records N 5  number subjects N 5ingredient_1125315_descendants overall number exposures missing N (%) 0 (0.00 %)   Mean (SD) 1.20 (0.45)   Median (Q25 - Q75) 1 (1 - 1)  time to exposure missing N (%) 0 (0.00 %)   Mean (SD) 0.00 (0.00)   Median (Q25 - Q75) 0 (0 - 0)  cumulative quantity missing N (%) 0 (0.00 %)   Mean (SD) 70.00 (45.14)   Median (Q25 - Q75) 100.00 (40.00 - 100.00)  initial quantity missing N (%) 0 (0.00 %)   Mean (SD) 52.00 (45.63)   Median (Q25 - Q75) 40.00 (15.00 - 100.00)  initial exposure duration missing N (%) 0 (0.00 %)   Mean (SD) 827.60 (508.24)   Median (Q25 - Q75) 785 (781 - 910)  number eras missing N (%) 0 (0.00 %)   Mean (SD) 1.00 (0.00)   Median (Q25 - Q75) 1 (1 - 1)  days exposed missing N (%) 0 (0.00 %)   Mean (SD) 827.60 (508.24)   Median (Q25 - Q75) 785 (781 - 910)  days prescribed missing N (%) 0 (0.00 %)   Mean (SD) 878.20 (515.49)   Median (Q25 - Q75) 910 (781 - 1,038) acetaminophen cumulative dose milligram missing N (%) 0 (0.00 %)   Mean (SD) 105,700.00 (156,815.02)   Median (Q25 - Q75) 50,000.00 (42,000.00 - 50,000.00)  initial daily dose milligram missing N (%) 0 (0.00 %)   Mean (SD) 681.70 (1,469.61)   Median (Q25 - Q75) 32.34 (7.64 - 54.95)# }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableIndication.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a table showing indication results — tableIndication","title":"Create a table showing indication results — tableIndication","text":"Create table showing indication results","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableIndication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a table showing indication results — tableIndication","text":"","code":"tableIndication(   result,   header = c(\"cdm_name\", \"cohort_name\", strataColumns(result)),   groupColumn = \"variable_name\",   hide = c(\"window_name\", \"mutually_exclusive\", \"unknown_indication_table\",     \"censor_date\", \"cohort_table_name\", \"index_date\", \"indication_cohort_name\"),   type = \"gt\",   .options = list() )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableIndication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a table showing indication results — tableIndication","text":"result summarised_result object. header Columns use header. See options availableTableColumns(result). groupColumn Columns group . See options availableTableColumns(result). hide Columns hide visualisation. See options availableTableColumns(result). type Type table. Check supported types visOmopResults::tableType(). .options named list additional formatting options. visOmopResults::tableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableIndication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a table showing indication results — tableIndication","text":"table formatted version summariseIndication() results.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableIndication.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a table showing indication results — tableIndication","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  result <- cdm$cohort1 |>   summariseIndication(     indicationCohortName = \"cohort2\",     indicationWindow = list(c(-30, 0)),     unknownIndicationTable = \"condition_occurrence\"   ) #> ℹ Intersect with indications table (cohort2) #> ℹ Summarising indications.  tableIndication(result)                     CDM name                            DUS MOCK            Indication       Estimate name                Cohort name            cohort_1       cohort_2       cohort_3     Indication from 30 days before to the index date     cohort_1 N (%) 1 (33.33 %) 0 (0.00 %) 1 (33.33 %)cohort_2 N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)cohort_3 N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)cohort_1 and cohort_2 N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)cohort_1 and cohort_3 N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)cohort_2 and cohort_3 N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)cohort_1 and cohort_2 and cohort_3 N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)unknown N (%) 0 (0.00 %) 0 (0.00 %) 1 (33.33 %)none N (%) 2 (66.67 %) 4 (100.00 %) 1 (33.33 %)not in observation N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)# }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableProportionOfPatientsCovered.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a table with proportion of patients covered results — tableProportionOfPatientsCovered","title":"Create a table with proportion of patients covered results — tableProportionOfPatientsCovered","text":"Create table proportion patients covered results","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableProportionOfPatientsCovered.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a table with proportion of patients covered results — tableProportionOfPatientsCovered","text":"","code":"tableProportionOfPatientsCovered(   result,   header = c(\"cohort_name\", strataColumns(result)),   groupColumn = \"cdm_name\",   type = \"gt\",   hide = c(\"variable_name\", \"variable_level\", \"cohort_table_name\"),   .options = list() )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableProportionOfPatientsCovered.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a table with proportion of patients covered results — tableProportionOfPatientsCovered","text":"result summarised_result object. header Columns use header. See options availableTableColumns(result). groupColumn Columns group . See options availableTableColumns(result). type Type table. Check supported types visOmopResults::tableType(). hide Columns hide visualisation. See options availableTableColumns(result). .options named list additional formatting options. visOmopResults::tableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableProportionOfPatientsCovered.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a table with proportion of patients covered results — tableProportionOfPatientsCovered","text":"table formatted version summariseProportionOfPatientsCovered() results.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableProportionOfPatientsCovered.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a table with proportion of patients covered results — tableProportionOfPatientsCovered","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  cdm <- generateDrugUtilisationCohortSet(cdm = cdm,                                         name = \"my_cohort\",                                         conceptSet = list(drug_of_interest = c(1503297, 1503327))) #> ℹ Subsetting drug_exposure table #> ℹ Checking whether any record needs to be dropped. #> ℹ Collapsing overlaping records. #> ℹ Collapsing records with gapEra = 1 days.  result <- cdm$my_cohort |>   summariseProportionOfPatientsCovered(followUpDays = 365) #> Getting PPC for cohort drug_of_interest #> Collecting cohort into memory #> Geting PPC over 365 days following first cohort entry #>  -- getting PPC for ■■■■■■■■■■■                      123 of 365 days #>  -- getting PPC for ■■■■■■■■■■■■■■■■■■■■■■■■■■       306 of 365 days #>  -- getting PPC for ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■  365 of 365 days  tableProportionOfPatientsCovered(result) #> ℹ <ppc>% has not been formatted. #> ℹ <ppc_lower>% has not been formatted. #> ℹ <ppc_upper>% has not been formatted.     Time       Estimate name                Cohort name            drug_of_interest     DUS MOCK     0 PPC (95%CI) 100.00% [43.85% - 100.00%]1 PPC (95%CI) 100.00% [43.85% - 100.00%]2 PPC (95%CI) 100.00% [43.85% - 100.00%]3 PPC (95%CI) 100.00% [43.85% - 100.00%]4 PPC (95%CI) 100.00% [43.85% - 100.00%]5 PPC (95%CI) 100.00% [43.85% - 100.00%]6 PPC (95%CI) 100.00% [43.85% - 100.00%]7 PPC (95%CI) 66.67% [20.77% - 93.85%]8 PPC (95%CI) 66.67% [20.77% - 93.85%]9 PPC (95%CI) 66.67% [20.77% - 93.85%]10 PPC (95%CI) 66.67% [20.77% - 93.85%]11 PPC (95%CI) 66.67% [20.77% - 93.85%]12 PPC (95%CI) 66.67% [20.77% - 93.85%]13 PPC (95%CI) 66.67% [20.77% - 93.85%]14 PPC (95%CI) 66.67% [20.77% - 93.85%]15 PPC (95%CI) 100.00% [34.24% - 100.00%]16 PPC (95%CI) 100.00% [34.24% - 100.00%]17 PPC (95%CI) 100.00% [34.24% - 100.00%]18 PPC (95%CI) 100.00% [34.24% - 100.00%]19 PPC (95%CI) 100.00% [34.24% - 100.00%]20 PPC (95%CI) 100.00% [34.24% - 100.00%]21 PPC (95%CI) 100.00% [34.24% - 100.00%]22 PPC (95%CI) 100.00% [34.24% - 100.00%]23 PPC (95%CI) 100.00% [34.24% - 100.00%]24 PPC (95%CI) 100.00% [34.24% - 100.00%]25 PPC (95%CI) 100.00% [34.24% - 100.00%]26 PPC (95%CI) 100.00% [34.24% - 100.00%]27 PPC (95%CI) 100.00% [34.24% - 100.00%]28 PPC (95%CI) 100.00% [34.24% - 100.00%]29 PPC (95%CI) 100.00% [34.24% - 100.00%]30 PPC (95%CI) 100.00% [34.24% - 100.00%]31 PPC (95%CI) 100.00% [34.24% - 100.00%]32 PPC (95%CI) 100.00% [34.24% - 100.00%]33 PPC (95%CI) 100.00% [34.24% - 100.00%]34 PPC (95%CI) 100.00% [34.24% - 100.00%]35 PPC (95%CI) 100.00% [34.24% - 100.00%]36 PPC (95%CI) 100.00% [34.24% - 100.00%]37 PPC (95%CI) 100.00% [34.24% - 100.00%]38 PPC (95%CI) 100.00% [34.24% - 100.00%]39 PPC (95%CI) 100.00% [34.24% - 100.00%]40 PPC (95%CI) 100.00% [34.24% - 100.00%]41 PPC (95%CI) 100.00% [34.24% - 100.00%]42 PPC (95%CI) 100.00% [34.24% - 100.00%]43 PPC (95%CI) 100.00% [34.24% - 100.00%]44 PPC (95%CI) 100.00% [34.24% - 100.00%]45 PPC (95%CI) 100.00% [34.24% - 100.00%]46 PPC (95%CI) 100.00% [34.24% - 100.00%]47 PPC (95%CI) 100.00% [34.24% - 100.00%]48 PPC (95%CI) 100.00% [34.24% - 100.00%]49 PPC (95%CI) 100.00% [34.24% - 100.00%]50 PPC (95%CI) 100.00% [34.24% - 100.00%]51 PPC (95%CI) 100.00% [34.24% - 100.00%]52 PPC (95%CI) 100.00% [34.24% - 100.00%]53 PPC (95%CI) 100.00% [34.24% - 100.00%]54 PPC (95%CI) 100.00% [34.24% - 100.00%]55 PPC (95%CI) 100.00% [34.24% - 100.00%]56 PPC (95%CI) 100.00% [34.24% - 100.00%]57 PPC (95%CI) 100.00% [34.24% - 100.00%]58 PPC (95%CI) 100.00% [34.24% - 100.00%]59 PPC (95%CI) 100.00% [34.24% - 100.00%]60 PPC (95%CI) 100.00% [34.24% - 100.00%]61 PPC (95%CI) 100.00% [34.24% - 100.00%]62 PPC (95%CI) 100.00% [34.24% - 100.00%]63 PPC (95%CI) 100.00% [34.24% - 100.00%]64 PPC (95%CI) 100.00% [34.24% - 100.00%]65 PPC (95%CI) 100.00% [34.24% - 100.00%]66 PPC (95%CI) 100.00% [34.24% - 100.00%]67 PPC (95%CI) 100.00% [34.24% - 100.00%]68 PPC (95%CI) 100.00% [34.24% - 100.00%]69 PPC (95%CI) 100.00% [34.24% - 100.00%]70 PPC (95%CI) 100.00% [34.24% - 100.00%]71 PPC (95%CI) 100.00% [34.24% - 100.00%]72 PPC (95%CI) 100.00% [34.24% - 100.00%]73 PPC (95%CI) 100.00% [34.24% - 100.00%]74 PPC (95%CI) 100.00% [34.24% - 100.00%]75 PPC (95%CI) 100.00% [34.24% - 100.00%]76 PPC (95%CI) 100.00% [34.24% - 100.00%]77 PPC (95%CI) 100.00% [34.24% - 100.00%]78 PPC (95%CI) 100.00% [34.24% - 100.00%]79 PPC (95%CI) 100.00% [34.24% - 100.00%]80 PPC (95%CI) 100.00% [34.24% - 100.00%]81 PPC (95%CI) 100.00% [34.24% - 100.00%]82 PPC (95%CI) 100.00% [34.24% - 100.00%]83 PPC (95%CI) 100.00% [34.24% - 100.00%]84 PPC (95%CI) 100.00% [34.24% - 100.00%]85 PPC (95%CI) 100.00% [34.24% - 100.00%]86 PPC (95%CI) 100.00% [34.24% - 100.00%]87 PPC (95%CI) 100.00% [34.24% - 100.00%]88 PPC (95%CI) 100.00% [34.24% - 100.00%]89 PPC (95%CI) 100.00% [34.24% - 100.00%]90 PPC (95%CI) 100.00% [34.24% - 100.00%]91 PPC (95%CI) 100.00% [34.24% - 100.00%]92 PPC (95%CI) 100.00% [34.24% - 100.00%]93 PPC (95%CI) 100.00% [34.24% - 100.00%]94 PPC (95%CI) 100.00% [34.24% - 100.00%]95 PPC (95%CI) 100.00% [34.24% - 100.00%]96 PPC (95%CI) 100.00% [34.24% - 100.00%]97 PPC (95%CI) 100.00% [34.24% - 100.00%]98 PPC (95%CI) 100.00% [34.24% - 100.00%]99 PPC (95%CI) 100.00% [34.24% - 100.00%]100 PPC (95%CI) 100.00% [34.24% - 100.00%]101 PPC (95%CI) 100.00% [34.24% - 100.00%]102 PPC (95%CI) 100.00% [34.24% - 100.00%]103 PPC (95%CI) 100.00% [34.24% - 100.00%]104 PPC (95%CI) 100.00% [34.24% - 100.00%]105 PPC (95%CI) 100.00% [34.24% - 100.00%]106 PPC (95%CI) 100.00% [34.24% - 100.00%]107 PPC (95%CI) 100.00% [34.24% - 100.00%]108 PPC (95%CI) 100.00% [34.24% - 100.00%]109 PPC (95%CI) 100.00% [34.24% - 100.00%]110 PPC (95%CI) 100.00% [34.24% - 100.00%]111 PPC (95%CI) 100.00% [34.24% - 100.00%]112 PPC (95%CI) 100.00% [34.24% - 100.00%]113 PPC (95%CI) 100.00% [34.24% - 100.00%]114 PPC (95%CI) 100.00% [34.24% - 100.00%]115 PPC (95%CI) 100.00% [34.24% - 100.00%]116 PPC (95%CI) 100.00% [34.24% - 100.00%]117 PPC (95%CI) 100.00% [34.24% - 100.00%]118 PPC (95%CI) 100.00% [34.24% - 100.00%]119 PPC (95%CI) 100.00% [34.24% - 100.00%]120 PPC (95%CI) 100.00% [34.24% - 100.00%]121 PPC (95%CI) 100.00% [34.24% - 100.00%]122 PPC (95%CI) 100.00% [34.24% - 100.00%]123 PPC (95%CI) 100.00% [34.24% - 100.00%]124 PPC (95%CI) 100.00% [34.24% - 100.00%]125 PPC (95%CI) 100.00% [34.24% - 100.00%]126 PPC (95%CI) 100.00% [34.24% - 100.00%]127 PPC (95%CI) 100.00% [34.24% - 100.00%]128 PPC (95%CI) 100.00% [34.24% - 100.00%]129 PPC (95%CI) 100.00% [34.24% - 100.00%]130 PPC (95%CI) 100.00% [34.24% - 100.00%]131 PPC (95%CI) 100.00% [34.24% - 100.00%]132 PPC (95%CI) 100.00% [34.24% - 100.00%]133 PPC (95%CI) 100.00% [34.24% - 100.00%]134 PPC (95%CI) 100.00% [34.24% - 100.00%]135 PPC (95%CI) 100.00% [34.24% - 100.00%]136 PPC (95%CI) 100.00% [34.24% - 100.00%]137 PPC (95%CI) 100.00% [34.24% - 100.00%]138 PPC (95%CI) 100.00% [34.24% - 100.00%]139 PPC (95%CI) 100.00% [34.24% - 100.00%]140 PPC (95%CI) 100.00% [34.24% - 100.00%]141 PPC (95%CI) 100.00% [34.24% - 100.00%]142 PPC (95%CI) 100.00% [34.24% - 100.00%]143 PPC (95%CI) 100.00% [34.24% - 100.00%]144 PPC (95%CI) 100.00% [34.24% - 100.00%]145 PPC (95%CI) 100.00% [34.24% - 100.00%]146 PPC (95%CI) 100.00% [34.24% - 100.00%]147 PPC (95%CI) 100.00% [34.24% - 100.00%]148 PPC (95%CI) 100.00% [34.24% - 100.00%]149 PPC (95%CI) 100.00% [34.24% - 100.00%]150 PPC (95%CI) 100.00% [34.24% - 100.00%]151 PPC (95%CI) 100.00% [34.24% - 100.00%]152 PPC (95%CI) 100.00% [34.24% - 100.00%]153 PPC (95%CI) 100.00% [34.24% - 100.00%]154 PPC (95%CI) 100.00% [34.24% - 100.00%]155 PPC (95%CI) 100.00% [34.24% - 100.00%]156 PPC (95%CI) 100.00% [34.24% - 100.00%]157 PPC (95%CI) 100.00% [34.24% - 100.00%]158 PPC (95%CI) 100.00% [34.24% - 100.00%]159 PPC (95%CI) 100.00% [34.24% - 100.00%]160 PPC (95%CI) 100.00% [34.24% - 100.00%]161 PPC (95%CI) 100.00% [34.24% - 100.00%]162 PPC (95%CI) 100.00% [34.24% - 100.00%]163 PPC (95%CI) 100.00% [34.24% - 100.00%]164 PPC (95%CI) 100.00% [34.24% - 100.00%]165 PPC (95%CI) 100.00% [34.24% - 100.00%]166 PPC (95%CI) 100.00% [34.24% - 100.00%]167 PPC (95%CI) 100.00% [34.24% - 100.00%]168 PPC (95%CI) 100.00% [34.24% - 100.00%]169 PPC (95%CI) 100.00% [34.24% - 100.00%]170 PPC (95%CI) 100.00% [34.24% - 100.00%]171 PPC (95%CI) 100.00% [34.24% - 100.00%]172 PPC (95%CI) 100.00% [34.24% - 100.00%]173 PPC (95%CI) 100.00% [34.24% - 100.00%]174 PPC (95%CI) 100.00% [34.24% - 100.00%]175 PPC (95%CI) 100.00% [34.24% - 100.00%]176 PPC (95%CI) 100.00% [34.24% - 100.00%]177 PPC (95%CI) 100.00% [34.24% - 100.00%]178 PPC (95%CI) 100.00% [34.24% - 100.00%]179 PPC (95%CI) 100.00% [34.24% - 100.00%]180 PPC (95%CI) 100.00% [34.24% - 100.00%]181 PPC (95%CI) 100.00% [34.24% - 100.00%]182 PPC (95%CI) 100.00% [34.24% - 100.00%]183 PPC (95%CI) 100.00% [34.24% - 100.00%]184 PPC (95%CI) 100.00% [34.24% - 100.00%]185 PPC (95%CI) 100.00% [34.24% - 100.00%]186 PPC (95%CI) 100.00% [34.24% - 100.00%]187 PPC (95%CI) 100.00% [34.24% - 100.00%]188 PPC (95%CI) 100.00% [34.24% - 100.00%]189 PPC (95%CI) 100.00% [34.24% - 100.00%]190 PPC (95%CI) 100.00% [34.24% - 100.00%]191 PPC (95%CI) 100.00% [34.24% - 100.00%]192 PPC (95%CI) 100.00% [34.24% - 100.00%]193 PPC (95%CI) 100.00% [34.24% - 100.00%]194 PPC (95%CI) 100.00% [34.24% - 100.00%]195 PPC (95%CI) 100.00% [34.24% - 100.00%]196 PPC (95%CI) 100.00% [34.24% - 100.00%]197 PPC (95%CI) 100.00% [34.24% - 100.00%]198 PPC (95%CI) 100.00% [34.24% - 100.00%]199 PPC (95%CI) 100.00% [34.24% - 100.00%]200 PPC (95%CI) 100.00% [34.24% - 100.00%]201 PPC (95%CI) 100.00% [34.24% - 100.00%]202 PPC (95%CI) 100.00% [34.24% - 100.00%]203 PPC (95%CI) 100.00% [34.24% - 100.00%]204 PPC (95%CI) 100.00% [34.24% - 100.00%]205 PPC (95%CI) 100.00% [34.24% - 100.00%]206 PPC (95%CI) 100.00% [34.24% - 100.00%]207 PPC (95%CI) 100.00% [34.24% - 100.00%]208 PPC (95%CI) 100.00% [34.24% - 100.00%]209 PPC (95%CI) 100.00% [34.24% - 100.00%]210 PPC (95%CI) 100.00% [34.24% - 100.00%]211 PPC (95%CI) 100.00% [34.24% - 100.00%]212 PPC (95%CI) 100.00% [34.24% - 100.00%]213 PPC (95%CI) 100.00% [34.24% - 100.00%]214 PPC (95%CI) 100.00% [34.24% - 100.00%]215 PPC (95%CI) 100.00% [34.24% - 100.00%]216 PPC (95%CI) 100.00% [34.24% - 100.00%]217 PPC (95%CI) 100.00% [34.24% - 100.00%]218 PPC (95%CI) 100.00% [34.24% - 100.00%]219 PPC (95%CI) 100.00% [34.24% - 100.00%]220 PPC (95%CI) 100.00% [34.24% - 100.00%]221 PPC (95%CI) 100.00% [34.24% - 100.00%]222 PPC (95%CI) 100.00% [34.24% - 100.00%]223 PPC (95%CI) 100.00% [34.24% - 100.00%]224 PPC (95%CI) 100.00% [34.24% - 100.00%]225 PPC (95%CI) 100.00% [34.24% - 100.00%]226 PPC (95%CI) 100.00% [34.24% - 100.00%]227 PPC (95%CI) 100.00% [34.24% - 100.00%]228 PPC (95%CI) 100.00% [34.24% - 100.00%]229 PPC (95%CI) 100.00% [34.24% - 100.00%]230 PPC (95%CI) 100.00% [34.24% - 100.00%]231 PPC (95%CI) 100.00% [34.24% - 100.00%]232 PPC (95%CI) 100.00% [34.24% - 100.00%]233 PPC (95%CI) 100.00% [34.24% - 100.00%]234 PPC (95%CI) 100.00% [34.24% - 100.00%]235 PPC (95%CI) 100.00% [34.24% - 100.00%]236 PPC (95%CI) 100.00% [34.24% - 100.00%]237 PPC (95%CI) 100.00% [34.24% - 100.00%]238 PPC (95%CI) 100.00% [34.24% - 100.00%]239 PPC (95%CI) 100.00% [34.24% - 100.00%]240 PPC (95%CI) 100.00% [34.24% - 100.00%]241 PPC (95%CI) 100.00% [34.24% - 100.00%]242 PPC (95%CI) 100.00% [34.24% - 100.00%]243 PPC (95%CI) 100.00% [34.24% - 100.00%]244 PPC (95%CI) 100.00% [34.24% - 100.00%]245 PPC (95%CI) 100.00% [34.24% - 100.00%]246 PPC (95%CI) 100.00% [34.24% - 100.00%]247 PPC (95%CI) 100.00% [34.24% - 100.00%]248 PPC (95%CI) 100.00% [34.24% - 100.00%]249 PPC (95%CI) 100.00% [34.24% - 100.00%]250 PPC (95%CI) 100.00% [34.24% - 100.00%]251 PPC (95%CI) 100.00% [34.24% - 100.00%]252 PPC (95%CI) 100.00% [34.24% - 100.00%]253 PPC (95%CI) 100.00% [34.24% - 100.00%]254 PPC (95%CI) 100.00% [34.24% - 100.00%]255 PPC (95%CI) 100.00% [34.24% - 100.00%]256 PPC (95%CI) 100.00% [34.24% - 100.00%]257 PPC (95%CI) 100.00% [34.24% - 100.00%]258 PPC (95%CI) 100.00% [34.24% - 100.00%]259 PPC (95%CI) 100.00% [34.24% - 100.00%]260 PPC (95%CI) 100.00% [34.24% - 100.00%]261 PPC (95%CI) 100.00% [34.24% - 100.00%]262 PPC (95%CI) 100.00% [34.24% - 100.00%]263 PPC (95%CI) 100.00% [34.24% - 100.00%]264 PPC (95%CI) 100.00% [34.24% - 100.00%]265 PPC (95%CI) 100.00% [34.24% - 100.00%]266 PPC (95%CI) 100.00% [34.24% - 100.00%]267 PPC (95%CI) 100.00% [34.24% - 100.00%]268 PPC (95%CI) 100.00% [34.24% - 100.00%]269 PPC (95%CI) 100.00% [34.24% - 100.00%]270 PPC (95%CI) 100.00% [34.24% - 100.00%]271 PPC (95%CI) 100.00% [34.24% - 100.00%]272 PPC (95%CI) 100.00% [34.24% - 100.00%]273 PPC (95%CI) 100.00% [34.24% - 100.00%]274 PPC (95%CI) 100.00% [34.24% - 100.00%]275 PPC (95%CI) 100.00% [34.24% - 100.00%]276 PPC (95%CI) 100.00% [34.24% - 100.00%]277 PPC (95%CI) 100.00% [34.24% - 100.00%]278 PPC (95%CI) 100.00% [34.24% - 100.00%]279 PPC (95%CI) 100.00% [34.24% - 100.00%]280 PPC (95%CI) 100.00% [34.24% - 100.00%]281 PPC (95%CI) 100.00% [34.24% - 100.00%]282 PPC (95%CI) 100.00% [34.24% - 100.00%]283 PPC (95%CI) 100.00% [34.24% - 100.00%]284 PPC (95%CI) 100.00% [34.24% - 100.00%]285 PPC (95%CI) 100.00% [34.24% - 100.00%]286 PPC (95%CI) 100.00% [34.24% - 100.00%]287 PPC (95%CI) 100.00% [34.24% - 100.00%]288 PPC (95%CI) 100.00% [34.24% - 100.00%]289 PPC (95%CI) 100.00% [34.24% - 100.00%]290 PPC (95%CI) 100.00% [34.24% - 100.00%]291 PPC (95%CI) 100.00% [34.24% - 100.00%]292 PPC (95%CI) 100.00% [34.24% - 100.00%]293 PPC (95%CI) 100.00% [34.24% - 100.00%]294 PPC (95%CI) 100.00% [34.24% - 100.00%]295 PPC (95%CI) 100.00% [34.24% - 100.00%]296 PPC (95%CI) 100.00% [34.24% - 100.00%]297 PPC (95%CI) 100.00% [34.24% - 100.00%]298 PPC (95%CI) 100.00% [34.24% - 100.00%]299 PPC (95%CI) 100.00% [34.24% - 100.00%]300 PPC (95%CI) 100.00% [34.24% - 100.00%]301 PPC (95%CI) 100.00% [34.24% - 100.00%]302 PPC (95%CI) 100.00% [34.24% - 100.00%]303 PPC (95%CI) 100.00% [34.24% - 100.00%]304 PPC (95%CI) 100.00% [34.24% - 100.00%]305 PPC (95%CI) 100.00% [34.24% - 100.00%]306 PPC (95%CI) 100.00% [34.24% - 100.00%]307 PPC (95%CI) 100.00% [34.24% - 100.00%]308 PPC (95%CI) 100.00% [34.24% - 100.00%]309 PPC (95%CI) 100.00% [34.24% - 100.00%]310 PPC (95%CI) 100.00% [34.24% - 100.00%]311 PPC (95%CI) 100.00% [34.24% - 100.00%]312 PPC (95%CI) 100.00% [34.24% - 100.00%]313 PPC (95%CI) 100.00% [34.24% - 100.00%]314 PPC (95%CI) 100.00% [34.24% - 100.00%]315 PPC (95%CI) 100.00% [34.24% - 100.00%]316 PPC (95%CI) 100.00% [34.24% - 100.00%]317 PPC (95%CI) 100.00% [34.24% - 100.00%]318 PPC (95%CI) 100.00% [34.24% - 100.00%]319 PPC (95%CI) 100.00% [34.24% - 100.00%]320 PPC (95%CI) 100.00% [34.24% - 100.00%]321 PPC (95%CI) 100.00% [34.24% - 100.00%]322 PPC (95%CI) 100.00% [34.24% - 100.00%]323 PPC (95%CI) 100.00% [34.24% - 100.00%]324 PPC (95%CI) 100.00% [34.24% - 100.00%]325 PPC (95%CI) 100.00% [34.24% - 100.00%]326 PPC (95%CI) 100.00% [34.24% - 100.00%]327 PPC (95%CI) 100.00% [34.24% - 100.00%]328 PPC (95%CI) 100.00% [34.24% - 100.00%]329 PPC (95%CI) 100.00% [34.24% - 100.00%]330 PPC (95%CI) 100.00% [34.24% - 100.00%]331 PPC (95%CI) 100.00% [34.24% - 100.00%]332 PPC (95%CI) 100.00% [34.24% - 100.00%]333 PPC (95%CI) 100.00% [34.24% - 100.00%]334 PPC (95%CI) 100.00% [34.24% - 100.00%]335 PPC (95%CI) 100.00% [34.24% - 100.00%]336 PPC (95%CI) 100.00% [34.24% - 100.00%]337 PPC (95%CI) 100.00% [34.24% - 100.00%]338 PPC (95%CI) 100.00% [34.24% - 100.00%]339 PPC (95%CI) 100.00% [34.24% - 100.00%]340 PPC (95%CI) 100.00% [34.24% - 100.00%]341 PPC (95%CI) 100.00% [34.24% - 100.00%]342 PPC (95%CI) 100.00% [34.24% - 100.00%]343 PPC (95%CI) 100.00% [34.24% - 100.00%]344 PPC (95%CI) 100.00% [34.24% - 100.00%]345 PPC (95%CI) 100.00% [34.24% - 100.00%]346 PPC (95%CI) 100.00% [34.24% - 100.00%]347 PPC (95%CI) 100.00% [34.24% - 100.00%]348 PPC (95%CI) 100.00% [34.24% - 100.00%]349 PPC (95%CI) 100.00% [34.24% - 100.00%]350 PPC (95%CI) 100.00% [34.24% - 100.00%]351 PPC (95%CI) 100.00% [34.24% - 100.00%]352 PPC (95%CI) 100.00% [34.24% - 100.00%]353 PPC (95%CI) 100.00% [34.24% - 100.00%]354 PPC (95%CI) 100.00% [34.24% - 100.00%]355 PPC (95%CI) 100.00% [34.24% - 100.00%]356 PPC (95%CI) 100.00% [34.24% - 100.00%]357 PPC (95%CI) 100.00% [34.24% - 100.00%]358 PPC (95%CI) 100.00% [34.24% - 100.00%]359 PPC (95%CI) 100.00% [34.24% - 100.00%]360 PPC (95%CI) 100.00% [34.24% - 100.00%]361 PPC (95%CI) 100.00% [34.24% - 100.00%]362 PPC (95%CI) 100.00% [34.24% - 100.00%]363 PPC (95%CI) 100.00% [34.24% - 100.00%]364 PPC (95%CI) 100.00% [34.24% - 100.00%]365 PPC (95%CI) 100.00% [34.24% - 100.00%]# }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableTreatment.html","id":null,"dir":"Reference","previous_headings":"","what":"Format a summarised_treatment result into a visual table. — tableTreatment","title":"Format a summarised_treatment result into a visual table. — tableTreatment","text":"Format summarised_treatment result visual table.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableTreatment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format a summarised_treatment result into a visual table. — tableTreatment","text":"","code":"tableTreatment(   result,   header = c(\"cdm_name\", \"cohort_name\"),   groupColumn = \"variable_name\",   type = \"gt\",   hide = c(\"window_name\", \"mutually_exclusive\", \"censor_date\", \"cohort_table_name\",     \"index_date\", \"treatment_cohort_name\"),   .options = list() )"},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableTreatment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format a summarised_treatment result into a visual table. — tableTreatment","text":"result summarised_result object. header Columns use header. See options availableTableColumns(result). groupColumn Columns group . See options availableTableColumns(result). type Type table. Check supported types visOmopResults::tableType(). hide Columns hide visualisation. See options availableTableColumns(result). .options named list additional formatting options. visOmopResults::tableOptions() shows allowed arguments default values.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableTreatment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format a summarised_treatment result into a visual table. — tableTreatment","text":"table formatted version summariseTreatment() results.","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/reference/tableTreatment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format a summarised_treatment result into a visual table. — tableTreatment","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  result <- cdm$cohort1 |>   summariseTreatment(     treatmentCohortName = \"cohort2\",     window = list(c(0, 30), c(31, 365))   ) #> ℹ Intersect with medications table (cohort2) #> ℹ Summarising medications.  tableTreatment(result)                     CDM name                            DUS MOCK            Treatment       Estimate name                Cohort name            cohort_1       cohort_2       cohort_3     Medication from index date to 30 days after     cohort_1 N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)cohort_2 N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)cohort_3 N (%) 0 (0.00 %) 0 (0.00 %) 1 (16.67 %)untreated N (%) 1 (100.00 %) 3 (100.00 %) 5 (83.33 %)not in observation N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)Medication from 31 days after to 365 days after the index date     cohort_1 N (%) 0 (0.00 %) 0 (0.00 %) 1 (16.67 %)cohort_2 N (%) 0 (0.00 %) 1 (33.33 %) 0 (0.00 %)cohort_3 N (%) 1 (100.00 %) 0 (0.00 %) 1 (16.67 %)untreated N (%) 0 (0.00 %) 2 (66.67 %) 4 (66.67 %)not in observation N (%) 0 (0.00 %) 0 (0.00 %) 0 (0.00 %)# }"},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"drugutilisation-102","dir":"Changelog","previous_headings":"","what":"DrugUtilisation 1.0.2","title":"DrugUtilisation 1.0.2","text":"CRAN release: 2025-05-13 Add examples atc ingredient documentation @catalamarti Add summariseTreatment input information vignette @KimLopezGuell Drug restart documentation @KimLopezGuell Add drug utilisation documentation @KimLopezGuell Update equation daily dose vignette @KimLopezGuell Compatibility omopgenerics 1.2.0 @catalamarti Homogenise examples @catalamarti","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"drugutilisation-101","dir":"Changelog","previous_headings":"","what":"DrugUtilisation 1.0.1","title":"DrugUtilisation 1.0.1","text":"CRAN release: 2025-04-15 lifecycle stable @catalamarti Correct settings NA @catalamarti add .options argument @catalamarti","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"drugutilisation-100","dir":"Changelog","previous_headings":"","what":"DrugUtilisation 1.0.0","title":"DrugUtilisation 1.0.0","text":"CRAN release: 2025-03-27 Stable release. plotPPC 0 100% @catalamarti add observation_period_id erafy @catalamarti use window_name factor plotTreatment/Indication @catalamarti remove lifecycle tags 1.0.0 @catalamarti use mockDisconnect tests @catalamarti Change default tables hide settings @catalamarti Test validateNameStyle @catalamarti update requirePriorDrugWashout <= align IncidencePrevalence @catalamarti","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"drugutilisation-083","dir":"Changelog","previous_headings":"","what":"DrugUtilisation 0.8.3","title":"DrugUtilisation 0.8.3","text":"CRAN release: 2025-03-20 Add +1L initialExposureDuration calculate duration end - start + 1 @catalamarti","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"drugutilisation-082","dir":"Changelog","previous_headings":"","what":"DrugUtilisation 0.8.2","title":"DrugUtilisation 0.8.2","text":"CRAN release: 2025-01-16 Fix snowflake edge case duplicated prescriptions @catalamarti","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"drugutilisation-081","dir":"Changelog","previous_headings":"","what":"DrugUtilisation 0.8.1","title":"DrugUtilisation 0.8.1","text":"CRAN release: 2024-12-19 Arguments recorded summarise* functions @catalamarti Improved performance addIndication, addTreatment, summariseIndication, summariseTreatment @catalamarti","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"drugutilisation-080","dir":"Changelog","previous_headings":"","what":"DrugUtilisation 0.8.0","title":"DrugUtilisation 0.8.0","text":"CRAN release: 2024-12-10","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"new-features-0-8-0","dir":"Changelog","previous_headings":"","what":"New features","title":"DrugUtilisation 0.8.0","text":"Add argument … generateATC/IngredientCohortSet @catalamarti benchmarkDrugUtilisation test functions @MimiYuchenGuo Add confidence intervals PPC @catalamarti Export erafyCohort @catalamarti Add numberExposures daysPrescribed generate functions @catalamarti Add subsetCohort subsetCohortId arguments cohort creation functions @catalamarti New function: addDrugRestart @catalamarti Add initialExposureDuration @catalamarti add cohortId summarise* functions @catalamarti addDaysPrescribed @catalamarti plotDrugUtilisation @catalamarti","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"minor-updates-0-8-0","dir":"Changelog","previous_headings":"","what":"Minor updates","title":"DrugUtilisation 0.8.0","text":"Account omopgenerics 0.4.0 @catalamarti Add messages dropped records cohort creation @catalamarti Refactor table functions following visOmopResults 0.5.0 release @catalamart Cast settings characters @catalamarti checkVersion utility function tables plots @catalamarti Deprecation warnings errors deprecated arguments geenrateDrugUtilisation @catalamarti Add message many indications @catalamarti treated -> untreated @catalamarti warn overwrite columns @catalamarti Use omopgenerics assert function @catalamarti add documentation helpers consistent argument documentation @catalamarti exposedTime -> daysExposed @catalamarti Fix cast warning mock @catalamarti test addDaysPrescribed @catalamarti refactor plots use visOmopResults plot tools @catalamarti","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"bug-fix-0-8-0","dir":"Changelog","previous_headings":"","what":"Bug fix","title":"DrugUtilisation 0.8.0","text":"allow integer64 sampleSize @catalamarti","code":""},{"path":"https://darwin-eu.github.io/DrugUtilisation/news/index.html","id":"drugutilisation-070","dir":"Changelog","previous_headings":"","what":"DrugUtilisation 0.7.0","title":"DrugUtilisation 0.7.0","text":"CRAN release: 2024-07-29 Deprecate dose specific functions: addDailyDose, addRoute, stratifyByUnit. Deprecate drug use functions: addDrugUse, summariseDrugUse. Rename dailyDoseCoverage -> summariseDoseCoverage. Refactor addIndication create categorical variable per window. New functionality summariseProportionOfPatientsCovered, tableProportionOfPatientsCovered plotProportionOfPatientsCovered. Create require* functions. New functionality summariseDrugRestart, tableDrugRestart plotDrugRestart. New functionality addDrugUtilisation, summariseDrugUtilisation tableDrugUtilisation","code":""}]
